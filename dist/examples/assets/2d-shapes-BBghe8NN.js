import{a as e,c as t,d as n,f as r,m as i,p as a,s as o,t as s,u as c}from"./lib-B0aPbQsN.js";var l,u,d,f=new o;async function p(o){try{u=new(await(a.Renderer(o,`2D Shapes`)))}catch(e){alert(e)}let p=new s,m=new n(3349069),h=[],g=[],_=[],v=new e,y=new u.Pipeline,b=y.CreateShaderModule(i);u.CreatePassDescriptor(u.CreateColorAttachment(m)),await u.AddPipeline(y,{fragment:y.CreateFragmentState(b),vertex:y.CreateVertexState(b,v.GetPositionBufferLayout(y))}),v.Destroy();function x(){f.Traverse(e=>e.Destroy?.()),h.splice(0),g.splice(0),_.splice(0),f.Children.splice(0),cancelAnimationFrame(l)}function S(){w(),l=requestAnimationFrame(T)}function C(){return m.rgb=[r.Random(.3),r.Random(.2),r.Random(.4)]}function w(){let[n,i]=u.CanvasSize;for(let a=3;a<=12;a++){let o=a===11&&64||a;for(let a=0;a<2;a++){let s=r.Random(50,100),l=new t(new e({segments:o,radius:s,innerRadius:r.Random(.75,.95)*s*a}),new c(C()));_.push([r.Random(-1),r.Random(-1)]),l.Rotation=r.Random(0,r.TAU),l.Position=[r.Random(s,n-s),r.Random(s,i-s)],l.SetRenderPipeline(y),g.push(r.Random(1,10)),h.push(r.Random(0,.1)),f.Add(l)}}}function T(e,t=0){let[n,r]=u.CanvasSize;l=requestAnimationFrame(T),u.Render(f),f.Traverse(e=>{let{min:i,max:a}=e.BoundingBox,[o,s]=e.Position,c=_[t];(i[0]<=0||a[0]>=n)&&(c[0]*=-1,e.Material.Color=C()),(i[1]<=0||a[1]>=r)&&(c[1]*=-1,e.Material.Color=C()),e.Position=[o+c[0]*g[t],s+c[1]*g[t]],e.Rotation+=h[t++]})}d=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-240,!f.MainCamera&&f.AddCamera(p),u.SetCanvasSize(e,n),p.Size=u.CanvasSize}x(),S()}),d.observe(document.body)}function m(){a.OnLost=()=>void 0,cancelAnimationFrame(l),d.disconnect(),u.Destroy(),a.Destroy(),f.Destroy()}export{m as destroy,p as run};
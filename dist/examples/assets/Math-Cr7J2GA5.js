function et(a,g){return class extends a{constructor(...O){super(...O),g(this)}}}const ut=et(Array,a=>a.fill(0));let V=1e-6;function rt(a){const g=V;return V=a,g}function it(a){return a*Math.PI/180}function ft(a){return a*180/Math.PI}function wt(a,g,O){return a+(g-a)*O}function at(a,g,O){const b=g-a;return Math.abs(g-a)<V?a:(O-a)/b}function Mt(a,g){return(a%g+g)%g}var _n={__proto__:null,get EPSILON(){return V},degToRad:it,euclideanModulo:Mt,inverseLerp:at,lerp:wt,radToDeg:ft,setEpsilon:rt};function ht(a){function g(l=0,D=0){const d=new a(2);return l!==void 0&&(d[0]=l,D!==void 0&&(d[1]=D)),d}const O=g;function b(l,D,d){const n=d??new a(2);return n[0]=l,n[1]=D,n}function ln(l,D){const d=D??new a(2);return d[0]=Math.ceil(l[0]),d[1]=Math.ceil(l[1]),d}function en(l,D){const d=D??new a(2);return d[0]=Math.floor(l[0]),d[1]=Math.floor(l[1]),d}function $n(l,D){const d=D??new a(2);return d[0]=Math.round(l[0]),d[1]=Math.round(l[1]),d}function Vn(l,D=0,d=1,n){const i=n??new a(2);return i[0]=Math.min(d,Math.max(D,l[0])),i[1]=Math.min(d,Math.max(D,l[1])),i}function un(l,D,d){const n=d??new a(2);return n[0]=l[0]+D[0],n[1]=l[1]+D[1],n}function Ln(l,D,d,n){const i=n??new a(2);return i[0]=l[0]+D[0]*d,i[1]=l[1]+D[1]*d,i}function rn(l,D){const d=l[0],n=l[1],i=D[0],c=D[1],e=Math.sqrt(d*d+n*n),s=Math.sqrt(i*i+c*c),u=e*s,h=u&&xn(l,D)/u;return Math.acos(h)}function m(l,D,d){const n=d??new a(2);return n[0]=l[0]-D[0],n[1]=l[1]-D[1],n}const Zn=m;function fn(l,D){return Math.abs(l[0]-D[0])<V&&Math.abs(l[1]-D[1])<V}function Dn(l,D){return l[0]===D[0]&&l[1]===D[1]}function wn(l,D,d,n){const i=n??new a(2);return i[0]=l[0]+d*(D[0]-l[0]),i[1]=l[1]+d*(D[1]-l[1]),i}function Sn(l,D,d,n){const i=n??new a(2);return i[0]=l[0]+d[0]*(D[0]-l[0]),i[1]=l[1]+d[1]*(D[1]-l[1]),i}function qn(l,D,d){const n=d??new a(2);return n[0]=Math.max(l[0],D[0]),n[1]=Math.max(l[1],D[1]),n}function an(l,D,d){const n=d??new a(2);return n[0]=Math.min(l[0],D[0]),n[1]=Math.min(l[1],D[1]),n}function R(l,D,d){const n=d??new a(2);return n[0]=l[0]*D,n[1]=l[1]*D,n}const In=R;function dn(l,D,d){const n=d??new a(2);return n[0]=l[0]/D,n[1]=l[1]/D,n}function pn(l,D){const d=D??new a(2);return d[0]=1/l[0],d[1]=1/l[1],d}const Pn=pn;function yn(l,D,d){const n=d??new a(3),i=l[0]*D[1]-l[1]*D[0];return n[0]=0,n[1]=0,n[2]=i,n}function xn(l,D){return l[0]*D[0]+l[1]*D[1]}function j(l){const D=l[0],d=l[1];return Math.sqrt(D*D+d*d)}const Fn=j;function C(l){const D=l[0],d=l[1];return D*D+d*d}const Xn=C;function B(l,D){const d=l[0]-D[0],n=l[1]-D[1];return Math.sqrt(d*d+n*n)}const Z=B;function F(l,D){const d=l[0]-D[0],n=l[1]-D[1];return d*d+n*n}const L=F;function nn(l,D){const d=D??new a(2),n=l[0],i=l[1],c=Math.sqrt(n*n+i*i);return c>1e-5?(d[0]=n/c,d[1]=i/c):(d[0]=0,d[1]=0),d}function Yn(l,D){const d=D??new a(2);return d[0]=-l[0],d[1]=-l[1],d}function Q(l,D){const d=D??new a(2);return d[0]=l[0],d[1]=l[1],d}const On=Q;function Mn(l,D,d){const n=d??new a(2);return n[0]=l[0]*D[0],n[1]=l[1]*D[1],n}const Qn=Mn;function hn(l,D,d){const n=d??new a(2);return n[0]=l[0]/D[0],n[1]=l[1]/D[1],n}const Tn=hn;function En(l=1,D){const d=D??new a(2),n=Math.random()*2*Math.PI;return d[0]=Math.cos(n)*l,d[1]=Math.sin(n)*l,d}function p(l){const D=l??new a(2);return D[0]=0,D[1]=0,D}function A(l,D,d){const n=d??new a(2),i=l[0],c=l[1];return n[0]=i*D[0]+c*D[4]+D[12],n[1]=i*D[1]+c*D[5]+D[13],n}function M(l,D,d){const n=d??new a(2),i=l[0],c=l[1];return n[0]=D[0]*i+D[4]*c+D[8],n[1]=D[1]*i+D[5]*c+D[9],n}function t(l,D,d,n){const i=n??new a(2),c=l[0]-D[0],e=l[1]-D[1],s=Math.sin(d),u=Math.cos(d);return i[0]=c*u-e*s+D[0],i[1]=c*s+e*u+D[1],i}function r(l,D,d){const n=d??new a(2);return nn(l,n),R(n,D,n)}function o(l,D,d){const n=d??new a(2);return j(l)>D?r(l,D,n):Q(l,n)}function f(l,D,d){const n=d??new a(2);return wn(l,D,.5,n)}return{create:g,fromValues:O,set:b,ceil:ln,floor:en,round:$n,clamp:Vn,add:un,addScaled:Ln,angle:rn,subtract:m,sub:Zn,equalsApproximately:fn,equals:Dn,lerp:wn,lerpV:Sn,max:qn,min:an,mulScalar:R,scale:In,divScalar:dn,inverse:pn,invert:Pn,cross:yn,dot:xn,length:j,len:Fn,lengthSq:C,lenSq:Xn,distance:B,dist:Z,distanceSq:F,distSq:L,normalize:nn,negate:Yn,copy:Q,clone:On,multiply:Mn,mul:Qn,divide:hn,div:Tn,random:En,zero:p,transformMat4:A,transformMat3:M,rotate:t,setLength:r,truncate:o,midpoint:f}}const mn=new Map;function ot(a){let g=mn.get(a);return g||(g=ht(a),mn.set(a,g)),g}function lt(a){function g(s,u,h){const w=new a(3);return s!==void 0&&(w[0]=s,u!==void 0&&(w[1]=u,h!==void 0&&(w[2]=h))),w}const O=g;function b(s,u,h,w){const y=w??new a(3);return y[0]=s,y[1]=u,y[2]=h,y}function ln(s,u){const h=u??new a(3);return h[0]=Math.ceil(s[0]),h[1]=Math.ceil(s[1]),h[2]=Math.ceil(s[2]),h}function en(s,u){const h=u??new a(3);return h[0]=Math.floor(s[0]),h[1]=Math.floor(s[1]),h[2]=Math.floor(s[2]),h}function $n(s,u){const h=u??new a(3);return h[0]=Math.round(s[0]),h[1]=Math.round(s[1]),h[2]=Math.round(s[2]),h}function Vn(s,u=0,h=1,w){const y=w??new a(3);return y[0]=Math.min(h,Math.max(u,s[0])),y[1]=Math.min(h,Math.max(u,s[1])),y[2]=Math.min(h,Math.max(u,s[2])),y}function un(s,u,h){const w=h??new a(3);return w[0]=s[0]+u[0],w[1]=s[1]+u[1],w[2]=s[2]+u[2],w}function Ln(s,u,h,w){const y=w??new a(3);return y[0]=s[0]+u[0]*h,y[1]=s[1]+u[1]*h,y[2]=s[2]+u[2]*h,y}function rn(s,u){const h=s[0],w=s[1],y=s[2],x=u[0],z=u[1],I=u[2],S=Math.sqrt(h*h+w*w+y*y),q=Math.sqrt(x*x+z*z+I*I),P=S*q,$=P&&xn(s,u)/P;return Math.acos($)}function m(s,u,h){const w=h??new a(3);return w[0]=s[0]-u[0],w[1]=s[1]-u[1],w[2]=s[2]-u[2],w}const Zn=m;function fn(s,u){return Math.abs(s[0]-u[0])<V&&Math.abs(s[1]-u[1])<V&&Math.abs(s[2]-u[2])<V}function Dn(s,u){return s[0]===u[0]&&s[1]===u[1]&&s[2]===u[2]}function wn(s,u,h,w){const y=w??new a(3);return y[0]=s[0]+h*(u[0]-s[0]),y[1]=s[1]+h*(u[1]-s[1]),y[2]=s[2]+h*(u[2]-s[2]),y}function Sn(s,u,h,w){const y=w??new a(3);return y[0]=s[0]+h[0]*(u[0]-s[0]),y[1]=s[1]+h[1]*(u[1]-s[1]),y[2]=s[2]+h[2]*(u[2]-s[2]),y}function qn(s,u,h){const w=h??new a(3);return w[0]=Math.max(s[0],u[0]),w[1]=Math.max(s[1],u[1]),w[2]=Math.max(s[2],u[2]),w}function an(s,u,h){const w=h??new a(3);return w[0]=Math.min(s[0],u[0]),w[1]=Math.min(s[1],u[1]),w[2]=Math.min(s[2],u[2]),w}function R(s,u,h){const w=h??new a(3);return w[0]=s[0]*u,w[1]=s[1]*u,w[2]=s[2]*u,w}const In=R;function dn(s,u,h){const w=h??new a(3);return w[0]=s[0]/u,w[1]=s[1]/u,w[2]=s[2]/u,w}function pn(s,u){const h=u??new a(3);return h[0]=1/s[0],h[1]=1/s[1],h[2]=1/s[2],h}const Pn=pn;function yn(s,u,h){const w=h??new a(3),y=s[2]*u[0]-s[0]*u[2],x=s[0]*u[1]-s[1]*u[0];return w[0]=s[1]*u[2]-s[2]*u[1],w[1]=y,w[2]=x,w}function xn(s,u){return s[0]*u[0]+s[1]*u[1]+s[2]*u[2]}function j(s){const u=s[0],h=s[1],w=s[2];return Math.sqrt(u*u+h*h+w*w)}const Fn=j;function C(s){const u=s[0],h=s[1],w=s[2];return u*u+h*h+w*w}const Xn=C;function B(s,u){const h=s[0]-u[0],w=s[1]-u[1],y=s[2]-u[2];return Math.sqrt(h*h+w*w+y*y)}const Z=B;function F(s,u){const h=s[0]-u[0],w=s[1]-u[1],y=s[2]-u[2];return h*h+w*w+y*y}const L=F;function nn(s,u){const h=u??new a(3),w=s[0],y=s[1],x=s[2],z=Math.sqrt(w*w+y*y+x*x);return z>1e-5?(h[0]=w/z,h[1]=y/z,h[2]=x/z):(h[0]=0,h[1]=0,h[2]=0),h}function Yn(s,u){const h=u??new a(3);return h[0]=-s[0],h[1]=-s[1],h[2]=-s[2],h}function Q(s,u){const h=u??new a(3);return h[0]=s[0],h[1]=s[1],h[2]=s[2],h}const On=Q;function Mn(s,u,h){const w=h??new a(3);return w[0]=s[0]*u[0],w[1]=s[1]*u[1],w[2]=s[2]*u[2],w}const Qn=Mn;function hn(s,u,h){const w=h??new a(3);return w[0]=s[0]/u[0],w[1]=s[1]/u[1],w[2]=s[2]/u[2],w}const Tn=hn;function En(s=1,u){const h=u??new a(3),w=Math.random()*2*Math.PI,y=Math.random()*2-1,x=Math.sqrt(1-y*y)*s;return h[0]=Math.cos(w)*x,h[1]=Math.sin(w)*x,h[2]=y*s,h}function p(s){const u=s??new a(3);return u[0]=0,u[1]=0,u[2]=0,u}function A(s,u,h){const w=h??new a(3),y=s[0],x=s[1],z=s[2],I=u[3]*y+u[7]*x+u[11]*z+u[15]||1;return w[0]=(u[0]*y+u[4]*x+u[8]*z+u[12])/I,w[1]=(u[1]*y+u[5]*x+u[9]*z+u[13])/I,w[2]=(u[2]*y+u[6]*x+u[10]*z+u[14])/I,w}function M(s,u,h){const w=h??new a(3),y=s[0],x=s[1],z=s[2];return w[0]=y*u[0]+x*u[4]+z*u[8],w[1]=y*u[1]+x*u[5]+z*u[9],w[2]=y*u[2]+x*u[6]+z*u[10],w}function t(s,u,h){const w=h??new a(3),y=s[0],x=s[1],z=s[2];return w[0]=y*u[0]+x*u[4]+z*u[8],w[1]=y*u[1]+x*u[5]+z*u[9],w[2]=y*u[2]+x*u[6]+z*u[10],w}function r(s,u,h){const w=h??new a(3),y=u[0],x=u[1],z=u[2],I=u[3]*2,S=s[0],q=s[1],P=s[2],$=x*P-z*q,T=z*S-y*P,E=y*q-x*S;return w[0]=S+$*I+(x*E-z*T)*2,w[1]=q+T*I+(z*$-y*E)*2,w[2]=P+E*I+(y*T-x*$)*2,w}function o(s,u){const h=u??new a(3);return h[0]=s[12],h[1]=s[13],h[2]=s[14],h}function f(s,u,h){const w=h??new a(3),y=u*4;return w[0]=s[y+0],w[1]=s[y+1],w[2]=s[y+2],w}function l(s,u){const h=u??new a(3),w=s[0],y=s[1],x=s[2],z=s[4],I=s[5],S=s[6],q=s[8],P=s[9],$=s[10];return h[0]=Math.sqrt(w*w+y*y+x*x),h[1]=Math.sqrt(z*z+I*I+S*S),h[2]=Math.sqrt(q*q+P*P+$*$),h}function D(s,u,h,w){const y=w??new a(3),x=[],z=[];return x[0]=s[0]-u[0],x[1]=s[1]-u[1],x[2]=s[2]-u[2],z[0]=x[0],z[1]=x[1]*Math.cos(h)-x[2]*Math.sin(h),z[2]=x[1]*Math.sin(h)+x[2]*Math.cos(h),y[0]=z[0]+u[0],y[1]=z[1]+u[1],y[2]=z[2]+u[2],y}function d(s,u,h,w){const y=w??new a(3),x=[],z=[];return x[0]=s[0]-u[0],x[1]=s[1]-u[1],x[2]=s[2]-u[2],z[0]=x[2]*Math.sin(h)+x[0]*Math.cos(h),z[1]=x[1],z[2]=x[2]*Math.cos(h)-x[0]*Math.sin(h),y[0]=z[0]+u[0],y[1]=z[1]+u[1],y[2]=z[2]+u[2],y}function n(s,u,h,w){const y=w??new a(3),x=[],z=[];return x[0]=s[0]-u[0],x[1]=s[1]-u[1],x[2]=s[2]-u[2],z[0]=x[0]*Math.cos(h)-x[1]*Math.sin(h),z[1]=x[0]*Math.sin(h)+x[1]*Math.cos(h),z[2]=x[2],y[0]=z[0]+u[0],y[1]=z[1]+u[1],y[2]=z[2]+u[2],y}function i(s,u,h){const w=h??new a(3);return nn(s,w),R(w,u,w)}function c(s,u,h){const w=h??new a(3);return j(s)>u?i(s,u,w):Q(s,w)}function e(s,u,h){const w=h??new a(3);return wn(s,u,.5,w)}return{create:g,fromValues:O,set:b,ceil:ln,floor:en,round:$n,clamp:Vn,add:un,addScaled:Ln,angle:rn,subtract:m,sub:Zn,equalsApproximately:fn,equals:Dn,lerp:wn,lerpV:Sn,max:qn,min:an,mulScalar:R,scale:In,divScalar:dn,inverse:pn,invert:Pn,cross:yn,dot:xn,length:j,len:Fn,lengthSq:C,lenSq:Xn,distance:B,dist:Z,distanceSq:F,distSq:L,normalize:nn,negate:Yn,copy:Q,clone:On,multiply:Mn,mul:Qn,divide:hn,div:Tn,random:En,zero:p,transformMat4:A,transformMat4Upper3x3:M,transformMat3:t,transformQuat:r,getTranslation:o,getAxis:f,getScaling:l,rotateX:D,rotateY:d,rotateZ:n,setLength:i,truncate:c,midpoint:e}}const Cn=new Map;function Kn(a){let g=Cn.get(a);return g||(g=lt(a),Cn.set(a,g)),g}function Dt(a){const g=ot(a),O=Kn(a);function b(t,r,o,f,l,D,d,n,i){const c=new a(12);return c[3]=0,c[7]=0,c[11]=0,t!==void 0&&(c[0]=t,r!==void 0&&(c[1]=r,o!==void 0&&(c[2]=o,f!==void 0&&(c[4]=f,l!==void 0&&(c[5]=l,D!==void 0&&(c[6]=D,d!==void 0&&(c[8]=d,n!==void 0&&(c[9]=n,i!==void 0&&(c[10]=i))))))))),c}function ln(t,r,o,f,l,D,d,n,i,c){const e=c??new a(12);return e[0]=t,e[1]=r,e[2]=o,e[3]=0,e[4]=f,e[5]=l,e[6]=D,e[7]=0,e[8]=d,e[9]=n,e[10]=i,e[11]=0,e}function en(t,r){const o=r??new a(12);return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=0,o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=0,o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=0,o}function $n(t,r){const o=r??new a(12),f=t[0],l=t[1],D=t[2],d=t[3],n=f+f,i=l+l,c=D+D,e=f*n,s=l*n,u=l*i,h=D*n,w=D*i,y=D*c,x=d*n,z=d*i,I=d*c;return o[0]=1-u-y,o[1]=s+I,o[2]=h-z,o[3]=0,o[4]=s-I,o[5]=1-e-y,o[6]=w+x,o[7]=0,o[8]=h+z,o[9]=w-x,o[10]=1-e-u,o[11]=0,o}function Vn(t,r){const o=r??new a(12);return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o[4]=-t[4],o[5]=-t[5],o[6]=-t[6],o[8]=-t[8],o[9]=-t[9],o[10]=-t[10],o}function un(t,r,o){const f=o??new a(12);return f[0]=t[0]*r,f[1]=t[1]*r,f[2]=t[2]*r,f[4]=t[4]*r,f[5]=t[5]*r,f[6]=t[6]*r,f[8]=t[8]*r,f[9]=t[9]*r,f[10]=t[10]*r,f}const Ln=un;function rn(t,r,o){const f=o??new a(12);return f[0]=t[0]+r[0],f[1]=t[1]+r[1],f[2]=t[2]+r[2],f[4]=t[4]+r[4],f[5]=t[5]+r[5],f[6]=t[6]+r[6],f[8]=t[8]+r[8],f[9]=t[9]+r[9],f[10]=t[10]+r[10],f}function m(t,r){const o=r??new a(12);return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[8]=t[8],o[9]=t[9],o[10]=t[10],o}const Zn=m;function fn(t,r){return Math.abs(t[0]-r[0])<V&&Math.abs(t[1]-r[1])<V&&Math.abs(t[2]-r[2])<V&&Math.abs(t[4]-r[4])<V&&Math.abs(t[5]-r[5])<V&&Math.abs(t[6]-r[6])<V&&Math.abs(t[8]-r[8])<V&&Math.abs(t[9]-r[9])<V&&Math.abs(t[10]-r[10])<V}function Dn(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]}function wn(t){const r=t??new a(12);return r[0]=1,r[1]=0,r[2]=0,r[4]=0,r[5]=1,r[6]=0,r[8]=0,r[9]=0,r[10]=1,r}function Sn(t,r){const o=r??new a(12);if(o===t){let u;return u=t[1],t[1]=t[4],t[4]=u,u=t[2],t[2]=t[8],t[8]=u,u=t[6],t[6]=t[9],t[9]=u,o}const f=t[0],l=t[1],D=t[2],d=t[4],n=t[5],i=t[6],c=t[8],e=t[9],s=t[10];return o[0]=f,o[1]=d,o[2]=c,o[4]=l,o[5]=n,o[6]=e,o[8]=D,o[9]=i,o[10]=s,o}function qn(t,r){const o=r??new a(12),f=t[0],l=t[1],D=t[2],d=t[4],n=t[5],i=t[6],c=t[8],e=t[9],s=t[10],u=s*n-i*e,h=-s*d+i*c,w=e*d-n*c,y=1/(f*u+l*h+D*w);return o[0]=u*y,o[1]=(-s*l+D*e)*y,o[2]=(i*l-D*n)*y,o[4]=h*y,o[5]=(s*f-D*c)*y,o[6]=(-i*f+D*d)*y,o[8]=w*y,o[9]=(-e*f+l*c)*y,o[10]=(n*f-l*d)*y,o}function an(t){const r=t[0],o=t[1],f=t[2],l=t[4],D=t[5],d=t[6],n=t[8],i=t[9],c=t[10];return r*(D*c-i*d)-l*(o*c-i*f)+n*(o*d-D*f)}const R=qn;function In(t,r,o){const f=o??new a(12),l=t[0],D=t[1],d=t[2],n=t[4],i=t[5],c=t[6],e=t[8],s=t[9],u=t[10],h=r[0],w=r[1],y=r[2],x=r[4],z=r[5],I=r[6],S=r[8],q=r[9],P=r[10];return f[0]=l*h+n*w+e*y,f[1]=D*h+i*w+s*y,f[2]=d*h+c*w+u*y,f[4]=l*x+n*z+e*I,f[5]=D*x+i*z+s*I,f[6]=d*x+c*z+u*I,f[8]=l*S+n*q+e*P,f[9]=D*S+i*q+s*P,f[10]=d*S+c*q+u*P,f}const dn=In;function pn(t,r,o){const f=o??wn();return t!==f&&(f[0]=t[0],f[1]=t[1],f[2]=t[2],f[4]=t[4],f[5]=t[5],f[6]=t[6]),f[8]=r[0],f[9]=r[1],f[10]=1,f}function Pn(t,r){const o=r??g.create();return o[0]=t[8],o[1]=t[9],o}function yn(t,r,o){const f=o??g.create(),l=r*4;return f[0]=t[l+0],f[1]=t[l+1],f}function xn(t,r,o,f){const l=f===t?t:m(t,f),D=o*4;return l[D+0]=r[0],l[D+1]=r[1],l}function j(t,r){const o=r??g.create(),f=t[0],l=t[1],D=t[4],d=t[5];return o[0]=Math.sqrt(f*f+l*l),o[1]=Math.sqrt(D*D+d*d),o}function Fn(t,r){const o=r??O.create(),f=t[0],l=t[1],D=t[2],d=t[4],n=t[5],i=t[6],c=t[8],e=t[9],s=t[10];return o[0]=Math.sqrt(f*f+l*l+D*D),o[1]=Math.sqrt(d*d+n*n+i*i),o[2]=Math.sqrt(c*c+e*e+s*s),o}function C(t,r){const o=r??new a(12);return o[0]=1,o[1]=0,o[2]=0,o[4]=0,o[5]=1,o[6]=0,o[8]=t[0],o[9]=t[1],o[10]=1,o}function Xn(t,r,o){const f=o??new a(12),l=r[0],D=r[1],d=t[0],n=t[1],i=t[2],c=t[4],e=t[5],s=t[6],u=t[8],h=t[9],w=t[10];return t!==f&&(f[0]=d,f[1]=n,f[2]=i,f[4]=c,f[5]=e,f[6]=s),f[8]=d*l+c*D+u,f[9]=n*l+e*D+h,f[10]=i*l+s*D+w,f}function B(t,r){const o=r??new a(12),f=Math.cos(t),l=Math.sin(t);return o[0]=f,o[1]=l,o[2]=0,o[4]=-l,o[5]=f,o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function Z(t,r,o){const f=o??new a(12),l=t[0],D=t[1],d=t[2],n=t[4],i=t[5],c=t[6],e=Math.cos(r),s=Math.sin(r);return f[0]=e*l+s*n,f[1]=e*D+s*i,f[2]=e*d+s*c,f[4]=e*n-s*l,f[5]=e*i-s*D,f[6]=e*c-s*d,t!==f&&(f[8]=t[8],f[9]=t[9],f[10]=t[10]),f}function F(t,r){const o=r??new a(12),f=Math.cos(t),l=Math.sin(t);return o[0]=1,o[1]=0,o[2]=0,o[4]=0,o[5]=f,o[6]=l,o[8]=0,o[9]=-l,o[10]=f,o}function L(t,r,o){const f=o??new a(12),l=t[4],D=t[5],d=t[6],n=t[8],i=t[9],c=t[10],e=Math.cos(r),s=Math.sin(r);return f[4]=e*l+s*n,f[5]=e*D+s*i,f[6]=e*d+s*c,f[8]=e*n-s*l,f[9]=e*i-s*D,f[10]=e*c-s*d,t!==f&&(f[0]=t[0],f[1]=t[1],f[2]=t[2]),f}function nn(t,r){const o=r??new a(12),f=Math.cos(t),l=Math.sin(t);return o[0]=f,o[1]=0,o[2]=-l,o[4]=0,o[5]=1,o[6]=0,o[8]=l,o[9]=0,o[10]=f,o}function Yn(t,r,o){const f=o??new a(12),l=t[0],D=t[1],d=t[2],n=t[8],i=t[9],c=t[10],e=Math.cos(r),s=Math.sin(r);return f[0]=e*l-s*n,f[1]=e*D-s*i,f[2]=e*d-s*c,f[8]=e*n+s*l,f[9]=e*i+s*D,f[10]=e*c+s*d,t!==f&&(f[4]=t[4],f[5]=t[5],f[6]=t[6]),f}const Q=B,On=Z;function Mn(t,r){const o=r??new a(12);return o[0]=t[0],o[1]=0,o[2]=0,o[4]=0,o[5]=t[1],o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function Qn(t,r,o){const f=o??new a(12),l=r[0],D=r[1];return f[0]=l*t[0],f[1]=l*t[1],f[2]=l*t[2],f[4]=D*t[4],f[5]=D*t[5],f[6]=D*t[6],t!==f&&(f[8]=t[8],f[9]=t[9],f[10]=t[10]),f}function hn(t,r){const o=r??new a(12);return o[0]=t[0],o[1]=0,o[2]=0,o[4]=0,o[5]=t[1],o[6]=0,o[8]=0,o[9]=0,o[10]=t[2],o}function Tn(t,r,o){const f=o??new a(12),l=r[0],D=r[1],d=r[2];return f[0]=l*t[0],f[1]=l*t[1],f[2]=l*t[2],f[4]=D*t[4],f[5]=D*t[5],f[6]=D*t[6],f[8]=d*t[8],f[9]=d*t[9],f[10]=d*t[10],f}function En(t,r){const o=r??new a(12);return o[0]=t,o[1]=0,o[2]=0,o[4]=0,o[5]=t,o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function p(t,r,o){const f=o??new a(12);return f[0]=r*t[0],f[1]=r*t[1],f[2]=r*t[2],f[4]=r*t[4],f[5]=r*t[5],f[6]=r*t[6],t!==f&&(f[8]=t[8],f[9]=t[9],f[10]=t[10]),f}function A(t,r){const o=r??new a(12);return o[0]=t,o[1]=0,o[2]=0,o[4]=0,o[5]=t,o[6]=0,o[8]=0,o[9]=0,o[10]=t,o}function M(t,r,o){const f=o??new a(12);return f[0]=r*t[0],f[1]=r*t[1],f[2]=r*t[2],f[4]=r*t[4],f[5]=r*t[5],f[6]=r*t[6],f[8]=r*t[8],f[9]=r*t[9],f[10]=r*t[10],f}return{add:rn,clone:Zn,copy:m,create:b,determinant:an,equals:Dn,equalsApproximately:fn,fromMat4:en,fromQuat:$n,get3DScaling:Fn,getAxis:yn,getScaling:j,getTranslation:Pn,identity:wn,inverse:qn,invert:R,mul:dn,mulScalar:Ln,multiply:In,multiplyScalar:un,negate:Vn,rotate:Z,rotateX:L,rotateY:Yn,rotateZ:On,rotation:B,rotationX:F,rotationY:nn,rotationZ:Q,scale:Qn,scale3D:Tn,scaling:Mn,scaling3D:hn,set:ln,setAxis:xn,setTranslation:pn,translate:Xn,translation:C,transpose:Sn,uniformScale:p,uniformScale3D:M,uniformScaling:En,uniformScaling3D:A}}const nt=new Map;function dt(a){let g=nt.get(a);return g||(g=Dt(a),nt.set(a,g)),g}function pt(a){const g=Kn(a);function O(n,i,c,e,s,u,h,w,y,x,z,I,S,q,P,$){const T=new a(16);return n!==void 0&&(T[0]=n,i!==void 0&&(T[1]=i,c!==void 0&&(T[2]=c,e!==void 0&&(T[3]=e,s!==void 0&&(T[4]=s,u!==void 0&&(T[5]=u,h!==void 0&&(T[6]=h,w!==void 0&&(T[7]=w,y!==void 0&&(T[8]=y,x!==void 0&&(T[9]=x,z!==void 0&&(T[10]=z,I!==void 0&&(T[11]=I,S!==void 0&&(T[12]=S,q!==void 0&&(T[13]=q,P!==void 0&&(T[14]=P,$!==void 0&&(T[15]=$)))))))))))))))),T}function b(n,i,c,e,s,u,h,w,y,x,z,I,S,q,P,$,T){const E=T??new a(16);return E[0]=n,E[1]=i,E[2]=c,E[3]=e,E[4]=s,E[5]=u,E[6]=h,E[7]=w,E[8]=y,E[9]=x,E[10]=z,E[11]=I,E[12]=S,E[13]=q,E[14]=P,E[15]=$,E}function ln(n,i){const c=i??new a(16);return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=0,c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=0,c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function en(n,i){const c=i??new a(16),e=n[0],s=n[1],u=n[2],h=n[3],w=e+e,y=s+s,x=u+u,z=e*w,I=s*w,S=s*y,q=u*w,P=u*y,$=u*x,T=h*w,E=h*y,Y=h*x;return c[0]=1-S-$,c[1]=I+Y,c[2]=q-E,c[3]=0,c[4]=I-Y,c[5]=1-z-$,c[6]=P+T,c[7]=0,c[8]=q+E,c[9]=P-T,c[10]=1-z-S,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function $n(n,i){const c=i??new a(16);return c[0]=-n[0],c[1]=-n[1],c[2]=-n[2],c[3]=-n[3],c[4]=-n[4],c[5]=-n[5],c[6]=-n[6],c[7]=-n[7],c[8]=-n[8],c[9]=-n[9],c[10]=-n[10],c[11]=-n[11],c[12]=-n[12],c[13]=-n[13],c[14]=-n[14],c[15]=-n[15],c}function Vn(n,i,c){const e=c??new a(16);return e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e[3]=n[3]+i[3],e[4]=n[4]+i[4],e[5]=n[5]+i[5],e[6]=n[6]+i[6],e[7]=n[7]+i[7],e[8]=n[8]+i[8],e[9]=n[9]+i[9],e[10]=n[10]+i[10],e[11]=n[11]+i[11],e[12]=n[12]+i[12],e[13]=n[13]+i[13],e[14]=n[14]+i[14],e[15]=n[15]+i[15],e}function un(n,i,c){const e=c??new a(16);return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=n[3]*i,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*i,e[9]=n[9]*i,e[10]=n[10]*i,e[11]=n[11]*i,e[12]=n[12]*i,e[13]=n[13]*i,e[14]=n[14]*i,e[15]=n[15]*i,e}const Ln=un;function rn(n,i){const c=i??new a(16);return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15],c}const m=rn;function Zn(n,i){return Math.abs(n[0]-i[0])<V&&Math.abs(n[1]-i[1])<V&&Math.abs(n[2]-i[2])<V&&Math.abs(n[3]-i[3])<V&&Math.abs(n[4]-i[4])<V&&Math.abs(n[5]-i[5])<V&&Math.abs(n[6]-i[6])<V&&Math.abs(n[7]-i[7])<V&&Math.abs(n[8]-i[8])<V&&Math.abs(n[9]-i[9])<V&&Math.abs(n[10]-i[10])<V&&Math.abs(n[11]-i[11])<V&&Math.abs(n[12]-i[12])<V&&Math.abs(n[13]-i[13])<V&&Math.abs(n[14]-i[14])<V&&Math.abs(n[15]-i[15])<V}function fn(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&n[4]===i[4]&&n[5]===i[5]&&n[6]===i[6]&&n[7]===i[7]&&n[8]===i[8]&&n[9]===i[9]&&n[10]===i[10]&&n[11]===i[11]&&n[12]===i[12]&&n[13]===i[13]&&n[14]===i[14]&&n[15]===i[15]}function Dn(n){const i=n??new a(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function wn(n,i){const c=i??new a(16);if(c===n){let X;return X=n[1],n[1]=n[4],n[4]=X,X=n[2],n[2]=n[8],n[8]=X,X=n[3],n[3]=n[12],n[12]=X,X=n[6],n[6]=n[9],n[9]=X,X=n[7],n[7]=n[13],n[13]=X,X=n[11],n[11]=n[14],n[14]=X,c}const e=n[0],s=n[1],u=n[2],h=n[3],w=n[4],y=n[5],x=n[6],z=n[7],I=n[8],S=n[9],q=n[10],P=n[11],$=n[12],T=n[13],E=n[14],Y=n[15];return c[0]=e,c[1]=w,c[2]=I,c[3]=$,c[4]=s,c[5]=y,c[6]=S,c[7]=T,c[8]=u,c[9]=x,c[10]=q,c[11]=E,c[12]=h,c[13]=z,c[14]=P,c[15]=Y,c}function Sn(n,i){const c=i??new a(16),e=n[0],s=n[1],u=n[2],h=n[3],w=n[4],y=n[5],x=n[6],z=n[7],I=n[8],S=n[9],q=n[10],P=n[11],$=n[12],T=n[13],E=n[14],Y=n[15],X=q*Y,_=E*P,H=x*Y,U=E*z,G=x*P,J=q*z,K=u*Y,N=E*h,W=u*P,k=q*h,tn=u*z,sn=x*h,cn=I*T,on=$*S,zn=w*T,gn=$*y,An=w*S,Hn=I*y,Un=e*T,jn=$*s,Gn=e*S,Rn=I*s,Bn=e*y,Jn=w*s,Wn=X*y+U*S+G*T-(_*y+H*S+J*T),kn=_*s+K*S+k*T-(X*s+N*S+W*T),vn=H*s+N*y+tn*T-(U*s+K*y+sn*T),bn=J*s+W*y+sn*S-(G*s+k*y+tn*S),v=1/(e*Wn+w*kn+I*vn+$*bn);return c[0]=v*Wn,c[1]=v*kn,c[2]=v*vn,c[3]=v*bn,c[4]=v*(_*w+H*I+J*$-(X*w+U*I+G*$)),c[5]=v*(X*e+N*I+W*$-(_*e+K*I+k*$)),c[6]=v*(U*e+K*w+sn*$-(H*e+N*w+tn*$)),c[7]=v*(G*e+k*w+tn*I-(J*e+W*w+sn*I)),c[8]=v*(cn*z+gn*P+An*Y-(on*z+zn*P+Hn*Y)),c[9]=v*(on*h+Un*P+Rn*Y-(cn*h+jn*P+Gn*Y)),c[10]=v*(zn*h+jn*z+Bn*Y-(gn*h+Un*z+Jn*Y)),c[11]=v*(Hn*h+Gn*z+Jn*P-(An*h+Rn*z+Bn*P)),c[12]=v*(zn*q+Hn*E+on*x-(An*E+cn*x+gn*q)),c[13]=v*(Gn*E+cn*u+jn*q-(Un*q+Rn*E+on*u)),c[14]=v*(Un*x+Jn*E+gn*u-(Bn*E+zn*u+jn*x)),c[15]=v*(Bn*q+An*u+Rn*x-(Gn*x+Jn*q+Hn*u)),c}function qn(n){const i=n[0],c=n[1],e=n[2],s=n[3],u=n[4],h=n[5],w=n[6],y=n[7],x=n[8],z=n[9],I=n[10],S=n[11],q=n[12],P=n[13],$=n[14],T=n[15],E=I*T,Y=$*S,X=w*T,_=$*y,H=w*S,U=I*y,G=e*T,J=$*s,K=e*S,N=I*s,W=e*y,k=w*s,tn=E*h+_*z+H*P-(Y*h+X*z+U*P),sn=Y*c+G*z+N*P-(E*c+J*z+K*P),cn=X*c+J*h+W*P-(_*c+G*h+k*P),on=U*c+K*h+k*z-(H*c+N*h+W*z);return i*tn+u*sn+x*cn+q*on}const an=Sn;function R(n,i,c){const e=c??new a(16),s=n[0],u=n[1],h=n[2],w=n[3],y=n[4],x=n[5],z=n[6],I=n[7],S=n[8],q=n[9],P=n[10],$=n[11],T=n[12],E=n[13],Y=n[14],X=n[15],_=i[0],H=i[1],U=i[2],G=i[3],J=i[4],K=i[5],N=i[6],W=i[7],k=i[8],tn=i[9],sn=i[10],cn=i[11],on=i[12],zn=i[13],gn=i[14],An=i[15];return e[0]=s*_+y*H+S*U+T*G,e[1]=u*_+x*H+q*U+E*G,e[2]=h*_+z*H+P*U+Y*G,e[3]=w*_+I*H+$*U+X*G,e[4]=s*J+y*K+S*N+T*W,e[5]=u*J+x*K+q*N+E*W,e[6]=h*J+z*K+P*N+Y*W,e[7]=w*J+I*K+$*N+X*W,e[8]=s*k+y*tn+S*sn+T*cn,e[9]=u*k+x*tn+q*sn+E*cn,e[10]=h*k+z*tn+P*sn+Y*cn,e[11]=w*k+I*tn+$*sn+X*cn,e[12]=s*on+y*zn+S*gn+T*An,e[13]=u*on+x*zn+q*gn+E*An,e[14]=h*on+z*zn+P*gn+Y*An,e[15]=w*on+I*zn+$*gn+X*An,e}const In=R;function dn(n,i,c){const e=c??Dn();return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11]),e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function pn(n,i){const c=i??g.create();return c[0]=n[12],c[1]=n[13],c[2]=n[14],c}function Pn(n,i,c){const e=c??g.create(),s=i*4;return e[0]=n[s+0],e[1]=n[s+1],e[2]=n[s+2],e}function yn(n,i,c,e){const s=e===n?e:rn(n,e),u=c*4;return s[u+0]=i[0],s[u+1]=i[1],s[u+2]=i[2],s}function xn(n,i){const c=i??g.create(),e=n[0],s=n[1],u=n[2],h=n[4],w=n[5],y=n[6],x=n[8],z=n[9],I=n[10];return c[0]=Math.sqrt(e*e+s*s+u*u),c[1]=Math.sqrt(h*h+w*w+y*y),c[2]=Math.sqrt(x*x+z*z+I*I),c}function j(n,i,c,e,s){const u=s??new a(16),h=Math.tan(Math.PI*.5-.5*n);if(u[0]=h/i,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=h,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,Number.isFinite(e)){const w=1/(c-e);u[10]=e*w,u[14]=e*c*w}else u[10]=-1,u[14]=-c;return u}function Fn(n,i,c,e=1/0,s){const u=s??new a(16),h=1/Math.tan(n*.5);if(u[0]=h/i,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=h,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,e===1/0)u[10]=0,u[14]=c;else{const w=1/(e-c);u[10]=c*w,u[14]=e*c*w}return u}function C(n,i,c,e,s,u,h){const w=h??new a(16);return w[0]=2/(i-n),w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2/(e-c),w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1/(s-u),w[11]=0,w[12]=(i+n)/(n-i),w[13]=(e+c)/(c-e),w[14]=s/(s-u),w[15]=1,w}function Xn(n,i,c,e,s,u,h){const w=h??new a(16),y=i-n,x=e-c,z=s-u;return w[0]=2*s/y,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*s/x,w[6]=0,w[7]=0,w[8]=(n+i)/y,w[9]=(e+c)/x,w[10]=u/z,w[11]=-1,w[12]=0,w[13]=0,w[14]=s*u/z,w[15]=0,w}function B(n,i,c,e,s,u=1/0,h){const w=h??new a(16),y=i-n,x=e-c;if(w[0]=2*s/y,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*s/x,w[6]=0,w[7]=0,w[8]=(n+i)/y,w[9]=(e+c)/x,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,u===1/0)w[10]=0,w[14]=s;else{const z=1/(u-s);w[10]=s*z,w[14]=u*s*z}return w}const Z=g.create(),F=g.create(),L=g.create();function nn(n,i,c,e){const s=e??new a(16);return g.normalize(g.subtract(i,n,L),L),g.normalize(g.cross(c,L,Z),Z),g.normalize(g.cross(L,Z,F),F),s[0]=Z[0],s[1]=Z[1],s[2]=Z[2],s[3]=0,s[4]=F[0],s[5]=F[1],s[6]=F[2],s[7]=0,s[8]=L[0],s[9]=L[1],s[10]=L[2],s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}function Yn(n,i,c,e){const s=e??new a(16);return g.normalize(g.subtract(n,i,L),L),g.normalize(g.cross(c,L,Z),Z),g.normalize(g.cross(L,Z,F),F),s[0]=Z[0],s[1]=Z[1],s[2]=Z[2],s[3]=0,s[4]=F[0],s[5]=F[1],s[6]=F[2],s[7]=0,s[8]=L[0],s[9]=L[1],s[10]=L[2],s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}function Q(n,i,c,e){const s=e??new a(16);return g.normalize(g.subtract(n,i,L),L),g.normalize(g.cross(c,L,Z),Z),g.normalize(g.cross(L,Z,F),F),s[0]=Z[0],s[1]=F[0],s[2]=L[0],s[3]=0,s[4]=Z[1],s[5]=F[1],s[6]=L[1],s[7]=0,s[8]=Z[2],s[9]=F[2],s[10]=L[2],s[11]=0,s[12]=-(Z[0]*n[0]+Z[1]*n[1]+Z[2]*n[2]),s[13]=-(F[0]*n[0]+F[1]*n[1]+F[2]*n[2]),s[14]=-(L[0]*n[0]+L[1]*n[1]+L[2]*n[2]),s[15]=1,s}function On(n,i){const c=i??new a(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=n[0],c[13]=n[1],c[14]=n[2],c[15]=1,c}function Mn(n,i,c){const e=c??new a(16),s=i[0],u=i[1],h=i[2],w=n[0],y=n[1],x=n[2],z=n[3],I=n[4],S=n[5],q=n[6],P=n[7],$=n[8],T=n[9],E=n[10],Y=n[11],X=n[12],_=n[13],H=n[14],U=n[15];return n!==e&&(e[0]=w,e[1]=y,e[2]=x,e[3]=z,e[4]=I,e[5]=S,e[6]=q,e[7]=P,e[8]=$,e[9]=T,e[10]=E,e[11]=Y),e[12]=w*s+I*u+$*h+X,e[13]=y*s+S*u+T*h+_,e[14]=x*s+q*u+E*h+H,e[15]=z*s+P*u+Y*h+U,e}function Qn(n,i){const c=i??new a(16),e=Math.cos(n),s=Math.sin(n);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=e,c[6]=s,c[7]=0,c[8]=0,c[9]=-s,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function hn(n,i,c){const e=c??new a(16),s=n[4],u=n[5],h=n[6],w=n[7],y=n[8],x=n[9],z=n[10],I=n[11],S=Math.cos(i),q=Math.sin(i);return e[4]=S*s+q*y,e[5]=S*u+q*x,e[6]=S*h+q*z,e[7]=S*w+q*I,e[8]=S*y-q*s,e[9]=S*x-q*u,e[10]=S*z-q*h,e[11]=S*I-q*w,n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}function Tn(n,i){const c=i??new a(16),e=Math.cos(n),s=Math.sin(n);return c[0]=e,c[1]=0,c[2]=-s,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=s,c[9]=0,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function En(n,i,c){const e=c??new a(16),s=n[0],u=n[1],h=n[2],w=n[3],y=n[8],x=n[9],z=n[10],I=n[11],S=Math.cos(i),q=Math.sin(i);return e[0]=S*s-q*y,e[1]=S*u-q*x,e[2]=S*h-q*z,e[3]=S*w-q*I,e[8]=S*y+q*s,e[9]=S*x+q*u,e[10]=S*z+q*h,e[11]=S*I+q*w,n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}function p(n,i){const c=i??new a(16),e=Math.cos(n),s=Math.sin(n);return c[0]=e,c[1]=s,c[2]=0,c[3]=0,c[4]=-s,c[5]=e,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function A(n,i,c){const e=c??new a(16),s=n[0],u=n[1],h=n[2],w=n[3],y=n[4],x=n[5],z=n[6],I=n[7],S=Math.cos(i),q=Math.sin(i);return e[0]=S*s+q*y,e[1]=S*u+q*x,e[2]=S*h+q*z,e[3]=S*w+q*I,e[4]=S*y-q*s,e[5]=S*x-q*u,e[6]=S*z-q*h,e[7]=S*I-q*w,n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}function M(n,i,c){const e=c??new a(16);let s=n[0],u=n[1],h=n[2];const w=Math.sqrt(s*s+u*u+h*h);s/=w,u/=w,h/=w;const y=s*s,x=u*u,z=h*h,I=Math.cos(i),S=Math.sin(i),q=1-I;return e[0]=y+(1-y)*I,e[1]=s*u*q+h*S,e[2]=s*h*q-u*S,e[3]=0,e[4]=s*u*q-h*S,e[5]=x+(1-x)*I,e[6]=u*h*q+s*S,e[7]=0,e[8]=s*h*q+u*S,e[9]=u*h*q-s*S,e[10]=z+(1-z)*I,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}const t=M;function r(n,i,c,e){const s=e??new a(16);let u=i[0],h=i[1],w=i[2];const y=Math.sqrt(u*u+h*h+w*w);u/=y,h/=y,w/=y;const x=u*u,z=h*h,I=w*w,S=Math.cos(c),q=Math.sin(c),P=1-S,$=x+(1-x)*S,T=u*h*P+w*q,E=u*w*P-h*q,Y=u*h*P-w*q,X=z+(1-z)*S,_=h*w*P+u*q,H=u*w*P+h*q,U=h*w*P-u*q,G=I+(1-I)*S,J=n[0],K=n[1],N=n[2],W=n[3],k=n[4],tn=n[5],sn=n[6],cn=n[7],on=n[8],zn=n[9],gn=n[10],An=n[11];return s[0]=$*J+T*k+E*on,s[1]=$*K+T*tn+E*zn,s[2]=$*N+T*sn+E*gn,s[3]=$*W+T*cn+E*An,s[4]=Y*J+X*k+_*on,s[5]=Y*K+X*tn+_*zn,s[6]=Y*N+X*sn+_*gn,s[7]=Y*W+X*cn+_*An,s[8]=H*J+U*k+G*on,s[9]=H*K+U*tn+G*zn,s[10]=H*N+U*sn+G*gn,s[11]=H*W+U*cn+G*An,n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}const o=r;function f(n,i){const c=i??new a(16);return c[0]=n[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=n[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function l(n,i,c){const e=c??new a(16),s=i[0],u=i[1],h=i[2];return e[0]=s*n[0],e[1]=s*n[1],e[2]=s*n[2],e[3]=s*n[3],e[4]=u*n[4],e[5]=u*n[5],e[6]=u*n[6],e[7]=u*n[7],e[8]=h*n[8],e[9]=h*n[9],e[10]=h*n[10],e[11]=h*n[11],n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}function D(n,i){const c=i??new a(16);return c[0]=n,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=n,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function d(n,i,c){const e=c??new a(16);return e[0]=i*n[0],e[1]=i*n[1],e[2]=i*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=i*n[6],e[7]=i*n[7],e[8]=i*n[8],e[9]=i*n[9],e[10]=i*n[10],e[11]=i*n[11],n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}return{add:Vn,aim:nn,axisRotate:r,axisRotation:M,cameraAim:Yn,clone:m,copy:rn,create:O,determinant:qn,equals:fn,equalsApproximately:Zn,fromMat3:ln,fromQuat:en,frustum:Xn,frustumReverseZ:B,getAxis:Pn,getScaling:xn,getTranslation:pn,identity:Dn,inverse:Sn,invert:an,lookAt:Q,mul:In,mulScalar:Ln,multiply:R,multiplyScalar:un,negate:$n,ortho:C,perspective:j,perspectiveReverseZ:Fn,rotate:o,rotateX:hn,rotateY:En,rotateZ:A,rotation:t,rotationX:Qn,rotationY:Tn,rotationZ:p,scale:l,scaling:f,set:b,setAxis:yn,setTranslation:dn,translate:Mn,translation:On,transpose:wn,uniformScale:d,uniformScaling:D}}const tt=new Map;function yt(a){let g=tt.get(a);return g||(g=pt(a),tt.set(a,g)),g}function xt(a){const g=Kn(a);function O(p,A,M,t){const r=new a(4);return p!==void 0&&(r[0]=p,A!==void 0&&(r[1]=A,M!==void 0&&(r[2]=M,t!==void 0&&(r[3]=t)))),r}const b=O;function ln(p,A,M,t,r){const o=r??new a(4);return o[0]=p,o[1]=A,o[2]=M,o[3]=t,o}function en(p,A,M){const t=M??new a(4),r=A*.5,o=Math.sin(r);return t[0]=o*p[0],t[1]=o*p[1],t[2]=o*p[2],t[3]=Math.cos(r),t}function $n(p,A){const M=A??g.create(3),t=Math.acos(p[3])*2,r=Math.sin(t*.5);return r>V?(M[0]=p[0]/r,M[1]=p[1]/r,M[2]=p[2]/r):(M[0]=1,M[1]=0,M[2]=0),{angle:t,axis:M}}function Vn(p,A){const M=j(p,A);return Math.acos(2*M*M-1)}function un(p,A,M){const t=M??new a(4),r=p[0],o=p[1],f=p[2],l=p[3],D=A[0],d=A[1],n=A[2],i=A[3];return t[0]=r*i+l*D+o*n-f*d,t[1]=o*i+l*d+f*D-r*n,t[2]=f*i+l*n+r*d-o*D,t[3]=l*i-r*D-o*d-f*n,t}const Ln=un;function rn(p,A,M){const t=M??new a(4),r=A*.5,o=p[0],f=p[1],l=p[2],D=p[3],d=Math.sin(r),n=Math.cos(r);return t[0]=o*n+D*d,t[1]=f*n+l*d,t[2]=l*n-f*d,t[3]=D*n-o*d,t}function m(p,A,M){const t=M??new a(4),r=A*.5,o=p[0],f=p[1],l=p[2],D=p[3],d=Math.sin(r),n=Math.cos(r);return t[0]=o*n-l*d,t[1]=f*n+D*d,t[2]=l*n+o*d,t[3]=D*n-f*d,t}function Zn(p,A,M){const t=M??new a(4),r=A*.5,o=p[0],f=p[1],l=p[2],D=p[3],d=Math.sin(r),n=Math.cos(r);return t[0]=o*n+f*d,t[1]=f*n-o*d,t[2]=l*n+D*d,t[3]=D*n-l*d,t}function fn(p,A,M,t){const r=t??new a(4),o=p[0],f=p[1],l=p[2],D=p[3];let d=A[0],n=A[1],i=A[2],c=A[3],e=o*d+f*n+l*i+D*c;e<0&&(e=-e,d=-d,n=-n,i=-i,c=-c);let s,u;if(1-e>V){const h=Math.acos(e),w=Math.sin(h);s=Math.sin((1-M)*h)/w,u=Math.sin(M*h)/w}else s=1-M,u=M;return r[0]=s*o+u*d,r[1]=s*f+u*n,r[2]=s*l+u*i,r[3]=s*D+u*c,r}function Dn(p,A){const M=A??new a(4),t=p[0],r=p[1],o=p[2],f=p[3],l=t*t+r*r+o*o+f*f,D=l?1/l:0;return M[0]=-t*D,M[1]=-r*D,M[2]=-o*D,M[3]=f*D,M}function wn(p,A){const M=A??new a(4);return M[0]=-p[0],M[1]=-p[1],M[2]=-p[2],M[3]=p[3],M}function Sn(p,A){const M=A??new a(4),t=p[0]+p[5]+p[10];if(t>0){const r=Math.sqrt(t+1);M[3]=.5*r;const o=.5/r;M[0]=(p[6]-p[9])*o,M[1]=(p[8]-p[2])*o,M[2]=(p[1]-p[4])*o}else{let r=0;p[5]>p[0]&&(r=1),p[10]>p[r*4+r]&&(r=2);const o=(r+1)%3,f=(r+2)%3,l=Math.sqrt(p[r*4+r]-p[o*4+o]-p[f*4+f]+1);M[r]=.5*l;const D=.5/l;M[3]=(p[o*4+f]-p[f*4+o])*D,M[o]=(p[o*4+r]+p[r*4+o])*D,M[f]=(p[f*4+r]+p[r*4+f])*D}return M}function qn(p,A,M,t,r){const o=r??new a(4),f=p*.5,l=A*.5,D=M*.5,d=Math.sin(f),n=Math.cos(f),i=Math.sin(l),c=Math.cos(l),e=Math.sin(D),s=Math.cos(D);switch(t){case"xyz":o[0]=d*c*s+n*i*e,o[1]=n*i*s-d*c*e,o[2]=n*c*e+d*i*s,o[3]=n*c*s-d*i*e;break;case"xzy":o[0]=d*c*s-n*i*e,o[1]=n*i*s-d*c*e,o[2]=n*c*e+d*i*s,o[3]=n*c*s+d*i*e;break;case"yxz":o[0]=d*c*s+n*i*e,o[1]=n*i*s-d*c*e,o[2]=n*c*e-d*i*s,o[3]=n*c*s+d*i*e;break;case"yzx":o[0]=d*c*s+n*i*e,o[1]=n*i*s+d*c*e,o[2]=n*c*e-d*i*s,o[3]=n*c*s-d*i*e;break;case"zxy":o[0]=d*c*s-n*i*e,o[1]=n*i*s+d*c*e,o[2]=n*c*e+d*i*s,o[3]=n*c*s-d*i*e;break;case"zyx":o[0]=d*c*s-n*i*e,o[1]=n*i*s+d*c*e,o[2]=n*c*e-d*i*s,o[3]=n*c*s+d*i*e;break;default:throw new Error(`Unknown rotation order: ${t}`)}return o}function an(p,A){const M=A??new a(4);return M[0]=p[0],M[1]=p[1],M[2]=p[2],M[3]=p[3],M}const R=an;function In(p,A,M){const t=M??new a(4);return t[0]=p[0]+A[0],t[1]=p[1]+A[1],t[2]=p[2]+A[2],t[3]=p[3]+A[3],t}function dn(p,A,M){const t=M??new a(4);return t[0]=p[0]-A[0],t[1]=p[1]-A[1],t[2]=p[2]-A[2],t[3]=p[3]-A[3],t}const pn=dn;function Pn(p,A,M){const t=M??new a(4);return t[0]=p[0]*A,t[1]=p[1]*A,t[2]=p[2]*A,t[3]=p[3]*A,t}const yn=Pn;function xn(p,A,M){const t=M??new a(4);return t[0]=p[0]/A,t[1]=p[1]/A,t[2]=p[2]/A,t[3]=p[3]/A,t}function j(p,A){return p[0]*A[0]+p[1]*A[1]+p[2]*A[2]+p[3]*A[3]}function Fn(p,A,M,t){const r=t??new a(4);return r[0]=p[0]+M*(A[0]-p[0]),r[1]=p[1]+M*(A[1]-p[1]),r[2]=p[2]+M*(A[2]-p[2]),r[3]=p[3]+M*(A[3]-p[3]),r}function C(p){const A=p[0],M=p[1],t=p[2],r=p[3];return Math.sqrt(A*A+M*M+t*t+r*r)}const Xn=C;function B(p){const A=p[0],M=p[1],t=p[2],r=p[3];return A*A+M*M+t*t+r*r}const Z=B;function F(p,A){const M=A??new a(4),t=p[0],r=p[1],o=p[2],f=p[3],l=Math.sqrt(t*t+r*r+o*o+f*f);return l>1e-5?(M[0]=t/l,M[1]=r/l,M[2]=o/l,M[3]=f/l):(M[0]=0,M[1]=0,M[2]=0,M[3]=1),M}function L(p,A){return Math.abs(p[0]-A[0])<V&&Math.abs(p[1]-A[1])<V&&Math.abs(p[2]-A[2])<V&&Math.abs(p[3]-A[3])<V}function nn(p,A){return p[0]===A[0]&&p[1]===A[1]&&p[2]===A[2]&&p[3]===A[3]}function Yn(p){const A=p??new a(4);return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A}const Q=g.create(),On=g.create(),Mn=g.create();function Qn(p,A,M){const t=M??new a(4),r=g.dot(p,A);return r<-.999999?(g.cross(On,p,Q),g.len(Q)<1e-6&&g.cross(Mn,p,Q),g.normalize(Q,Q),en(Q,Math.PI,t),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(g.cross(p,A,Q),t[0]=Q[0],t[1]=Q[1],t[2]=Q[2],t[3]=1+r,F(t,t))}const hn=new a(4),Tn=new a(4);function En(p,A,M,t,r,o){const f=o??new a(4);return fn(p,t,r,hn),fn(A,M,r,Tn),fn(hn,Tn,2*r*(1-r),f),f}return{create:O,fromValues:b,set:ln,fromAxisAngle:en,toAxisAngle:$n,angle:Vn,multiply:un,mul:Ln,rotateX:rn,rotateY:m,rotateZ:Zn,slerp:fn,inverse:Dn,conjugate:wn,fromMat:Sn,fromEuler:qn,copy:an,clone:R,add:In,subtract:dn,sub:pn,mulScalar:Pn,scale:yn,divScalar:xn,dot:j,lerp:Fn,length:C,len:Xn,lengthSq:B,lenSq:Z,normalize:F,equalsApproximately:L,equals:nn,identity:Yn,rotationTo:Qn,sqlerp:En}}const st=new Map;function zt(a){let g=st.get(a);return g||(g=xt(a),st.set(a,g)),g}function gt(a){function g(M,t,r,o){const f=new a(4);return M!==void 0&&(f[0]=M,t!==void 0&&(f[1]=t,r!==void 0&&(f[2]=r,o!==void 0&&(f[3]=o)))),f}const O=g;function b(M,t,r,o,f){const l=f??new a(4);return l[0]=M,l[1]=t,l[2]=r,l[3]=o,l}function ln(M,t){const r=t??new a(4);return r[0]=Math.ceil(M[0]),r[1]=Math.ceil(M[1]),r[2]=Math.ceil(M[2]),r[3]=Math.ceil(M[3]),r}function en(M,t){const r=t??new a(4);return r[0]=Math.floor(M[0]),r[1]=Math.floor(M[1]),r[2]=Math.floor(M[2]),r[3]=Math.floor(M[3]),r}function $n(M,t){const r=t??new a(4);return r[0]=Math.round(M[0]),r[1]=Math.round(M[1]),r[2]=Math.round(M[2]),r[3]=Math.round(M[3]),r}function Vn(M,t=0,r=1,o){const f=o??new a(4);return f[0]=Math.min(r,Math.max(t,M[0])),f[1]=Math.min(r,Math.max(t,M[1])),f[2]=Math.min(r,Math.max(t,M[2])),f[3]=Math.min(r,Math.max(t,M[3])),f}function un(M,t,r){const o=r??new a(4);return o[0]=M[0]+t[0],o[1]=M[1]+t[1],o[2]=M[2]+t[2],o[3]=M[3]+t[3],o}function Ln(M,t,r,o){const f=o??new a(4);return f[0]=M[0]+t[0]*r,f[1]=M[1]+t[1]*r,f[2]=M[2]+t[2]*r,f[3]=M[3]+t[3]*r,f}function rn(M,t,r){const o=r??new a(4);return o[0]=M[0]-t[0],o[1]=M[1]-t[1],o[2]=M[2]-t[2],o[3]=M[3]-t[3],o}const m=rn;function Zn(M,t){return Math.abs(M[0]-t[0])<V&&Math.abs(M[1]-t[1])<V&&Math.abs(M[2]-t[2])<V&&Math.abs(M[3]-t[3])<V}function fn(M,t){return M[0]===t[0]&&M[1]===t[1]&&M[2]===t[2]&&M[3]===t[3]}function Dn(M,t,r,o){const f=o??new a(4);return f[0]=M[0]+r*(t[0]-M[0]),f[1]=M[1]+r*(t[1]-M[1]),f[2]=M[2]+r*(t[2]-M[2]),f[3]=M[3]+r*(t[3]-M[3]),f}function wn(M,t,r,o){const f=o??new a(4);return f[0]=M[0]+r[0]*(t[0]-M[0]),f[1]=M[1]+r[1]*(t[1]-M[1]),f[2]=M[2]+r[2]*(t[2]-M[2]),f[3]=M[3]+r[3]*(t[3]-M[3]),f}function Sn(M,t,r){const o=r??new a(4);return o[0]=Math.max(M[0],t[0]),o[1]=Math.max(M[1],t[1]),o[2]=Math.max(M[2],t[2]),o[3]=Math.max(M[3],t[3]),o}function qn(M,t,r){const o=r??new a(4);return o[0]=Math.min(M[0],t[0]),o[1]=Math.min(M[1],t[1]),o[2]=Math.min(M[2],t[2]),o[3]=Math.min(M[3],t[3]),o}function an(M,t,r){const o=r??new a(4);return o[0]=M[0]*t,o[1]=M[1]*t,o[2]=M[2]*t,o[3]=M[3]*t,o}const R=an;function In(M,t,r){const o=r??new a(4);return o[0]=M[0]/t,o[1]=M[1]/t,o[2]=M[2]/t,o[3]=M[3]/t,o}function dn(M,t){const r=t??new a(4);return r[0]=1/M[0],r[1]=1/M[1],r[2]=1/M[2],r[3]=1/M[3],r}const pn=dn;function Pn(M,t){return M[0]*t[0]+M[1]*t[1]+M[2]*t[2]+M[3]*t[3]}function yn(M){const t=M[0],r=M[1],o=M[2],f=M[3];return Math.sqrt(t*t+r*r+o*o+f*f)}const xn=yn;function j(M){const t=M[0],r=M[1],o=M[2],f=M[3];return t*t+r*r+o*o+f*f}const Fn=j;function C(M,t){const r=M[0]-t[0],o=M[1]-t[1],f=M[2]-t[2],l=M[3]-t[3];return Math.sqrt(r*r+o*o+f*f+l*l)}const Xn=C;function B(M,t){const r=M[0]-t[0],o=M[1]-t[1],f=M[2]-t[2],l=M[3]-t[3];return r*r+o*o+f*f+l*l}const Z=B;function F(M,t){const r=t??new a(4),o=M[0],f=M[1],l=M[2],D=M[3],d=Math.sqrt(o*o+f*f+l*l+D*D);return d>1e-5?(r[0]=o/d,r[1]=f/d,r[2]=l/d,r[3]=D/d):(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function L(M,t){const r=t??new a(4);return r[0]=-M[0],r[1]=-M[1],r[2]=-M[2],r[3]=-M[3],r}function nn(M,t){const r=t??new a(4);return r[0]=M[0],r[1]=M[1],r[2]=M[2],r[3]=M[3],r}const Yn=nn;function Q(M,t,r){const o=r??new a(4);return o[0]=M[0]*t[0],o[1]=M[1]*t[1],o[2]=M[2]*t[2],o[3]=M[3]*t[3],o}const On=Q;function Mn(M,t,r){const o=r??new a(4);return o[0]=M[0]/t[0],o[1]=M[1]/t[1],o[2]=M[2]/t[2],o[3]=M[3]/t[3],o}const Qn=Mn;function hn(M){const t=M??new a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Tn(M,t,r){const o=r??new a(4),f=M[0],l=M[1],D=M[2],d=M[3];return o[0]=t[0]*f+t[4]*l+t[8]*D+t[12]*d,o[1]=t[1]*f+t[5]*l+t[9]*D+t[13]*d,o[2]=t[2]*f+t[6]*l+t[10]*D+t[14]*d,o[3]=t[3]*f+t[7]*l+t[11]*D+t[15]*d,o}function En(M,t,r){const o=r??new a(4);return F(M,o),an(o,t,o)}function p(M,t,r){const o=r??new a(4);return yn(M)>t?En(M,t,o):nn(M,o)}function A(M,t,r){const o=r??new a(4);return Dn(M,t,.5,o)}return{create:g,fromValues:O,set:b,ceil:ln,floor:en,round:$n,clamp:Vn,add:un,addScaled:Ln,subtract:rn,sub:m,equalsApproximately:Zn,equals:fn,lerp:Dn,lerpV:wn,max:Sn,min:qn,mulScalar:an,scale:R,divScalar:In,inverse:dn,invert:pn,dot:Pn,length:yn,len:xn,lengthSq:j,lenSq:Fn,distance:C,dist:Xn,distanceSq:B,distSq:Z,normalize:F,negate:L,copy:nn,clone:Yn,multiply:Q,mul:On,divide:Mn,div:Qn,zero:hn,transformMat4:Tn,setLength:En,truncate:p,midpoint:A}}const ct=new Map;function At(a){let g=ct.get(a);return g||(g=gt(a),ct.set(a,g)),g}function Nn(a,g,O,b,ln,en){return{mat3:dt(a),mat4:yt(g),quat:zt(O),vec2:ot(b),vec3:Kn(ln),vec4:At(en)}}const{mat3:St,mat4:qt,quat:It,vec2:Pt,vec3:Tt,vec4:Et}=Nn(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);Nn(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);Nn(ut,Array,Array,Array,Array,Array);const $t={Clamp:(a,g=0,O=1)=>Math.max(g,Math.min(a,O)),RandomInt:(a,g)=>(Math.random()*(g-a+1)|0)+a,Random:(a=0,g=1)=>Math.random()*(g-a)+a,SmootherStep(a,g=0,O=1){return a<=g?0:a>=O?1:(a=(a-g)/(O-g),a*a*a*(a*(a*6-15)+10))},SmoothStep(a,g=0,O=1){return a<=g?0:a>=O?1:(a=(a-g)/(O-g),a*a*(3-2*a))},EuclideanModulo:_n.euclideanModulo,DegreesToRadians:_n.degToRad,RadiansToDegrees:_n.radToDeg,InverseLerp:_n.inverseLerp,SetEpsilon:_n.setEpsilon,EPSILON:_n.EPSILON,Lerp:_n.lerp,PHI:Math.sqrt(5)*.5+.5,DELTA_UPDATE:1/.06,DELTA_FRAME:1/60,RAD:Math.PI/180,DEG:180/Math.PI,HPI:Math.PI/2,TAU:Math.PI*2,Mat3:St,Mat4:qt,Quat:It,Vec2:Pt,Vec3:Tt,Vec4:Et};export{$t as M,St as a,Pt as b,qt as m,Tt as v};

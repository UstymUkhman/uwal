import{a as e,c as t,d as n,f as r,n as i,o as a,p as o,r as s,v as c,y as l}from"./lib-BnF4evuR.js";var u=``+new URL(`dice-Vcs4qiRq.jpg`,import.meta.url).href,d=`struct VertexOutput{@location(0)textureCoords: vec2f,@builtin(position)position: vec4f};@group(0)@binding(1)var Sampler: sampler;@group(0)@binding(2)var Texture: texture_2d<f32>;@vertex fn cubeVertex(@location(0)position: vec4f,@location(1)textureCoords: vec2f)->VertexOutput {return VertexOutput(textureCoords,GetVertexClipSpace(position));}@fragment fn fragment(@location(0)textureCoords: vec2f)->@location(0)vec4f {return textureSample(Texture,Sampler,textureCoords);}`,f,p,m,h,g=new a;async function _(a){try{p=new(await(o.Renderer(a,`Cube / Cameras`)))}catch(e){alert(e)}let _,v,y,b=1/0,x=new t,S=new p.Pipeline,C=r.Vec3.create(),w=new i,T=new s,E=r.Vec3.create(),D=r.Vec3.create(),O=new e(x,null),k=new e(x,null),A=r.Vec3.create(),j=r.Vec3.create(),M=r.Vec3.create(),N=S.CreateShaderModule([c,d]),{buffer:P,layout:F}=x.CreateTextureCoordsBuffer(S,void 0,void 0,`cubeVertex`);await p.AddPipeline(S,{primitive:S.CreatePrimitiveState(),fragment:S.CreateFragmentState(N),multisample:S.CreateMultisampleState(),depthStencil:S.CreateDepthStencilState(),vertex:S.CreateVertexState(N,[x.GetPositionBufferLayout(S),F],void 0,`cubeVertex`)});let I=new(await(o.Texture(p))),L=await I.CreateImageBitmap(u);m=await I.CopyImageToTexture(L),k.SetRenderPipeline(S,[I.CreateSampler({filter:l.LINEAR}),m.createView()]),O.SetRenderPipeline(S,[I.CreateSampler({filter:l.LINEAR}),m.createView()]),p.CreatePassDescriptor(p.CreateColorAttachment(new n(1657907)),p.CreateDepthStencilAttachment()),S.AddVertexBuffers(P),S.AddVertexBuffers(P),g.Add([O,k]),g.AddCamera(T),g.AddCamera(w);function R(){b=1/0,clearTimeout(y),cancelAnimationFrame(f)}function z(){y=setTimeout(()=>{let e=-_||0,t=r.RandomInt(-2,2)||1/0,n=r.RandomInt(-2,2)||1/0,i=r.RandomInt(-2,2)||1/0;A[0]=Math.PI/t,A[1]=Math.PI/n,A[2]=Math.PI/i,j[0]=Math.PI/t+_,j[1]=!isFinite(t)&&_||Math.abs(t)<2&&e,j[2]=Math.abs(t)===2&&Math.sign(t)*e,j[1]&&=j[1]+Math.PI/n,j[2]&&=j[2]+Math.PI/i,b=Date.now()},1e3)}function B(e){f=requestAnimationFrame(B),e=(Date.now()-b)/1e3;let t=r.SmoothStep(e),n=r.SmootherStep(e*2);.5<=t&&(n=(.5-(t-.5))*2,t===1&&(r.Vec3.copy(A,M),r.Vec3.copy(j,D),b=1/0,z()));{let[e,i,a]=M;C[0]=r.Lerp(e,A[0],t),C[1]=r.Lerp(i,A[1],t),C[2]=r.Lerp(a,A[2],t),O.Transform=[[0,r.Lerp(0,4,n),0],C],O.Visible=!(k.Visible=!1),g.MainCamera=w,p.Render(g,!1)}{let[e,i,a]=E,[o,s,c]=D;C[0]=r.Lerp(o,j[0],t),C[1]=r.Lerp(s,j[1],t),C[2]=r.Lerp(c,j[2],t),k.Transform=[[e,r.Lerp(i,v,n),a],C],k.Visible=!(O.Visible=!1),g.MainCamera=T,p.Render(g)}}h=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-240,p.SetCanvasSize(e,n),w.ResetLocalMatrix(),T.Bottom=n,T.Right=e,T.Near=-100,p.MultisampleTexture=I.CreateMultisampleTexture(),w.AspectRatio=p.AspectRatio,w.Position=[e/360,2,8],T.UpdateViewProjectionMatrix(),w.UpdateViewProjectionMatrix();let i=n-n/3.6,a=(e-360)/1320;_=a*.2+.1,v=i*.39;let o=a+1;O.Scaling=[o,o,o];let s=(1-(n-1e3)/-400)*36+72;k.Scaling=[s*o,s*o,s*o],r.Vec3.set(.2,_,0,D),r.Vec3.set(e-(a*250+100),i,0,E)}R(),z(),f=requestAnimationFrame(B)}),h.observe(document.body)}function v(){o.OnLost=()=>void 0,cancelAnimationFrame(f),h.disconnect(),p.Destroy(),g.Destroy(),o.Destroy(void 0,m)}export{v as destroy,_ as run};
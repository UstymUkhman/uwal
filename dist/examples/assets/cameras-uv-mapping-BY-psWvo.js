import{F as e,I as t,V as n,Z as r,a as i,n as a,q as o,r as s,s as c,u as l,x as u}from"./lib-w9vsR0Iy.js";var d=``+new URL(`dice-Vcs4qiRq.jpg`,import.meta.url).href,f=`@group(0)@binding(1)var Sampler: sampler;@group(0)@binding(2)var Texture: texture_2d<f32>;@fragment fn fragment(cube: MeshVertexUV)->@location(0)vec4f {return textureSample(Texture,Sampler,cube.uv);}`,p,m,h,g,_=new c;async function v(c){try{m=new(await(n.Renderer(c,`Cameras / UV Mapping`)))}catch(e){alert(e)}let v,y,b,x=1/0,S=new m.Pipeline,C=t.Vec3.create(),w=new a,T=new s,E=t.Vec3.create(),D=t.Vec3.create(),O=new l(`Cube`,`uint16`);O.Primitive=u();let k=new i(O,null),A=new i(O,null),j=t.Vec3.create(),M=t.Vec3.create(),N=t.Vec3.create(),P=new(await(n.Texture(m))),F=await P.CreateImageBitmap(d);h=await P.CopyImageToTexture(F);let I=S.CreateShaderModule([o,f]);m.CreatePassDescriptor(m.CreateColorAttachment(new e(1657907))),await m.AddPipeline(S,{primitive:S.CreatePrimitiveState(),multisample:S.CreateMultisampleState(),depthStencil:S.CreateDepthStencilState(),fragment:S.CreateFragmentState(I),vertex:S.CreateVertexState(I,[O.GetPositionBufferLayout(S,`vertexUV`),S.CreateVertexBufferLayout(`uv`,`vertexUV`)],`vertexUV`)}),A.SetRenderPipeline(S,[P.CreateSampler({filter:r.LINEAR}),h.createView()]),k.SetRenderPipeline(S,[P.CreateSampler({filter:r.LINEAR}),h.createView()]),O.AddVertexBuffer(S,new Float32Array([.5,.5,.75,.5,.5,1,.75,1,.25,.5,.5,.5,.25,1,.5,1,0,0,0,.5,.25,0,.25,.5,.5,0,.5,.5,.75,0,.75,.5,0,.5,.25,.5,0,1,.25,1,.25,0,.5,0,.25,.5,.5,.5]),`uv`,`vertexUV`),_.Add([k,A]),_.AddCamera(T),_.AddCamera(w);function L(){x=1/0,clearTimeout(b),cancelAnimationFrame(p)}function R(){b=setTimeout(()=>{let e=-v||0,n=t.RandomInt(-2,2)||1/0,r=t.RandomInt(-2,2)||1/0,i=t.RandomInt(-2,2)||1/0;M[0]=Math.PI/n,M[1]=Math.PI/r,M[2]=Math.PI/i,N[0]=Math.PI/n+v,N[1]=!isFinite(n)&&v||Math.abs(n)<2&&e,N[2]=Math.abs(n)===2&&Math.sign(n)*e,N[1]&&=N[1]+Math.PI/r,N[2]&&=N[2]+Math.PI/i,x=Date.now()},1e3)}function z(e){p=requestAnimationFrame(z),e=(Date.now()-x)/1e3;let n=t.SmoothStep(e),r=t.SmootherStep(e*2);.5<=n&&(r=(.5-(n-.5))*2,n===1&&(t.Vec3.copy(M,j),t.Vec3.copy(N,D),x=1/0,R()));{let[e,i,a]=j;C[0]=t.Lerp(e,M[0],n),C[1]=t.Lerp(i,M[1],n),C[2]=t.Lerp(a,M[2],n),k.Transform=[[0,t.Lerp(0,4,r),0],C],k.Visible=!(A.Visible=!1),_.MainCamera=w,m.Render(_,!1)}{let[e,i,a]=E,[o,s,c]=D;C[0]=t.Lerp(o,N[0],n),C[1]=t.Lerp(s,N[1],n),C[2]=t.Lerp(c,N[2],n),A.Transform=[[e,t.Lerp(i,y,r),a],C],A.Visible=!(k.Visible=!1),_.MainCamera=T,m.Render(_)}}g=new ResizeObserver(e=>{for(let n of e){let{inlineSize:e,blockSize:r}=n.contentBoxSize[0];e=e<=960&&e||e-Math.max(e*.15,240),m.SetCanvasSize(e,r),w.ResetLocalMatrix(),T.Bottom=r,T.Right=e,T.Near=-100,m.MultisampleTexture=P.CreateMultisampleTexture(),w.AspectRatio=m.AspectRatio,w.Position=[e/360,2,8],T.UpdateViewProjectionMatrix(),w.UpdateViewProjectionMatrix();let i=r-r/3.6,a=(e-360)/1320;v=a*.2+.1,y=i*.39;let o=a+1;k.Scaling=[o,o,o];let s=(1-(r-1e3)/-400)*36+72;A.Scaling=[s*o,s*o,s*o],t.Vec3.set(.2,v,0,D),t.Vec3.set(e-(a*250+100),i,0,E)}L(),R(),p=requestAnimationFrame(z)}),g.observe(document.body)}function y(){n.OnLost=()=>void 0,cancelAnimationFrame(p),g.disconnect(),m.Destroy(),_.Destroy(),n.Destroy(void 0,h)}export{y as destroy,v as run};
import{f as e,h as t,i as n,m as r,o as i,p as a,s as o,t as s,u as c}from"./lib-cC2LiaUE.js";var l,u,d,f=new i;async function p(i){try{u=new(await(r.Renderer(i,`2D Shapes`)))}catch(e){alert(e)}let p=new s,m=new e(3349069),h=[],g=[],_=[],v=new o,y=new u.Pipeline,b=y.CreateShaderModule(t);u.CreatePassDescriptor(u.CreateColorAttachment(m)),await u.AddPipeline(y,{fragment:y.CreateFragmentState(b),vertex:y.CreateVertexState(b,v.GetPositionBufferLayout(y))}),v.Destroy();function x(){f.Traverse(e=>e.Destroy?.()),h.splice(0),g.splice(0),_.splice(0),f.Children.splice(0),cancelAnimationFrame(l)}function S(){w(),l=requestAnimationFrame(T)}function C(){return m.rgb=[a.Random(.3),a.Random(.2),a.Random(.4)]}function w(){let[e,t]=u.CanvasSize;for(let r=3;r<=12;r++){let i=r===11&&64||r;for(let r=0;r<2;r++){let s=a.Random(50,100),l=new n(new o({segments:i,radius:s,innerRadius:a.Random(.75,.95)*s*r}),new c(C()));_.push([a.Random(-1),a.Random(-1)]),l.Rotation=a.Random(0,a.TAU),l.Position=[a.Random(s,e-s),a.Random(s,t-s)],l.SetRenderPipeline(y),g.push(a.Random(1,10)),h.push(a.Random(0,.1)),f.Add(l)}}}function T(e,t=0){let[n,r]=u.CanvasSize;l=requestAnimationFrame(T),u.Render(f),f.Traverse(e=>{let{Min:i,Max:a}=e.BoundingBox,[o,s]=e.Position,c=_[t];(i[0]<=0||a[0]>=n)&&(c[0]*=-1,e.Material.Color=C()),(i[1]<=0||a[1]>=r)&&(c[1]*=-1,e.Material.Color=C()),e.Position=[o+c[0]*g[t],s+c[1]*g[t]],e.Rotation+=h[t++]})}d=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-Math.max(e*.15,240),!f.MainCamera&&f.AddCamera(p),u.SetCanvasSize(e,n),p.Size=u.CanvasSize}x(),S()}),d.observe(document.body)}function m(){r.OnLost=()=>void 0,cancelAnimationFrame(l),d.disconnect(),u.Destroy(),r.Destroy(),f.Destroy()}export{m as destroy,p as run};
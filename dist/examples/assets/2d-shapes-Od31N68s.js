import{d as e,f as t,i as n,l as r,m as i,o as a,p as o,s,t as c}from"./lib-CUrWRaeN.js";var l,u,d,f=new a;async function p(a){try{u=new(await(o.Renderer(a,`2D Shapes`)))}catch(e){alert(e)}let p=new c,m=new e(3349069),h=[],g=[],_=[],v=new s,y=new u.Pipeline,b=y.CreateShaderModule(i);u.CreatePassDescriptor(u.CreateColorAttachment(m)),await u.AddPipeline(y,{fragment:y.CreateFragmentState(b),vertex:y.CreateVertexState(b,v.GetPositionBufferLayout(y))}),v.Destroy();function x(){f.Traverse(e=>e.Destroy?.()),h.splice(0),g.splice(0),_.splice(0),f.Children.splice(0),cancelAnimationFrame(l)}function S(){w(),l=requestAnimationFrame(T)}function C(){return m.rgb=[t.Random(.3),t.Random(.2),t.Random(.4)]}function w(){let[e,i]=u.CanvasSize;for(let a=3;a<=12;a++){let o=a===11&&64||a;for(let a=0;a<2;a++){let c=t.Random(50,100),l=new n(new s({segments:o,radius:c,innerRadius:t.Random(.75,.95)*c*a}),new r(C()));_.push([t.Random(-1),t.Random(-1)]),l.Rotation=t.Random(0,t.TAU),l.Position=[t.Random(c,e-c),t.Random(c,i-c)],l.SetRenderPipeline(y),g.push(t.Random(1,10)),h.push(t.Random(0,.1)),f.Add(l)}}}function T(e,t=0){let[n,r]=u.CanvasSize;l=requestAnimationFrame(T),u.Render(f),f.Traverse(e=>{let{Min:i,Max:a}=e.BoundingBox,[o,s]=e.Position,c=_[t];(i[0]<=0||a[0]>=n)&&(c[0]*=-1,e.Material.Color=C()),(i[1]<=0||a[1]>=r)&&(c[1]*=-1,e.Material.Color=C()),e.Position=[o+c[0]*g[t],s+c[1]*g[t]],e.Rotation+=h[t++]})}d=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-240,!f.MainCamera&&f.AddCamera(p),u.SetCanvasSize(e,n),p.Size=u.CanvasSize}x(),S()}),d.observe(document.body)}function m(){o.OnLost=()=>void 0,cancelAnimationFrame(l),d.disconnect(),u.Destroy(),o.Destroy(),f.Destroy()}export{m as destroy,p as run};
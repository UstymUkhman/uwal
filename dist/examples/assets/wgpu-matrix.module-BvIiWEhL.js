function tt(f,P){return class extends f{constructor(...v){super(...v),P(this)}}}const st=tt(Array,f=>f.fill(0));let O=1e-6;function ct(f){function P(n=0,o=0){const t=new f(2);return n!==void 0&&(t[0]=n,o!==void 0&&(t[1]=o)),t}const v=P;function Mn(n,o,t){const s=t??new f(2);return s[0]=n,s[1]=o,s}function Dn(n,o){const t=o??new f(2);return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function hn(n,o){const t=o??new f(2);return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function Fn(n,o){const t=o??new f(2);return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function on(n,o=0,t=1,s){const i=s??new f(2);return i[0]=Math.min(t,Math.max(o,n[0])),i[1]=Math.min(t,Math.max(o,n[1])),i}function In(n,o,t){const s=t??new f(2);return s[0]=n[0]+o[0],s[1]=n[1]+o[1],s}function Zn(n,o,t,s){const i=s??new f(2);return i[0]=n[0]+o[0]*t,i[1]=n[1]+o[1]*t,i}function Pn(n,o){const t=n[0],s=n[1],i=o[0],D=o[1],z=Math.sqrt(t*t+s*s),c=Math.sqrt(i*i+D*D),r=z*c,h=r&&gn(n,o)/r;return Math.acos(h)}function en(n,o,t){const s=t??new f(2);return s[0]=n[0]-o[0],s[1]=n[1]-o[1],s}const Tn=en;function b(n,o){return Math.abs(n[0]-o[0])<O&&Math.abs(n[1]-o[1])<O}function $n(n,o){return n[0]===o[0]&&n[1]===o[1]}function dn(n,o,t,s){const i=s??new f(2);return i[0]=n[0]+t*(o[0]-n[0]),i[1]=n[1]+t*(o[1]-n[1]),i}function pn(n,o,t,s){const i=s??new f(2);return i[0]=n[0]+t[0]*(o[0]-n[0]),i[1]=n[1]+t[1]*(o[1]-n[1]),i}function Qn(n,o,t){const s=t??new f(2);return s[0]=Math.max(n[0],o[0]),s[1]=Math.max(n[1],o[1]),s}function ln(n,o,t){const s=t??new f(2);return s[0]=Math.min(n[0],o[0]),s[1]=Math.min(n[1],o[1]),s}function un(n,o,t){const s=t??new f(2);return s[0]=n[0]*o,s[1]=n[1]*o,s}const Xn=un;function yn(n,o,t){const s=t??new f(2);return s[0]=n[0]/o,s[1]=n[1]/o,s}function xn(n,o){const t=o??new f(2);return t[0]=1/n[0],t[1]=1/n[1],t}const Vn=xn;function zn(n,o,t){const s=t??new f(3),i=n[0]*o[1]-n[1]*o[0];return s[0]=0,s[1]=0,s[2]=i,s}function gn(n,o){return n[0]*o[0]+n[1]*o[1]}function R(n){const o=n[0],t=n[1];return Math.sqrt(o*o+t*t)}const Yn=R;function J(n){const o=n[0],t=n[1];return o*o+t*t}const U=J;function L(n,o){const t=n[0]-o[0],s=n[1]-o[1];return Math.sqrt(t*t+s*s)}const a=L;function S(n,o){const t=n[0]-o[0],s=n[1]-o[1];return t*t+s*s}const p=S;function A(n,o){const t=o??new f(2),s=n[0],i=n[1],D=Math.sqrt(s*s+i*i);return D>1e-5?(t[0]=s/D,t[1]=i/D):(t[0]=0,t[1]=0),t}function Z(n,o){const t=o??new f(2);return t[0]=-n[0],t[1]=-n[1],t}function $(n,o){const t=o??new f(2);return t[0]=n[0],t[1]=n[1],t}const E=$;function H(n,o,t){const s=t??new f(2);return s[0]=n[0]*o[0],s[1]=n[1]*o[1],s}const B=H;function Q(n,o,t){const s=t??new f(2);return s[0]=n[0]/o[0],s[1]=n[1]/o[1],s}const X=Q;function K(n=1,o){const t=o??new f(2),s=Math.random()*2*Math.PI;return t[0]=Math.cos(s)*n,t[1]=Math.sin(s)*n,t}function d(n){const o=n??new f(2);return o[0]=0,o[1]=0,o}function q(n,o,t){const s=t??new f(2),i=n[0],D=n[1];return s[0]=i*o[0]+D*o[4]+o[12],s[1]=i*o[1]+D*o[5]+o[13],s}function e(n,o,t){const s=t??new f(2),i=n[0],D=n[1];return s[0]=o[0]*i+o[4]*D+o[8],s[1]=o[1]*i+o[5]*D+o[9],s}function u(n,o,t,s){const i=s??new f(2),D=n[0]-o[0],z=n[1]-o[1],c=Math.sin(t),r=Math.cos(t);return i[0]=D*r-z*c+o[0],i[1]=D*c+z*r+o[1],i}function w(n,o,t){const s=t??new f(2);return A(n,s),un(s,o,s)}function M(n,o,t){const s=t??new f(2);return R(n)>o?w(n,o,s):$(n,s)}function I(n,o,t){const s=t??new f(2);return dn(n,o,.5,s)}return{create:P,fromValues:v,set:Mn,ceil:Dn,floor:hn,round:Fn,clamp:on,add:In,addScaled:Zn,angle:Pn,subtract:en,sub:Tn,equalsApproximately:b,equals:$n,lerp:dn,lerpV:pn,max:Qn,min:ln,mulScalar:un,scale:Xn,divScalar:yn,inverse:xn,invert:Vn,cross:zn,dot:gn,length:R,len:Yn,lengthSq:J,lenSq:U,distance:L,dist:a,distanceSq:S,distSq:p,normalize:A,negate:Z,copy:$,clone:E,multiply:H,mul:B,divide:Q,div:X,random:K,zero:d,transformMat4:q,transformMat3:e,rotate:u,setLength:w,truncate:M,midpoint:I}}const Rn=new Map;function nt(f){let P=Rn.get(f);return P||(P=ct(f),Rn.set(f,P)),P}function ot(f){const P=nt(f);function v(a,S,p,A,Z,$,E,H,B){const Q=new f(12);return Q[3]=0,Q[7]=0,Q[11]=0,a!==void 0&&(Q[0]=a,S!==void 0&&(Q[1]=S,p!==void 0&&(Q[2]=p,A!==void 0&&(Q[4]=A,Z!==void 0&&(Q[5]=Z,$!==void 0&&(Q[6]=$,E!==void 0&&(Q[8]=E,H!==void 0&&(Q[9]=H,B!==void 0&&(Q[10]=B))))))))),Q}function Mn(a,S,p,A,Z,$,E,H,B,Q){const X=Q??new f(12);return X[0]=a,X[1]=S,X[2]=p,X[3]=0,X[4]=A,X[5]=Z,X[6]=$,X[7]=0,X[8]=E,X[9]=H,X[10]=B,X[11]=0,X}function Dn(a,S){const p=S??new f(12);return p[0]=a[0],p[1]=a[1],p[2]=a[2],p[3]=0,p[4]=a[4],p[5]=a[5],p[6]=a[6],p[7]=0,p[8]=a[8],p[9]=a[9],p[10]=a[10],p[11]=0,p}function hn(a,S){const p=S??new f(12),A=a[0],Z=a[1],$=a[2],E=a[3],H=A+A,B=Z+Z,Q=$+$,X=A*H,K=Z*H,d=Z*B,q=$*H,e=$*B,u=$*Q,w=E*H,M=E*B,I=E*Q;return p[0]=1-d-u,p[1]=K+I,p[2]=q-M,p[3]=0,p[4]=K-I,p[5]=1-X-u,p[6]=e+w,p[7]=0,p[8]=q+M,p[9]=e-w,p[10]=1-X-d,p[11]=0,p}function Fn(a,S){const p=S??new f(12);return p[0]=-a[0],p[1]=-a[1],p[2]=-a[2],p[4]=-a[4],p[5]=-a[5],p[6]=-a[6],p[8]=-a[8],p[9]=-a[9],p[10]=-a[10],p}function on(a,S){const p=S??new f(12);return p[0]=a[0],p[1]=a[1],p[2]=a[2],p[4]=a[4],p[5]=a[5],p[6]=a[6],p[8]=a[8],p[9]=a[9],p[10]=a[10],p}const In=on;function Zn(a,S){return Math.abs(a[0]-S[0])<O&&Math.abs(a[1]-S[1])<O&&Math.abs(a[2]-S[2])<O&&Math.abs(a[4]-S[4])<O&&Math.abs(a[5]-S[5])<O&&Math.abs(a[6]-S[6])<O&&Math.abs(a[8]-S[8])<O&&Math.abs(a[9]-S[9])<O&&Math.abs(a[10]-S[10])<O}function Pn(a,S){return a[0]===S[0]&&a[1]===S[1]&&a[2]===S[2]&&a[4]===S[4]&&a[5]===S[5]&&a[6]===S[6]&&a[8]===S[8]&&a[9]===S[9]&&a[10]===S[10]}function en(a){const S=a??new f(12);return S[0]=1,S[1]=0,S[2]=0,S[4]=0,S[5]=1,S[6]=0,S[8]=0,S[9]=0,S[10]=1,S}function Tn(a,S){const p=S??new f(12);if(p===a){let d;return d=a[1],a[1]=a[4],a[4]=d,d=a[2],a[2]=a[8],a[8]=d,d=a[6],a[6]=a[9],a[9]=d,p}const A=a[0*4+0],Z=a[0*4+1],$=a[0*4+2],E=a[1*4+0],H=a[1*4+1],B=a[1*4+2],Q=a[2*4+0],X=a[2*4+1],K=a[2*4+2];return p[0]=A,p[1]=E,p[2]=Q,p[4]=Z,p[5]=H,p[6]=X,p[8]=$,p[9]=B,p[10]=K,p}function b(a,S){const p=S??new f(12),A=a[0*4+0],Z=a[0*4+1],$=a[0*4+2],E=a[1*4+0],H=a[1*4+1],B=a[1*4+2],Q=a[2*4+0],X=a[2*4+1],K=a[2*4+2],d=K*H-B*X,q=-K*E+B*Q,e=X*E-H*Q,u=1/(A*d+Z*q+$*e);return p[0]=d*u,p[1]=(-K*Z+$*X)*u,p[2]=(B*Z-$*H)*u,p[4]=q*u,p[5]=(K*A-$*Q)*u,p[6]=(-B*A+$*E)*u,p[8]=e*u,p[9]=(-X*A+Z*Q)*u,p[10]=(H*A-Z*E)*u,p}function $n(a){const S=a[0],p=a[0*4+1],A=a[0*4+2],Z=a[1*4+0],$=a[1*4+1],E=a[1*4+2],H=a[2*4+0],B=a[2*4+1],Q=a[2*4+2];return S*($*Q-B*E)-Z*(p*Q-B*A)+H*(p*E-$*A)}const dn=b;function pn(a,S,p){const A=p??new f(12),Z=a[0],$=a[1],E=a[2],H=a[4],B=a[5],Q=a[6],X=a[8],K=a[9],d=a[10],q=S[0],e=S[1],u=S[2],w=S[4],M=S[5],I=S[6],n=S[8],o=S[9],t=S[10];return A[0]=Z*q+H*e+X*u,A[1]=$*q+B*e+K*u,A[2]=E*q+Q*e+d*u,A[4]=Z*w+H*M+X*I,A[5]=$*w+B*M+K*I,A[6]=E*w+Q*M+d*I,A[8]=Z*n+H*o+X*t,A[9]=$*n+B*o+K*t,A[10]=E*n+Q*o+d*t,A}const Qn=pn;function ln(a,S,p){const A=p??en();return a!==A&&(A[0]=a[0],A[1]=a[1],A[2]=a[2],A[4]=a[4],A[5]=a[5],A[6]=a[6]),A[8]=S[0],A[9]=S[1],A[10]=1,A}function un(a,S){const p=S??P.create();return p[0]=a[8],p[1]=a[9],p}function Xn(a,S,p){const A=p??P.create(),Z=S*4;return A[0]=a[Z+0],A[1]=a[Z+1],A}function yn(a,S,p,A){const Z=A===a?a:on(a,A),$=p*4;return Z[$+0]=S[0],Z[$+1]=S[1],Z}function xn(a,S){const p=S??P.create(),A=a[0],Z=a[1],$=a[4],E=a[5];return p[0]=Math.sqrt(A*A+Z*Z),p[1]=Math.sqrt($*$+E*E),p}function Vn(a,S){const p=S??new f(12);return p[0]=1,p[1]=0,p[2]=0,p[4]=0,p[5]=1,p[6]=0,p[8]=a[0],p[9]=a[1],p[10]=1,p}function zn(a,S,p){const A=p??new f(12),Z=S[0],$=S[1],E=a[0],H=a[1],B=a[2],Q=a[1*4+0],X=a[1*4+1],K=a[1*4+2],d=a[2*4+0],q=a[2*4+1],e=a[2*4+2];return a!==A&&(A[0]=E,A[1]=H,A[2]=B,A[4]=Q,A[5]=X,A[6]=K),A[8]=E*Z+Q*$+d,A[9]=H*Z+X*$+q,A[10]=B*Z+K*$+e,A}function gn(a,S){const p=S??new f(12),A=Math.cos(a),Z=Math.sin(a);return p[0]=A,p[1]=Z,p[2]=0,p[4]=-Z,p[5]=A,p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function R(a,S,p){const A=p??new f(12),Z=a[0*4+0],$=a[0*4+1],E=a[0*4+2],H=a[1*4+0],B=a[1*4+1],Q=a[1*4+2],X=Math.cos(S),K=Math.sin(S);return A[0]=X*Z+K*H,A[1]=X*$+K*B,A[2]=X*E+K*Q,A[4]=X*H-K*Z,A[5]=X*B-K*$,A[6]=X*Q-K*E,a!==A&&(A[8]=a[8],A[9]=a[9],A[10]=a[10]),A}function Yn(a,S){const p=S??new f(12);return p[0]=a[0],p[1]=0,p[2]=0,p[4]=0,p[5]=a[1],p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function J(a,S,p){const A=p??new f(12),Z=S[0],$=S[1];return A[0]=Z*a[0*4+0],A[1]=Z*a[0*4+1],A[2]=Z*a[0*4+2],A[4]=$*a[1*4+0],A[5]=$*a[1*4+1],A[6]=$*a[1*4+2],a!==A&&(A[8]=a[8],A[9]=a[9],A[10]=a[10]),A}function U(a,S){const p=S??new f(12);return p[0]=a,p[1]=0,p[2]=0,p[4]=0,p[5]=a,p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function L(a,S,p){const A=p??new f(12);return A[0]=S*a[0*4+0],A[1]=S*a[0*4+1],A[2]=S*a[0*4+2],A[4]=S*a[1*4+0],A[5]=S*a[1*4+1],A[6]=S*a[1*4+2],a!==A&&(A[8]=a[8],A[9]=a[9],A[10]=a[10]),A}return{clone:In,create:v,set:Mn,fromMat4:Dn,fromQuat:hn,negate:Fn,copy:on,equalsApproximately:Zn,equals:Pn,identity:en,transpose:Tn,inverse:b,invert:dn,determinant:$n,mul:Qn,multiply:pn,setTranslation:ln,getTranslation:un,getAxis:Xn,setAxis:yn,getScaling:xn,translation:Vn,translate:zn,rotation:gn,rotate:R,scaling:Yn,scale:J,uniformScaling:U,uniformScale:L}}const kn=new Map;function et(f){let P=kn.get(f);return P||(P=ot(f),kn.set(f,P)),P}function ut(f){function P(c,r,h){const l=new f(3);return c!==void 0&&(l[0]=c,r!==void 0&&(l[1]=r,h!==void 0&&(l[2]=h))),l}const v=P;function Mn(c,r,h,l){const y=l??new f(3);return y[0]=c,y[1]=r,y[2]=h,y}function Dn(c,r){const h=r??new f(3);return h[0]=Math.ceil(c[0]),h[1]=Math.ceil(c[1]),h[2]=Math.ceil(c[2]),h}function hn(c,r){const h=r??new f(3);return h[0]=Math.floor(c[0]),h[1]=Math.floor(c[1]),h[2]=Math.floor(c[2]),h}function Fn(c,r){const h=r??new f(3);return h[0]=Math.round(c[0]),h[1]=Math.round(c[1]),h[2]=Math.round(c[2]),h}function on(c,r=0,h=1,l){const y=l??new f(3);return y[0]=Math.min(h,Math.max(r,c[0])),y[1]=Math.min(h,Math.max(r,c[1])),y[2]=Math.min(h,Math.max(r,c[2])),y}function In(c,r,h){const l=h??new f(3);return l[0]=c[0]+r[0],l[1]=c[1]+r[1],l[2]=c[2]+r[2],l}function Zn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+r[0]*h,y[1]=c[1]+r[1]*h,y[2]=c[2]+r[2]*h,y}function Pn(c,r){const h=c[0],l=c[1],y=c[2],x=r[0],g=r[1],T=r[2],Y=Math.sqrt(h*h+l*l+y*y),V=Math.sqrt(x*x+g*g+T*T),F=Y*V,j=F&&gn(c,r)/F;return Math.acos(j)}function en(c,r,h){const l=h??new f(3);return l[0]=c[0]-r[0],l[1]=c[1]-r[1],l[2]=c[2]-r[2],l}const Tn=en;function b(c,r){return Math.abs(c[0]-r[0])<O&&Math.abs(c[1]-r[1])<O&&Math.abs(c[2]-r[2])<O}function $n(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]}function dn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+h*(r[0]-c[0]),y[1]=c[1]+h*(r[1]-c[1]),y[2]=c[2]+h*(r[2]-c[2]),y}function pn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+h[0]*(r[0]-c[0]),y[1]=c[1]+h[1]*(r[1]-c[1]),y[2]=c[2]+h[2]*(r[2]-c[2]),y}function Qn(c,r,h){const l=h??new f(3);return l[0]=Math.max(c[0],r[0]),l[1]=Math.max(c[1],r[1]),l[2]=Math.max(c[2],r[2]),l}function ln(c,r,h){const l=h??new f(3);return l[0]=Math.min(c[0],r[0]),l[1]=Math.min(c[1],r[1]),l[2]=Math.min(c[2],r[2]),l}function un(c,r,h){const l=h??new f(3);return l[0]=c[0]*r,l[1]=c[1]*r,l[2]=c[2]*r,l}const Xn=un;function yn(c,r,h){const l=h??new f(3);return l[0]=c[0]/r,l[1]=c[1]/r,l[2]=c[2]/r,l}function xn(c,r){const h=r??new f(3);return h[0]=1/c[0],h[1]=1/c[1],h[2]=1/c[2],h}const Vn=xn;function zn(c,r,h){const l=h??new f(3),y=c[2]*r[0]-c[0]*r[2],x=c[0]*r[1]-c[1]*r[0];return l[0]=c[1]*r[2]-c[2]*r[1],l[1]=y,l[2]=x,l}function gn(c,r){return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]}function R(c){const r=c[0],h=c[1],l=c[2];return Math.sqrt(r*r+h*h+l*l)}const Yn=R;function J(c){const r=c[0],h=c[1],l=c[2];return r*r+h*h+l*l}const U=J;function L(c,r){const h=c[0]-r[0],l=c[1]-r[1],y=c[2]-r[2];return Math.sqrt(h*h+l*l+y*y)}const a=L;function S(c,r){const h=c[0]-r[0],l=c[1]-r[1],y=c[2]-r[2];return h*h+l*l+y*y}const p=S;function A(c,r){const h=r??new f(3),l=c[0],y=c[1],x=c[2],g=Math.sqrt(l*l+y*y+x*x);return g>1e-5?(h[0]=l/g,h[1]=y/g,h[2]=x/g):(h[0]=0,h[1]=0,h[2]=0),h}function Z(c,r){const h=r??new f(3);return h[0]=-c[0],h[1]=-c[1],h[2]=-c[2],h}function $(c,r){const h=r??new f(3);return h[0]=c[0],h[1]=c[1],h[2]=c[2],h}const E=$;function H(c,r,h){const l=h??new f(3);return l[0]=c[0]*r[0],l[1]=c[1]*r[1],l[2]=c[2]*r[2],l}const B=H;function Q(c,r,h){const l=h??new f(3);return l[0]=c[0]/r[0],l[1]=c[1]/r[1],l[2]=c[2]/r[2],l}const X=Q;function K(c=1,r){const h=r??new f(3),l=Math.random()*2*Math.PI,y=Math.random()*2-1,x=Math.sqrt(1-y*y)*c;return h[0]=Math.cos(l)*x,h[1]=Math.sin(l)*x,h[2]=y*c,h}function d(c){const r=c??new f(3);return r[0]=0,r[1]=0,r[2]=0,r}function q(c,r,h){const l=h??new f(3),y=c[0],x=c[1],g=c[2],T=r[3]*y+r[7]*x+r[11]*g+r[15]||1;return l[0]=(r[0]*y+r[4]*x+r[8]*g+r[12])/T,l[1]=(r[1]*y+r[5]*x+r[9]*g+r[13])/T,l[2]=(r[2]*y+r[6]*x+r[10]*g+r[14])/T,l}function e(c,r,h){const l=h??new f(3),y=c[0],x=c[1],g=c[2];return l[0]=y*r[0*4+0]+x*r[1*4+0]+g*r[2*4+0],l[1]=y*r[0*4+1]+x*r[1*4+1]+g*r[2*4+1],l[2]=y*r[0*4+2]+x*r[1*4+2]+g*r[2*4+2],l}function u(c,r,h){const l=h??new f(3),y=c[0],x=c[1],g=c[2];return l[0]=y*r[0]+x*r[4]+g*r[8],l[1]=y*r[1]+x*r[5]+g*r[9],l[2]=y*r[2]+x*r[6]+g*r[10],l}function w(c,r,h){const l=h??new f(3),y=r[0],x=r[1],g=r[2],T=r[3]*2,Y=c[0],V=c[1],F=c[2],j=x*F-g*V,G=g*Y-y*F,W=y*V-x*Y;return l[0]=Y+j*T+(x*W-g*G)*2,l[1]=V+G*T+(g*j-y*W)*2,l[2]=F+W*T+(y*G-x*j)*2,l}function M(c,r){const h=r??new f(3);return h[0]=c[12],h[1]=c[13],h[2]=c[14],h}function I(c,r,h){const l=h??new f(3),y=r*4;return l[0]=c[y+0],l[1]=c[y+1],l[2]=c[y+2],l}function n(c,r){const h=r??new f(3),l=c[0],y=c[1],x=c[2],g=c[4],T=c[5],Y=c[6],V=c[8],F=c[9],j=c[10];return h[0]=Math.sqrt(l*l+y*y+x*x),h[1]=Math.sqrt(g*g+T*T+Y*Y),h[2]=Math.sqrt(V*V+F*F+j*j),h}function o(c,r,h,l){const y=l??new f(3),x=[],g=[];return x[0]=c[0]-r[0],x[1]=c[1]-r[1],x[2]=c[2]-r[2],g[0]=x[0],g[1]=x[1]*Math.cos(h)-x[2]*Math.sin(h),g[2]=x[1]*Math.sin(h)+x[2]*Math.cos(h),y[0]=g[0]+r[0],y[1]=g[1]+r[1],y[2]=g[2]+r[2],y}function t(c,r,h,l){const y=l??new f(3),x=[],g=[];return x[0]=c[0]-r[0],x[1]=c[1]-r[1],x[2]=c[2]-r[2],g[0]=x[2]*Math.sin(h)+x[0]*Math.cos(h),g[1]=x[1],g[2]=x[2]*Math.cos(h)-x[0]*Math.sin(h),y[0]=g[0]+r[0],y[1]=g[1]+r[1],y[2]=g[2]+r[2],y}function s(c,r,h,l){const y=l??new f(3),x=[],g=[];return x[0]=c[0]-r[0],x[1]=c[1]-r[1],x[2]=c[2]-r[2],g[0]=x[0]*Math.cos(h)-x[1]*Math.sin(h),g[1]=x[0]*Math.sin(h)+x[1]*Math.cos(h),g[2]=x[2],y[0]=g[0]+r[0],y[1]=g[1]+r[1],y[2]=g[2]+r[2],y}function i(c,r,h){const l=h??new f(3);return A(c,l),un(l,r,l)}function D(c,r,h){const l=h??new f(3);return R(c)>r?i(c,r,l):$(c,l)}function z(c,r,h){const l=h??new f(3);return dn(c,r,.5,l)}return{create:P,fromValues:v,set:Mn,ceil:Dn,floor:hn,round:Fn,clamp:on,add:In,addScaled:Zn,angle:Pn,subtract:en,sub:Tn,equalsApproximately:b,equals:$n,lerp:dn,lerpV:pn,max:Qn,min:ln,mulScalar:un,scale:Xn,divScalar:yn,inverse:xn,invert:Vn,cross:zn,dot:gn,length:R,len:Yn,lengthSq:J,lenSq:U,distance:L,dist:a,distanceSq:S,distSq:p,normalize:A,negate:Z,copy:$,clone:E,multiply:H,mul:B,divide:Q,div:X,random:K,zero:d,transformMat4:q,transformMat4Upper3x3:e,transformMat3:u,transformQuat:w,getTranslation:M,getAxis:I,getScaling:n,rotateX:o,rotateY:t,rotateZ:s,setLength:i,truncate:D,midpoint:z}}const vn=new Map;function Jn(f){let P=vn.get(f);return P||(P=ut(f),vn.set(f,P)),P}function rt(f){const P=Jn(f);function v(n,o,t,s,i,D,z,c,r,h,l,y,x,g,T,Y){const V=new f(16);return n!==void 0&&(V[0]=n,o!==void 0&&(V[1]=o,t!==void 0&&(V[2]=t,s!==void 0&&(V[3]=s,i!==void 0&&(V[4]=i,D!==void 0&&(V[5]=D,z!==void 0&&(V[6]=z,c!==void 0&&(V[7]=c,r!==void 0&&(V[8]=r,h!==void 0&&(V[9]=h,l!==void 0&&(V[10]=l,y!==void 0&&(V[11]=y,x!==void 0&&(V[12]=x,g!==void 0&&(V[13]=g,T!==void 0&&(V[14]=T,Y!==void 0&&(V[15]=Y)))))))))))))))),V}function Mn(n,o,t,s,i,D,z,c,r,h,l,y,x,g,T,Y,V){const F=V??new f(16);return F[0]=n,F[1]=o,F[2]=t,F[3]=s,F[4]=i,F[5]=D,F[6]=z,F[7]=c,F[8]=r,F[9]=h,F[10]=l,F[11]=y,F[12]=x,F[13]=g,F[14]=T,F[15]=Y,F}function Dn(n,o){const t=o??new f(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hn(n,o){const t=o??new f(16),s=n[0],i=n[1],D=n[2],z=n[3],c=s+s,r=i+i,h=D+D,l=s*c,y=i*c,x=i*r,g=D*c,T=D*r,Y=D*h,V=z*c,F=z*r,j=z*h;return t[0]=1-x-Y,t[1]=y+j,t[2]=g-F,t[3]=0,t[4]=y-j,t[5]=1-l-Y,t[6]=T+V,t[7]=0,t[8]=g+F,t[9]=T-V,t[10]=1-l-x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Fn(n,o){const t=o??new f(16);return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t}function on(n,o){const t=o??new f(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}const In=on;function Zn(n,o){return Math.abs(n[0]-o[0])<O&&Math.abs(n[1]-o[1])<O&&Math.abs(n[2]-o[2])<O&&Math.abs(n[3]-o[3])<O&&Math.abs(n[4]-o[4])<O&&Math.abs(n[5]-o[5])<O&&Math.abs(n[6]-o[6])<O&&Math.abs(n[7]-o[7])<O&&Math.abs(n[8]-o[8])<O&&Math.abs(n[9]-o[9])<O&&Math.abs(n[10]-o[10])<O&&Math.abs(n[11]-o[11])<O&&Math.abs(n[12]-o[12])<O&&Math.abs(n[13]-o[13])<O&&Math.abs(n[14]-o[14])<O&&Math.abs(n[15]-o[15])<O}function Pn(n,o){return n[0]===o[0]&&n[1]===o[1]&&n[2]===o[2]&&n[3]===o[3]&&n[4]===o[4]&&n[5]===o[5]&&n[6]===o[6]&&n[7]===o[7]&&n[8]===o[8]&&n[9]===o[9]&&n[10]===o[10]&&n[11]===o[11]&&n[12]===o[12]&&n[13]===o[13]&&n[14]===o[14]&&n[15]===o[15]}function en(n){const o=n??new f(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Tn(n,o){const t=o??new f(16);if(t===n){let G;return G=n[1],n[1]=n[4],n[4]=G,G=n[2],n[2]=n[8],n[8]=G,G=n[3],n[3]=n[12],n[12]=G,G=n[6],n[6]=n[9],n[9]=G,G=n[7],n[7]=n[13],n[13]=G,G=n[11],n[11]=n[14],n[14]=G,t}const s=n[0*4+0],i=n[0*4+1],D=n[0*4+2],z=n[0*4+3],c=n[1*4+0],r=n[1*4+1],h=n[1*4+2],l=n[1*4+3],y=n[2*4+0],x=n[2*4+1],g=n[2*4+2],T=n[2*4+3],Y=n[3*4+0],V=n[3*4+1],F=n[3*4+2],j=n[3*4+3];return t[0]=s,t[1]=c,t[2]=y,t[3]=Y,t[4]=i,t[5]=r,t[6]=x,t[7]=V,t[8]=D,t[9]=h,t[10]=g,t[11]=F,t[12]=z,t[13]=l,t[14]=T,t[15]=j,t}function b(n,o){const t=o??new f(16),s=n[0*4+0],i=n[0*4+1],D=n[0*4+2],z=n[0*4+3],c=n[1*4+0],r=n[1*4+1],h=n[1*4+2],l=n[1*4+3],y=n[2*4+0],x=n[2*4+1],g=n[2*4+2],T=n[2*4+3],Y=n[3*4+0],V=n[3*4+1],F=n[3*4+2],j=n[3*4+3],G=g*j,W=F*T,_=h*j,N=F*l,k=h*T,m=g*l,C=D*j,nn=F*z,tn=D*T,sn=g*z,rn=D*l,fn=h*z,wn=y*V,an=Y*x,An=c*V,qn=Y*r,Sn=c*x,En=y*r,Hn=s*V,On=Y*i,jn=s*x,Ln=y*i,Bn=s*r,Gn=c*i,Un=G*r+N*x+k*V-(W*r+_*x+m*V),Wn=W*i+C*x+sn*V-(G*i+nn*x+tn*V),_n=_*i+nn*r+rn*V-(N*i+C*r+fn*V),Nn=m*i+tn*r+fn*x-(k*i+sn*r+rn*x),cn=1/(s*Un+c*Wn+y*_n+Y*Nn);return t[0]=cn*Un,t[1]=cn*Wn,t[2]=cn*_n,t[3]=cn*Nn,t[4]=cn*(W*c+_*y+m*Y-(G*c+N*y+k*Y)),t[5]=cn*(G*s+nn*y+tn*Y-(W*s+C*y+sn*Y)),t[6]=cn*(N*s+C*c+fn*Y-(_*s+nn*c+rn*Y)),t[7]=cn*(k*s+sn*c+rn*y-(m*s+tn*c+fn*y)),t[8]=cn*(wn*l+qn*T+Sn*j-(an*l+An*T+En*j)),t[9]=cn*(an*z+Hn*T+Ln*j-(wn*z+On*T+jn*j)),t[10]=cn*(An*z+On*l+Bn*j-(qn*z+Hn*l+Gn*j)),t[11]=cn*(En*z+jn*l+Gn*T-(Sn*z+Ln*l+Bn*T)),t[12]=cn*(An*g+En*F+an*h-(Sn*F+wn*h+qn*g)),t[13]=cn*(jn*F+wn*D+On*g-(Hn*g+Ln*F+an*D)),t[14]=cn*(Hn*h+Gn*F+qn*D-(Bn*F+An*D+On*h)),t[15]=cn*(Bn*g+Sn*D+Ln*h-(jn*h+Gn*g+En*D)),t}function $n(n){const o=n[0],t=n[0*4+1],s=n[0*4+2],i=n[0*4+3],D=n[1*4+0],z=n[1*4+1],c=n[1*4+2],r=n[1*4+3],h=n[2*4+0],l=n[2*4+1],y=n[2*4+2],x=n[2*4+3],g=n[3*4+0],T=n[3*4+1],Y=n[3*4+2],V=n[3*4+3],F=y*V,j=Y*x,G=c*V,W=Y*r,_=c*x,N=y*r,k=s*V,m=Y*i,C=s*x,nn=y*i,tn=s*r,sn=c*i,rn=F*z+W*l+_*T-(j*z+G*l+N*T),fn=j*t+k*l+nn*T-(F*t+m*l+C*T),wn=G*t+m*z+tn*T-(W*t+k*z+sn*T),an=N*t+C*z+sn*l-(_*t+nn*z+tn*l);return o*rn+D*fn+h*wn+g*an}const dn=b;function pn(n,o,t){const s=t??new f(16),i=n[0],D=n[1],z=n[2],c=n[3],r=n[4],h=n[5],l=n[6],y=n[7],x=n[8],g=n[9],T=n[10],Y=n[11],V=n[12],F=n[13],j=n[14],G=n[15],W=o[0],_=o[1],N=o[2],k=o[3],m=o[4],C=o[5],nn=o[6],tn=o[7],sn=o[8],rn=o[9],fn=o[10],wn=o[11],an=o[12],An=o[13],qn=o[14],Sn=o[15];return s[0]=i*W+r*_+x*N+V*k,s[1]=D*W+h*_+g*N+F*k,s[2]=z*W+l*_+T*N+j*k,s[3]=c*W+y*_+Y*N+G*k,s[4]=i*m+r*C+x*nn+V*tn,s[5]=D*m+h*C+g*nn+F*tn,s[6]=z*m+l*C+T*nn+j*tn,s[7]=c*m+y*C+Y*nn+G*tn,s[8]=i*sn+r*rn+x*fn+V*wn,s[9]=D*sn+h*rn+g*fn+F*wn,s[10]=z*sn+l*rn+T*fn+j*wn,s[11]=c*sn+y*rn+Y*fn+G*wn,s[12]=i*an+r*An+x*qn+V*Sn,s[13]=D*an+h*An+g*qn+F*Sn,s[14]=z*an+l*An+T*qn+j*Sn,s[15]=c*an+y*An+Y*qn+G*Sn,s}const Qn=pn;function ln(n,o,t){const s=t??en();return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11]),s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}function un(n,o){const t=o??P.create();return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Xn(n,o,t){const s=t??P.create(),i=o*4;return s[0]=n[i+0],s[1]=n[i+1],s[2]=n[i+2],s}function yn(n,o,t,s){const i=s===n?s:on(n,s),D=t*4;return i[D+0]=o[0],i[D+1]=o[1],i[D+2]=o[2],i}function xn(n,o){const t=o??P.create(),s=n[0],i=n[1],D=n[2],z=n[4],c=n[5],r=n[6],h=n[8],l=n[9],y=n[10];return t[0]=Math.sqrt(s*s+i*i+D*D),t[1]=Math.sqrt(z*z+c*c+r*r),t[2]=Math.sqrt(h*h+l*l+y*y),t}function Vn(n,o,t,s,i){const D=i??new f(16),z=Math.tan(Math.PI*.5-.5*n);if(D[0]=z/o,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=z,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,Number.isFinite(s)){const c=1/(t-s);D[10]=s*c,D[14]=s*t*c}else D[10]=-1,D[14]=-t;return D}function zn(n,o,t,s=1/0,i){const D=i??new f(16),z=1/Math.tan(n*.5);if(D[0]=z/o,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=z,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,s===1/0)D[10]=0,D[14]=t;else{const c=1/(s-t);D[10]=t*c,D[14]=s*t*c}return D}function gn(n,o,t,s,i,D,z){const c=z??new f(16);return c[0]=2/(o-n),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2/(s-t),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1/(i-D),c[11]=0,c[12]=(o+n)/(n-o),c[13]=(s+t)/(t-s),c[14]=i/(i-D),c[15]=1,c}function R(n,o,t,s,i,D,z){const c=z??new f(16),r=o-n,h=s-t,l=i-D;return c[0]=2*i/r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*i/h,c[6]=0,c[7]=0,c[8]=(n+o)/r,c[9]=(s+t)/h,c[10]=D/l,c[11]=-1,c[12]=0,c[13]=0,c[14]=i*D/l,c[15]=0,c}function Yn(n,o,t,s,i,D=1/0,z){const c=z??new f(16),r=o-n,h=s-t;if(c[0]=2*i/r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*i/h,c[6]=0,c[7]=0,c[8]=(n+o)/r,c[9]=(s+t)/h,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,D===1/0)c[10]=0,c[14]=i;else{const l=1/(D-i);c[10]=i*l,c[14]=D*i*l}return c}const J=P.create(),U=P.create(),L=P.create();function a(n,o,t,s){const i=s??new f(16);return P.normalize(P.subtract(o,n,L),L),P.normalize(P.cross(t,L,J),J),P.normalize(P.cross(L,J,U),U),i[0]=J[0],i[1]=J[1],i[2]=J[2],i[3]=0,i[4]=U[0],i[5]=U[1],i[6]=U[2],i[7]=0,i[8]=L[0],i[9]=L[1],i[10]=L[2],i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function S(n,o,t,s){const i=s??new f(16);return P.normalize(P.subtract(n,o,L),L),P.normalize(P.cross(t,L,J),J),P.normalize(P.cross(L,J,U),U),i[0]=J[0],i[1]=J[1],i[2]=J[2],i[3]=0,i[4]=U[0],i[5]=U[1],i[6]=U[2],i[7]=0,i[8]=L[0],i[9]=L[1],i[10]=L[2],i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function p(n,o,t,s){const i=s??new f(16);return P.normalize(P.subtract(n,o,L),L),P.normalize(P.cross(t,L,J),J),P.normalize(P.cross(L,J,U),U),i[0]=J[0],i[1]=U[0],i[2]=L[0],i[3]=0,i[4]=J[1],i[5]=U[1],i[6]=L[1],i[7]=0,i[8]=J[2],i[9]=U[2],i[10]=L[2],i[11]=0,i[12]=-(J[0]*n[0]+J[1]*n[1]+J[2]*n[2]),i[13]=-(U[0]*n[0]+U[1]*n[1]+U[2]*n[2]),i[14]=-(L[0]*n[0]+L[1]*n[1]+L[2]*n[2]),i[15]=1,i}function A(n,o){const t=o??new f(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Z(n,o,t){const s=t??new f(16),i=o[0],D=o[1],z=o[2],c=n[0],r=n[1],h=n[2],l=n[3],y=n[1*4+0],x=n[1*4+1],g=n[1*4+2],T=n[1*4+3],Y=n[2*4+0],V=n[2*4+1],F=n[2*4+2],j=n[2*4+3],G=n[3*4+0],W=n[3*4+1],_=n[3*4+2],N=n[3*4+3];return n!==s&&(s[0]=c,s[1]=r,s[2]=h,s[3]=l,s[4]=y,s[5]=x,s[6]=g,s[7]=T,s[8]=Y,s[9]=V,s[10]=F,s[11]=j),s[12]=c*i+y*D+Y*z+G,s[13]=r*i+x*D+V*z+W,s[14]=h*i+g*D+F*z+_,s[15]=l*i+T*D+j*z+N,s}function $(n,o){const t=o??new f(16),s=Math.cos(n),i=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(n,o,t){const s=t??new f(16),i=n[4],D=n[5],z=n[6],c=n[7],r=n[8],h=n[9],l=n[10],y=n[11],x=Math.cos(o),g=Math.sin(o);return s[4]=x*i+g*r,s[5]=x*D+g*h,s[6]=x*z+g*l,s[7]=x*c+g*y,s[8]=x*r-g*i,s[9]=x*h-g*D,s[10]=x*l-g*z,s[11]=x*y-g*c,n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function H(n,o){const t=o??new f(16),s=Math.cos(n),i=Math.sin(n);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function B(n,o,t){const s=t??new f(16),i=n[0*4+0],D=n[0*4+1],z=n[0*4+2],c=n[0*4+3],r=n[2*4+0],h=n[2*4+1],l=n[2*4+2],y=n[2*4+3],x=Math.cos(o),g=Math.sin(o);return s[0]=x*i-g*r,s[1]=x*D-g*h,s[2]=x*z-g*l,s[3]=x*c-g*y,s[8]=x*r+g*i,s[9]=x*h+g*D,s[10]=x*l+g*z,s[11]=x*y+g*c,n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function Q(n,o){const t=o??new f(16),s=Math.cos(n),i=Math.sin(n);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X(n,o,t){const s=t??new f(16),i=n[0*4+0],D=n[0*4+1],z=n[0*4+2],c=n[0*4+3],r=n[1*4+0],h=n[1*4+1],l=n[1*4+2],y=n[1*4+3],x=Math.cos(o),g=Math.sin(o);return s[0]=x*i+g*r,s[1]=x*D+g*h,s[2]=x*z+g*l,s[3]=x*c+g*y,s[4]=x*r-g*i,s[5]=x*h-g*D,s[6]=x*l-g*z,s[7]=x*y-g*c,n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function K(n,o,t){const s=t??new f(16);let i=n[0],D=n[1],z=n[2];const c=Math.sqrt(i*i+D*D+z*z);i/=c,D/=c,z/=c;const r=i*i,h=D*D,l=z*z,y=Math.cos(o),x=Math.sin(o),g=1-y;return s[0]=r+(1-r)*y,s[1]=i*D*g+z*x,s[2]=i*z*g-D*x,s[3]=0,s[4]=i*D*g-z*x,s[5]=h+(1-h)*y,s[6]=D*z*g+i*x,s[7]=0,s[8]=i*z*g+D*x,s[9]=D*z*g-i*x,s[10]=l+(1-l)*y,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}const d=K;function q(n,o,t,s){const i=s??new f(16);let D=o[0],z=o[1],c=o[2];const r=Math.sqrt(D*D+z*z+c*c);D/=r,z/=r,c/=r;const h=D*D,l=z*z,y=c*c,x=Math.cos(t),g=Math.sin(t),T=1-x,Y=h+(1-h)*x,V=D*z*T+c*g,F=D*c*T-z*g,j=D*z*T-c*g,G=l+(1-l)*x,W=z*c*T+D*g,_=D*c*T+z*g,N=z*c*T-D*g,k=y+(1-y)*x,m=n[0],C=n[1],nn=n[2],tn=n[3],sn=n[4],rn=n[5],fn=n[6],wn=n[7],an=n[8],An=n[9],qn=n[10],Sn=n[11];return i[0]=Y*m+V*sn+F*an,i[1]=Y*C+V*rn+F*An,i[2]=Y*nn+V*fn+F*qn,i[3]=Y*tn+V*wn+F*Sn,i[4]=j*m+G*sn+W*an,i[5]=j*C+G*rn+W*An,i[6]=j*nn+G*fn+W*qn,i[7]=j*tn+G*wn+W*Sn,i[8]=_*m+N*sn+k*an,i[9]=_*C+N*rn+k*An,i[10]=_*nn+N*fn+k*qn,i[11]=_*tn+N*wn+k*Sn,n!==i&&(i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i}const e=q;function u(n,o){const t=o??new f(16);return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(n,o,t){const s=t??new f(16),i=o[0],D=o[1],z=o[2];return s[0]=i*n[0*4+0],s[1]=i*n[0*4+1],s[2]=i*n[0*4+2],s[3]=i*n[0*4+3],s[4]=D*n[1*4+0],s[5]=D*n[1*4+1],s[6]=D*n[1*4+2],s[7]=D*n[1*4+3],s[8]=z*n[2*4+0],s[9]=z*n[2*4+1],s[10]=z*n[2*4+2],s[11]=z*n[2*4+3],n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function M(n,o){const t=o??new f(16);return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(n,o,t){const s=t??new f(16);return s[0]=o*n[0*4+0],s[1]=o*n[0*4+1],s[2]=o*n[0*4+2],s[3]=o*n[0*4+3],s[4]=o*n[1*4+0],s[5]=o*n[1*4+1],s[6]=o*n[1*4+2],s[7]=o*n[1*4+3],s[8]=o*n[2*4+0],s[9]=o*n[2*4+1],s[10]=o*n[2*4+2],s[11]=o*n[2*4+3],n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}return{create:v,set:Mn,fromMat3:Dn,fromQuat:hn,negate:Fn,copy:on,clone:In,equalsApproximately:Zn,equals:Pn,identity:en,transpose:Tn,inverse:b,determinant:$n,invert:dn,multiply:pn,mul:Qn,setTranslation:ln,getTranslation:un,getAxis:Xn,setAxis:yn,getScaling:xn,perspective:Vn,perspectiveReverseZ:zn,ortho:gn,frustum:R,frustumReverseZ:Yn,aim:a,cameraAim:S,lookAt:p,translation:A,translate:Z,rotationX:$,rotateX:E,rotationY:H,rotateY:B,rotationZ:Q,rotateZ:X,axisRotation:K,rotation:d,axisRotate:q,rotate:e,scaling:u,scale:w,uniformScaling:M,uniformScale:I}}const bn=new Map;function it(f){let P=bn.get(f);return P||(P=rt(f),bn.set(f,P)),P}function ft(f){const P=Jn(f);function v(d,q,e,u){const w=new f(4);return d!==void 0&&(w[0]=d,q!==void 0&&(w[1]=q,e!==void 0&&(w[2]=e,u!==void 0&&(w[3]=u)))),w}const Mn=v;function Dn(d,q,e,u,w){const M=w??new f(4);return M[0]=d,M[1]=q,M[2]=e,M[3]=u,M}function hn(d,q,e){const u=e??new f(4),w=q*.5,M=Math.sin(w);return u[0]=M*d[0],u[1]=M*d[1],u[2]=M*d[2],u[3]=Math.cos(w),u}function Fn(d,q){const e=q??P.create(3),u=Math.acos(d[3])*2,w=Math.sin(u*.5);return w>O?(e[0]=d[0]/w,e[1]=d[1]/w,e[2]=d[2]/w):(e[0]=1,e[1]=0,e[2]=0),{angle:u,axis:e}}function on(d,q){const e=R(d,q);return Math.acos(2*e*e-1)}function In(d,q,e){const u=e??new f(4),w=d[0],M=d[1],I=d[2],n=d[3],o=q[0],t=q[1],s=q[2],i=q[3];return u[0]=w*i+n*o+M*s-I*t,u[1]=M*i+n*t+I*o-w*s,u[2]=I*i+n*s+w*t-M*o,u[3]=n*i-w*o-M*t-I*s,u}const Zn=In;function Pn(d,q,e){const u=e??new f(4),w=q*.5,M=d[0],I=d[1],n=d[2],o=d[3],t=Math.sin(w),s=Math.cos(w);return u[0]=M*s+o*t,u[1]=I*s+n*t,u[2]=n*s-I*t,u[3]=o*s-M*t,u}function en(d,q,e){const u=e??new f(4),w=q*.5,M=d[0],I=d[1],n=d[2],o=d[3],t=Math.sin(w),s=Math.cos(w);return u[0]=M*s-n*t,u[1]=I*s+o*t,u[2]=n*s+M*t,u[3]=o*s-I*t,u}function Tn(d,q,e){const u=e??new f(4),w=q*.5,M=d[0],I=d[1],n=d[2],o=d[3],t=Math.sin(w),s=Math.cos(w);return u[0]=M*s+I*t,u[1]=I*s-M*t,u[2]=n*s+o*t,u[3]=o*s-n*t,u}function b(d,q,e,u){const w=u??new f(4),M=d[0],I=d[1],n=d[2],o=d[3];let t=q[0],s=q[1],i=q[2],D=q[3],z=M*t+I*s+n*i+o*D;z<0&&(z=-z,t=-t,s=-s,i=-i,D=-D);let c,r;if(1-z>O){const h=Math.acos(z),l=Math.sin(h);c=Math.sin((1-e)*h)/l,r=Math.sin(e*h)/l}else c=1-e,r=e;return w[0]=c*M+r*t,w[1]=c*I+r*s,w[2]=c*n+r*i,w[3]=c*o+r*D,w}function $n(d,q){const e=q??new f(4),u=d[0],w=d[1],M=d[2],I=d[3],n=u*u+w*w+M*M+I*I,o=n?1/n:0;return e[0]=-u*o,e[1]=-w*o,e[2]=-M*o,e[3]=I*o,e}function dn(d,q){const e=q??new f(4);return e[0]=-d[0],e[1]=-d[1],e[2]=-d[2],e[3]=d[3],e}function pn(d,q){const e=q??new f(4),u=d[0]+d[5]+d[10];if(u>0){const w=Math.sqrt(u+1);e[3]=.5*w;const M=.5/w;e[0]=(d[6]-d[9])*M,e[1]=(d[8]-d[2])*M,e[2]=(d[1]-d[4])*M}else{let w=0;d[5]>d[0]&&(w=1),d[10]>d[w*4+w]&&(w=2);const M=(w+1)%3,I=(w+2)%3,n=Math.sqrt(d[w*4+w]-d[M*4+M]-d[I*4+I]+1);e[w]=.5*n;const o=.5/n;e[3]=(d[M*4+I]-d[I*4+M])*o,e[M]=(d[M*4+w]+d[w*4+M])*o,e[I]=(d[I*4+w]+d[w*4+I])*o}return e}function Qn(d,q,e,u,w){const M=w??new f(4),I=d*.5,n=q*.5,o=e*.5,t=Math.sin(I),s=Math.cos(I),i=Math.sin(n),D=Math.cos(n),z=Math.sin(o),c=Math.cos(o);switch(u){case"xyz":M[0]=t*D*c+s*i*z,M[1]=s*i*c-t*D*z,M[2]=s*D*z+t*i*c,M[3]=s*D*c-t*i*z;break;case"xzy":M[0]=t*D*c-s*i*z,M[1]=s*i*c-t*D*z,M[2]=s*D*z+t*i*c,M[3]=s*D*c+t*i*z;break;case"yxz":M[0]=t*D*c+s*i*z,M[1]=s*i*c-t*D*z,M[2]=s*D*z-t*i*c,M[3]=s*D*c+t*i*z;break;case"yzx":M[0]=t*D*c+s*i*z,M[1]=s*i*c+t*D*z,M[2]=s*D*z-t*i*c,M[3]=s*D*c-t*i*z;break;case"zxy":M[0]=t*D*c-s*i*z,M[1]=s*i*c+t*D*z,M[2]=s*D*z+t*i*c,M[3]=s*D*c-t*i*z;break;case"zyx":M[0]=t*D*c-s*i*z,M[1]=s*i*c+t*D*z,M[2]=s*D*z-t*i*c,M[3]=s*D*c+t*i*z;break;default:throw new Error(`Unknown rotation order: ${u}`)}return M}function ln(d,q){const e=q??new f(4);return e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3],e}const un=ln;function Xn(d,q,e){const u=e??new f(4);return u[0]=d[0]+q[0],u[1]=d[1]+q[1],u[2]=d[2]+q[2],u[3]=d[3]+q[3],u}function yn(d,q,e){const u=e??new f(4);return u[0]=d[0]-q[0],u[1]=d[1]-q[1],u[2]=d[2]-q[2],u[3]=d[3]-q[3],u}const xn=yn;function Vn(d,q,e){const u=e??new f(4);return u[0]=d[0]*q,u[1]=d[1]*q,u[2]=d[2]*q,u[3]=d[3]*q,u}const zn=Vn;function gn(d,q,e){const u=e??new f(4);return u[0]=d[0]/q,u[1]=d[1]/q,u[2]=d[2]/q,u[3]=d[3]/q,u}function R(d,q){return d[0]*q[0]+d[1]*q[1]+d[2]*q[2]+d[3]*q[3]}function Yn(d,q,e,u){const w=u??new f(4);return w[0]=d[0]+e*(q[0]-d[0]),w[1]=d[1]+e*(q[1]-d[1]),w[2]=d[2]+e*(q[2]-d[2]),w[3]=d[3]+e*(q[3]-d[3]),w}function J(d){const q=d[0],e=d[1],u=d[2],w=d[3];return Math.sqrt(q*q+e*e+u*u+w*w)}const U=J;function L(d){const q=d[0],e=d[1],u=d[2],w=d[3];return q*q+e*e+u*u+w*w}const a=L;function S(d,q){const e=q??new f(4),u=d[0],w=d[1],M=d[2],I=d[3],n=Math.sqrt(u*u+w*w+M*M+I*I);return n>1e-5?(e[0]=u/n,e[1]=w/n,e[2]=M/n,e[3]=I/n):(e[0]=0,e[1]=0,e[2]=0,e[3]=1),e}function p(d,q){return Math.abs(d[0]-q[0])<O&&Math.abs(d[1]-q[1])<O&&Math.abs(d[2]-q[2])<O&&Math.abs(d[3]-q[3])<O}function A(d,q){return d[0]===q[0]&&d[1]===q[1]&&d[2]===q[2]&&d[3]===q[3]}function Z(d){const q=d??new f(4);return q[0]=0,q[1]=0,q[2]=0,q[3]=1,q}const $=P.create(),E=P.create(),H=P.create();function B(d,q,e){const u=e??new f(4),w=P.dot(d,q);return w<-.999999?(P.cross(E,d,$),P.len($)<1e-6&&P.cross(H,d,$),P.normalize($,$),hn($,Math.PI,u),u):w>.999999?(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u):(P.cross(d,q,$),u[0]=$[0],u[1]=$[1],u[2]=$[2],u[3]=1+w,S(u,u))}const Q=new f(4),X=new f(4);function K(d,q,e,u,w,M){const I=M??new f(4);return b(d,u,w,Q),b(q,e,w,X),b(Q,X,2*w*(1-w),I),I}return{create:v,fromValues:Mn,set:Dn,fromAxisAngle:hn,toAxisAngle:Fn,angle:on,multiply:In,mul:Zn,rotateX:Pn,rotateY:en,rotateZ:Tn,slerp:b,inverse:$n,conjugate:dn,fromMat:pn,fromEuler:Qn,copy:ln,clone:un,add:Xn,subtract:yn,sub:xn,mulScalar:Vn,scale:zn,divScalar:gn,dot:R,lerp:Yn,length:J,len:U,lengthSq:L,lenSq:a,normalize:S,equalsApproximately:p,equals:A,identity:Z,rotationTo:B,sqlerp:K}}const mn=new Map;function wt(f){let P=mn.get(f);return P||(P=ft(f),mn.set(f,P)),P}function at(f){function P(e,u,w,M){const I=new f(4);return e!==void 0&&(I[0]=e,u!==void 0&&(I[1]=u,w!==void 0&&(I[2]=w,M!==void 0&&(I[3]=M)))),I}const v=P;function Mn(e,u,w,M,I){const n=I??new f(4);return n[0]=e,n[1]=u,n[2]=w,n[3]=M,n}function Dn(e,u){const w=u??new f(4);return w[0]=Math.ceil(e[0]),w[1]=Math.ceil(e[1]),w[2]=Math.ceil(e[2]),w[3]=Math.ceil(e[3]),w}function hn(e,u){const w=u??new f(4);return w[0]=Math.floor(e[0]),w[1]=Math.floor(e[1]),w[2]=Math.floor(e[2]),w[3]=Math.floor(e[3]),w}function Fn(e,u){const w=u??new f(4);return w[0]=Math.round(e[0]),w[1]=Math.round(e[1]),w[2]=Math.round(e[2]),w[3]=Math.round(e[3]),w}function on(e,u=0,w=1,M){const I=M??new f(4);return I[0]=Math.min(w,Math.max(u,e[0])),I[1]=Math.min(w,Math.max(u,e[1])),I[2]=Math.min(w,Math.max(u,e[2])),I[3]=Math.min(w,Math.max(u,e[3])),I}function In(e,u,w){const M=w??new f(4);return M[0]=e[0]+u[0],M[1]=e[1]+u[1],M[2]=e[2]+u[2],M[3]=e[3]+u[3],M}function Zn(e,u,w,M){const I=M??new f(4);return I[0]=e[0]+u[0]*w,I[1]=e[1]+u[1]*w,I[2]=e[2]+u[2]*w,I[3]=e[3]+u[3]*w,I}function Pn(e,u,w){const M=w??new f(4);return M[0]=e[0]-u[0],M[1]=e[1]-u[1],M[2]=e[2]-u[2],M[3]=e[3]-u[3],M}const en=Pn;function Tn(e,u){return Math.abs(e[0]-u[0])<O&&Math.abs(e[1]-u[1])<O&&Math.abs(e[2]-u[2])<O&&Math.abs(e[3]-u[3])<O}function b(e,u){return e[0]===u[0]&&e[1]===u[1]&&e[2]===u[2]&&e[3]===u[3]}function $n(e,u,w,M){const I=M??new f(4);return I[0]=e[0]+w*(u[0]-e[0]),I[1]=e[1]+w*(u[1]-e[1]),I[2]=e[2]+w*(u[2]-e[2]),I[3]=e[3]+w*(u[3]-e[3]),I}function dn(e,u,w,M){const I=M??new f(4);return I[0]=e[0]+w[0]*(u[0]-e[0]),I[1]=e[1]+w[1]*(u[1]-e[1]),I[2]=e[2]+w[2]*(u[2]-e[2]),I[3]=e[3]+w[3]*(u[3]-e[3]),I}function pn(e,u,w){const M=w??new f(4);return M[0]=Math.max(e[0],u[0]),M[1]=Math.max(e[1],u[1]),M[2]=Math.max(e[2],u[2]),M[3]=Math.max(e[3],u[3]),M}function Qn(e,u,w){const M=w??new f(4);return M[0]=Math.min(e[0],u[0]),M[1]=Math.min(e[1],u[1]),M[2]=Math.min(e[2],u[2]),M[3]=Math.min(e[3],u[3]),M}function ln(e,u,w){const M=w??new f(4);return M[0]=e[0]*u,M[1]=e[1]*u,M[2]=e[2]*u,M[3]=e[3]*u,M}const un=ln;function Xn(e,u,w){const M=w??new f(4);return M[0]=e[0]/u,M[1]=e[1]/u,M[2]=e[2]/u,M[3]=e[3]/u,M}function yn(e,u){const w=u??new f(4);return w[0]=1/e[0],w[1]=1/e[1],w[2]=1/e[2],w[3]=1/e[3],w}const xn=yn;function Vn(e,u){return e[0]*u[0]+e[1]*u[1]+e[2]*u[2]+e[3]*u[3]}function zn(e){const u=e[0],w=e[1],M=e[2],I=e[3];return Math.sqrt(u*u+w*w+M*M+I*I)}const gn=zn;function R(e){const u=e[0],w=e[1],M=e[2],I=e[3];return u*u+w*w+M*M+I*I}const Yn=R;function J(e,u){const w=e[0]-u[0],M=e[1]-u[1],I=e[2]-u[2],n=e[3]-u[3];return Math.sqrt(w*w+M*M+I*I+n*n)}const U=J;function L(e,u){const w=e[0]-u[0],M=e[1]-u[1],I=e[2]-u[2],n=e[3]-u[3];return w*w+M*M+I*I+n*n}const a=L;function S(e,u){const w=u??new f(4),M=e[0],I=e[1],n=e[2],o=e[3],t=Math.sqrt(M*M+I*I+n*n+o*o);return t>1e-5?(w[0]=M/t,w[1]=I/t,w[2]=n/t,w[3]=o/t):(w[0]=0,w[1]=0,w[2]=0,w[3]=0),w}function p(e,u){const w=u??new f(4);return w[0]=-e[0],w[1]=-e[1],w[2]=-e[2],w[3]=-e[3],w}function A(e,u){const w=u??new f(4);return w[0]=e[0],w[1]=e[1],w[2]=e[2],w[3]=e[3],w}const Z=A;function $(e,u,w){const M=w??new f(4);return M[0]=e[0]*u[0],M[1]=e[1]*u[1],M[2]=e[2]*u[2],M[3]=e[3]*u[3],M}const E=$;function H(e,u,w){const M=w??new f(4);return M[0]=e[0]/u[0],M[1]=e[1]/u[1],M[2]=e[2]/u[2],M[3]=e[3]/u[3],M}const B=H;function Q(e){const u=e??new f(4);return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u}function X(e,u,w){const M=w??new f(4),I=e[0],n=e[1],o=e[2],t=e[3];return M[0]=u[0]*I+u[4]*n+u[8]*o+u[12]*t,M[1]=u[1]*I+u[5]*n+u[9]*o+u[13]*t,M[2]=u[2]*I+u[6]*n+u[10]*o+u[14]*t,M[3]=u[3]*I+u[7]*n+u[11]*o+u[15]*t,M}function K(e,u,w){const M=w??new f(4);return S(e,M),ln(M,u,M)}function d(e,u,w){const M=w??new f(4);return zn(e)>u?K(e,u,M):A(e,M)}function q(e,u,w){const M=w??new f(4);return $n(e,u,.5,M)}return{create:P,fromValues:v,set:Mn,ceil:Dn,floor:hn,round:Fn,clamp:on,add:In,addScaled:Zn,subtract:Pn,sub:en,equalsApproximately:Tn,equals:b,lerp:$n,lerpV:dn,max:pn,min:Qn,mulScalar:ln,scale:un,divScalar:Xn,inverse:yn,invert:xn,dot:Vn,length:zn,len:gn,lengthSq:R,lenSq:Yn,distance:J,dist:U,distanceSq:L,distSq:a,normalize:S,negate:p,copy:A,clone:Z,multiply:$,mul:E,divide:H,div:B,zero:Q,transformMat4:X,setLength:K,truncate:d,midpoint:q}}const Cn=new Map;function ht(f){let P=Cn.get(f);return P||(P=at(f),Cn.set(f,P)),P}function Kn(f,P,v,Mn,Dn,hn){return{mat4:it(f),mat3:et(P),quat:wt(v),vec2:nt(Mn),vec3:Jn(Dn),vec4:ht(hn)}}const{mat4:lt,mat3:Mt,quat:Dt,vec2:dt,vec3:pt,vec4:yt}=Kn(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);Kn(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);Kn(st,Array,Array,Array,Array,Array);export{Mt as m,dt as v};

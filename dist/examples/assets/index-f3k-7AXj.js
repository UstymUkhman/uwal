var J=a=>{throw TypeError(a)};var E=(a,e,t)=>e.has(a)||J("Cannot "+t);var i=(a,e,t)=>(E(a,e,"read from private field"),t?t.call(a):e.get(a)),c=(a,e,t)=>e.has(a)?J("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),x=(a,e,t,o)=>(E(a,e,"write to private field"),o?o.call(a,t):e.set(a,t),t),I=(a,e,t)=>(E(a,e,"access private method"),t);import{C as $,U as N}from"./index-oaqckAdJ.js";import{m as e0}from"./wgpu-matrix.module-BvIiWEhL.js";var a0="override TRIPLET_FACTOR=0.6;const THRESHOLD=20.0/256.0;const MIN_GRAD=THRESHOLD*0.1;struct text{transform: mat3x3f,texureSize: vec2f};struct TextVertexOutput{@location(0)texture: vec2f,@location(1)distanceDelta: f32,@builtin(position)position: vec4f,@location(2)inverseTexureSize: vec2f};@group(0)@binding(0)var<uniform>Text: text;@vertex fn textVertex(@location(0)position: vec2f,@location(1)texture: vec2f,@location(2)size: f32)->TextVertexOutput{var output: TextVertexOutput;let clipSpace=Text.transform*vec3f(position,1);output.inverseTexureSize=1/Text.texureSize;output.position=vec4f(clipSpace.xy,0,1);output.distanceDelta=1/size;output.texture=texture;return output;}struct font{color: vec4f,back: vec4f,subpx: f32,hint: f32};@group(0)@binding(1)var<uniform>Font: font;@group(0)@binding(2)var Texture: texture_2d<f32>;@group(0)@binding(3)var Sampler: sampler;fn Subpixel(triplet: f32,coverage: f32)->vec3f{let z=TRIPLET_FACTOR*triplet;let top=abs(z);let max=vec3f(-z,0,z);let average=vec3f(mix(top,-top-1,coverage));return clamp(max-average,vec3f(0),vec3f(1));}@fragment fn textFragment(@location(0)texture: vec2f,@location(1)distanceDelta: f32,@location(2)inverseTexureSize: vec2f)->@location(0)vec4f{let sdf=textureSample(Texture,Sampler,texture).r;let sdfX=textureSample(Texture,Sampler,texture+vec2f(inverseTexureSize.x,0)).r;let sdfY=textureSample(Texture,Sampler,texture+vec2f(0,inverseTexureSize.y)).r;let strokeGradient=vec2f(sdfX-sdf,sdfY-sdf);let strokeGradientLength=max(length(strokeGradient),MIN_GRAD);let gradient=strokeGradient/vec2f(strokeGradientLength);let verticalGradient=abs(gradient.y);let horizontalDelta=mix(distanceDelta*1.1,distanceDelta*0.6,verticalGradient);let resultDelta=mix(distanceDelta,horizontalDelta,Font.hint);var alpha=smoothstep(0.5-resultDelta,resultDelta+0.5,sdf);alpha=pow(alpha,Font.hint*verticalGradient*0.2+1);if(alpha<THRESHOLD){discard;}let channels=Subpixel(Font.subpx*gradient.x*0.5,alpha);return vec4f(mix(Font.back.rgb,Font.color.rgb,channels),1);}",z,L,F,k,Y,M,V,w,Z,R,B,A,j,H,P,q,O,y,K,n0,Q,r0;class t0{constructor(e){c(this,y);c(this,z);c(this,L);c(this,F);c(this,k);c(this,Y);c(this,M);c(this,V);c(this,w);c(this,Z);c(this,R);c(this,B);c(this,A);c(this,j);c(this,H);c(this,P);c(this,q);c(this,O,new $);const{font:t,renderer:o,size:g=16,lineGap:_=0,label:r="Text",hinting:d=!0,subpixel:b=!0,color:s=i(this,O)}=e;x(this,w,o),x(this,V,b),x(this,M,d),x(this,F,r),this.Color=s,x(this,z,t),this.Size=g,I(this,y,K).call(this),x(this,k,i(this,L)*_)}Destroy(){x(this,R,i(this,R).destroy()),x(this,B,i(this,B).destroy()),x(this,A,i(this,A).destroy())}}z=new WeakMap,L=new WeakMap,F=new WeakMap,k=new WeakMap,Y=new WeakMap,M=new WeakMap,V=new WeakMap,w=new WeakMap,Z=new WeakMap,R=new WeakMap,B=new WeakMap,A=new WeakMap,j=new WeakMap,H=new WeakMap,P=new WeakMap,q=new WeakMap,O=new WeakMap,y=new WeakSet,K=function(){const{buffer:e,Text:{transform:t,texureSize:o}}=i(this,w).CreateUniformBuffer("Text",{label:`${i(this,F)} Uniform Buffer`}),{buffer:g,Font:{color:_,back:r,subpx:d,hint:b}}=i(this,w).CreateUniformBuffer("Font",{label:`${i(this,F)} Font Uniform Buffer`});r.set([1,1,1,1]),b[0]=+i(this,M),d[0]=+i(this,V),_.set(i(this,O).rgba),x(this,H,t),x(this,P,o),x(this,R,e),x(this,B,g),i(this,w).WriteBuffer(g,_.buffer)},n0=function(){const{cap_height:e,ascent:t,x_height:o,descent:g,line_gap:_}=i(this,z),r=i(this,L)/e;return{capScale:r,ascent:Math.round(t*r),lowScale:Math.round(o*r)/o,lineHeight:Math.round((t+g+_)*r+i(this,k))}},Q=function([e,t],o,g,_=0){const{aspect:r,ix:d,descent:b,iy:s,row_height:l}=i(this,z),{flags:h,bearing_x:m,rect:n,advance_x:p}=g,{lowScale:S,capScale:U,ascent:W}=o,C=h&1?S:U,f=r*C,v=e+f*(m+_-d),T=v+f*(n[2]-n[0]),u=t-W-C*(b+s),G=u+C*l;e+=p*f;const D=C*s*2;return{position:[e,t],vertices:[v,G,n[0],n[1],D,T,G,n[2],n[1],D,v,u,n[0],n[3],D,v,u,n[0],n[3],D,T,G,n[2],n[1],D,T,u,n[2],n[3],D]}},r0=function(e,t,o,g){const{space_advance:_,chars:r,kern:d}=i(this,z),{lineHeight:b,capScale:s}=t;let l=g,h=0,m=0,n=" ",p=0;for(;!(m===e.length||o.length<=h);){let f=e[m++];if(f===`
`){p=Math.max(p,l[0]),l[0]=g[0],l[1]-=b,n=" ";continue}if(f===" "){l[0]+=_*s,n=" ";continue}let v=r[f];v||(v=r[f="?"]);const T=I(this,y,Q).call(this,l,t,v,d[n+f]);for(let u=0,G=T.vertices.length;u<G;++u)o[h++]=T.vertices[u];l=T.position,n=f}const[S,U]=g,W=p-S,C=U-l[1]+b;return{rectangle:[S,U,W,C],textPosition:m,arrayPosition:h}};const i0=""+new URL("roboto-bold-BZ0Avr_1.png",import.meta.url).href,c0={},o0=1,g0=0,_0=.009766,s0=.009766,x0=.047,d0=.080078,l0=.021484,b0=.121094,f0=.061615,p0=.021582,v0={0:{codepoint:48,rect:[.745605,0,.806641,.121094],bearing_x:.00402,bearing_y:.00402,advance_x:.049723,flags:4},1:{codepoint:49,rect:[.806641,0,.852783,.121094],bearing_x:.007067,bearing_y:.007067,advance_x:.049723,flags:4},2:{codepoint:50,rect:[.852783,0,.915771,.121094],bearing_x:.002962,bearing_y:.002962,advance_x:.049723,flags:4},3:{codepoint:51,rect:[.915771,0,.978027,.121094],bearing_x:.002708,bearing_y:.002708,advance_x:.049723,flags:4},4:{codepoint:52,rect:[0,.121094,.064453,.242188],bearing_x:.002327,bearing_y:.002327,advance_x:.049723,flags:4},5:{codepoint:53,rect:[.064453,.121094,.125488,.242188],bearing_x:.004443,bearing_y:.004443,advance_x:.049723,flags:4},6:{codepoint:54,rect:[.125488,.121094,.187256,.242188],bearing_x:.004232,bearing_y:.004232,advance_x:.049723,flags:4},7:{codepoint:55,rect:[.187256,.121094,.250244,.242188],bearing_x:.002581,bearing_y:.002581,advance_x:.049723,flags:4},8:{codepoint:56,rect:[.250244,.121094,.311279,.242188],bearing_x:.00402,bearing_y:.00402,advance_x:.049723,flags:4},9:{codepoint:57,rect:[.311279,.121094,.372314,.242188],bearing_x:.003639,bearing_y:.003639,advance_x:.049723,flags:4},"!":{codepoint:33,rect:[0,0,.032959,.121094],bearing_x:.005247,bearing_y:.005247,advance_x:.023571,flags:8},'"':{codepoint:34,rect:[.032959,0,.074707,.121094],bearing_x:.002708,bearing_y:.002708,advance_x:.027803,flags:8},"#":{codepoint:35,rect:[.074707,0,.141357,.121094],bearing_x:.002708,bearing_y:.002708,advance_x:.051628,flags:8},$:{codepoint:36,rect:[.141357,0,.202637,.121094],bearing_x:.003893,bearing_y:.003893,advance_x:.049723,flags:8},"%":{codepoint:37,rect:[.202637,0,.27832,.121094],bearing_x:.00402,bearing_y:.00402,advance_x:.063984,flags:8},"&":{codepoint:38,rect:[.27832,0,.350586,.121094],bearing_x:.003005,bearing_y:.003005,advance_x:.056875,flags:8},"'":{codepoint:39,rect:[.350586,0,.378906,.121094],bearing_x:.002666,bearing_y:.002666,advance_x:.014007,flags:8},"(":{codepoint:40,rect:[.378906,0,.421875,.121094],bearing_x:.005247,bearing_y:.005247,advance_x:.030426,flags:8},")":{codepoint:41,rect:[.421875,0,.465332,.121094],bearing_x:.001693,bearing_y:.001693,advance_x:.030553,flags:8},"*":{codepoint:42,rect:[.465332,0,.522217,.121094],bearing_x:.001143,bearing_y:.001143,advance_x:.039271,flags:8},"+":{codepoint:43,rect:[.522217,0,.58374,.121094],bearing_x:.002412,bearing_y:.002412,advance_x:.047311,flags:8},",":{codepoint:44,rect:[.58374,0,.61792,.121094],bearing_x:.001481,bearing_y:.001481,advance_x:.021159,flags:8},"-":{codepoint:45,rect:[.61792,0,.661133,.121094],bearing_x:.004655,bearing_y:.004655,advance_x:.0336,flags:8},".":{codepoint:46,rect:[.661133,0,.694336,.121094],bearing_x:.005332,bearing_y:.005332,advance_x:.025179,flags:8},"/":{codepoint:47,rect:[.694336,0,.745605,.121094],bearing_x:-55e-5,bearing_y:-55e-5,advance_x:.032373,flags:8},":":{codepoint:58,rect:[.372314,.121094,.405518,.242188],bearing_x:.00529,bearing_y:.00529,advance_x:.02446,flags:8},";":{codepoint:59,rect:[.405518,.121094,.440918,.242188],bearing_x:.002412,bearing_y:.002412,advance_x:.022725,flags:8},"<":{codepoint:60,rect:[.440918,.121094,.496826,.242188],bearing_x:.002285,bearing_y:.002285,advance_x:.044095,flags:8},"=":{codepoint:61,rect:[.496826,.121094,.553955,.242188],bearing_x:.005755,bearing_y:.005755,advance_x:.049596,flags:8},">":{codepoint:62,rect:[.553955,.121094,.610107,.242188],bearing_x:.005078,bearing_y:.005078,advance_x:.044772,flags:8},"?":{codepoint:63,rect:[.610107,.121094,.667725,.242188],bearing_x:.001904,bearing_y:.001904,advance_x:.043122,flags:8},"@":{codepoint:64,rect:[.667725,.121094,.758545,.242188],bearing_x:.003174,bearing_y:.003174,advance_x:.077568,flags:8},A:{codepoint:65,rect:[.758545,.121094,.835693,.242188],bearing_x:296e-6,bearing_y:296e-6,advance_x:.058314,flags:2},B:{codepoint:66,rect:[.835693,.121094,.900879,.242188],bearing_x:.005501,bearing_y:.005501,advance_x:.055309,flags:2},C:{codepoint:67,rect:[.900879,.121094,.970703,.242188],bearing_x:.003639,bearing_y:.003639,advance_x:.056706,flags:2},D:{codepoint:68,rect:[0,.242188,.066406,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.056325,flags:2},E:{codepoint:69,rect:[.066406,.242188,.127197,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.04875,flags:2},F:{codepoint:70,rect:[.127197,.242188,.186768,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.04748,flags:2},G:{codepoint:71,rect:[.186768,.242188,.256348,.363281],bearing_x:.003978,bearing_y:.003978,advance_x:.059033,flags:2},H:{codepoint:72,rect:[.256348,.242188,.325928,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.061234,flags:2},I:{codepoint:73,rect:[.325928,.242188,.358154,.363281],bearing_x:.006305,bearing_y:.006305,advance_x:.025264,flags:2},J:{codepoint:74,rect:[.358154,.242188,.418945,.363281],bearing_x:.001693,bearing_y:.001693,advance_x:.048411,flags:2},K:{codepoint:75,rect:[.418945,.242188,.488525,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.055013,flags:2},L:{codepoint:76,rect:[.488525,.242188,.547607,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.04693,flags:2},M:{codepoint:77,rect:[.547607,.242188,.631836,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.075918,flags:2},N:{codepoint:78,rect:[.631836,.242188,.701416,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.061191,flags:2},O:{codepoint:79,rect:[.701416,.242188,.773193,.363281],bearing_x:.003639,bearing_y:.003639,advance_x:.059837,flags:2},P:{codepoint:80,rect:[.773193,.242188,.839844,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.055902,flags:2},Q:{codepoint:81,rect:[.839844,.242188,.911621,.363281],bearing_x:.003555,bearing_y:.003555,advance_x:.059837,flags:2},R:{codepoint:82,rect:[.911621,.242188,.979004,.363281],bearing_x:.005501,bearing_y:.005501,advance_x:.055309,flags:2},S:{codepoint:83,rect:[0,.363281,.06665,.484375],bearing_x:.00292,bearing_y:.00292,advance_x:.053278,flags:2},T:{codepoint:84,rect:[.06665,.363281,.13623,.484375],bearing_x:.001693,bearing_y:.001693,advance_x:.053617,flags:2},U:{codepoint:85,rect:[.13623,.363281,.202881,.484375],bearing_x:.004909,bearing_y:.004909,advance_x:.057044,flags:2},V:{codepoint:86,rect:[.202881,.363281,.27832,.484375],bearing_x:296e-6,bearing_y:296e-6,advance_x:.056663,flags:2},W:{codepoint:87,rect:[.27832,.363281,.370605,.484375],bearing_x:.001481,bearing_y:.001481,advance_x:.075791,flags:2},X:{codepoint:88,rect:[.370605,.363281,.443359,.484375],bearing_x:931e-6,bearing_y:931e-6,advance_x:.055055,flags:2},Y:{codepoint:89,rect:[.443359,.363281,.516113,.484375],bearing_x:85e-6,bearing_y:85e-6,advance_x:.053574,flags:2},Z:{codepoint:90,rect:[.516113,.363281,.58252,.484375],bearing_x:.003089,bearing_y:.003089,advance_x:.052516,flags:2},"[":{codepoint:91,rect:[.58252,.363281,.620117,.484375],bearing_x:.005078,bearing_y:.005078,advance_x:.024079,flags:8},"\\":{codepoint:92,rect:[.620117,.363281,.677734,.484375],bearing_x:0,bearing_y:0,advance_x:.036562,flags:8},"]":{codepoint:93,rect:[.677734,.363281,.715332,.484375],bearing_x:55e-5,bearing_y:55e-5,advance_x:.024079,flags:8},"^":{codepoint:94,rect:[.715332,.363281,.769043,.484375],bearing_x:.001862,bearing_y:.001862,advance_x:.037874,flags:8},_:{codepoint:95,rect:[.769043,.363281,.826904,.484375],bearing_x:42e-6,bearing_y:42e-6,advance_x:.038678,flags:8},"`":{codepoint:96,rect:[.826904,.363281,.86792,.484375],bearing_x:.002201,bearing_y:.002201,advance_x:.028649,flags:8},a:{codepoint:97,rect:[.86792,.363281,.927979,.484375],bearing_x:.002878,bearing_y:.002878,advance_x:.046465,flags:1},b:{codepoint:98,rect:[.927979,.363281,.98877,.484375],bearing_x:.004697,bearing_y:.004697,advance_x:.048792,flags:1},c:{codepoint:99,rect:[0,.484375,.05957,.605469],bearing_x:.002793,bearing_y:.002793,advance_x:.045195,flags:1},d:{codepoint:100,rect:[.05957,.484375,.120361,.605469],bearing_x:.002793,bearing_y:.002793,advance_x:.048835,flags:1},e:{codepoint:101,rect:[.120361,.484375,.181396,.605469],bearing_x:.003047,bearing_y:.003047,advance_x:.046846,flags:1},f:{codepoint:102,rect:[.181396,.484375,.230713,.605469],bearing_x:.001227,bearing_y:.001227,advance_x:.031061,flags:1},g:{codepoint:103,rect:[.230713,.484375,.291992,.605469],bearing_x:.00292,bearing_y:.00292,advance_x:.049469,flags:1},h:{codepoint:104,rect:[.291992,.484375,.351074,.605469],bearing_x:.004401,bearing_y:.004401,advance_x:.048496,flags:1},i:{codepoint:105,rect:[.351074,.484375,.384277,.605469],bearing_x:.004613,bearing_y:.004613,advance_x:.022979,flags:1},j:{codepoint:106,rect:[.384277,.484375,.425781,.605469],bearing_x:-.00402,bearing_y:-.00402,advance_x:.022513,flags:1},k:{codepoint:107,rect:[.425781,.484375,.487549,.605469],bearing_x:.004697,bearing_y:.004697,advance_x:.046296,flags:1},l:{codepoint:108,rect:[.487549,.484375,.519287,.605469],bearing_x:.005332,bearing_y:.005332,advance_x:.022979,flags:1},m:{codepoint:109,rect:[.519287,.484375,.604248,.605469],bearing_x:.004697,bearing_y:.004697,advance_x:.075029,flags:1},n:{codepoint:110,rect:[.604248,.484375,.663086,.605469],bearing_x:.004443,bearing_y:.004443,advance_x:.048538,flags:1},o:{codepoint:111,rect:[.663086,.484375,.72583,.605469],bearing_x:.002793,bearing_y:.002793,advance_x:.049004,flags:1},p:{codepoint:112,rect:[.72583,.484375,.786377,.605469],bearing_x:.004697,bearing_y:.004697,advance_x:.048792,flags:1},q:{codepoint:113,rect:[.786377,.484375,.847168,.605469],bearing_x:.002793,bearing_y:.002793,advance_x:.048962,flags:1},r:{codepoint:114,rect:[.847168,.484375,.892578,.605469],bearing_x:.004697,bearing_y:.004697,advance_x:.031611,flags:1},s:{codepoint:115,rect:[.892578,.484375,.950928,.605469],bearing_x:.00237,bearing_y:.00237,advance_x:.044561,flags:1},t:{codepoint:116,rect:[.950928,.484375,.997559,.605469],bearing_x:423e-6,bearing_y:423e-6,advance_x:.029284,flags:1},u:{codepoint:117,rect:[0,.605469,.059082,.726562],bearing_x:.004401,bearing_y:.004401,advance_x:.048496,flags:1},v:{codepoint:118,rect:[.059082,.605469,.121094,.726562],bearing_x:55e-5,bearing_y:55e-5,advance_x:.043799,flags:1},w:{codepoint:119,rect:[.121094,.605469,.20166,.726562],bearing_x:.001185,bearing_y:.001185,advance_x:.063688,flags:1},x:{codepoint:120,rect:[.20166,.605469,.263672,.726562],bearing_x:889e-6,bearing_y:889e-6,advance_x:.044095,flags:1},y:{codepoint:121,rect:[.263672,.605469,.326416,.726562],bearing_x:127e-6,bearing_y:127e-6,advance_x:.043503,flags:1},z:{codepoint:122,rect:[.326416,.605469,.383789,.726562],bearing_x:.003132,bearing_y:.003132,advance_x:.044095,flags:1},"{":{codepoint:123,rect:[.383789,.605469,.428223,.726562],bearing_x:.002031,bearing_y:.002031,advance_x:.028607,flags:8},"|":{codepoint:124,rect:[.428223,.605469,.455078,.726562],bearing_x:.007321,bearing_y:.007321,advance_x:.021921,flags:8},"}":{codepoint:125,rect:[.455078,.605469,.499512,.726562],bearing_x:.001439,bearing_y:.001439,advance_x:.028607,flags:8},"~":{codepoint:126,rect:[.499512,.605469,.566162,.726562],bearing_x:.004486,bearing_y:.004486,advance_x:.056198,flags:8}},u0={kern:c0,aspect:o0,line_gap:g0,ix:_0,iy:s0,x_height:x0,ascent:d0,descent:l0,row_height:b0,cap_height:f0,space_advance:p0,chars:v0};/**
 * @example Text Rendering
 * @author Ustym Ukhman <ustym.ukhman@gmail.com>
 * @description This example is inspired by astiopin's "webgl_fonts"
 * {@link https://astiopin.github.io/webgl_fonts}&nbsp;
 * and developed by using a version listed below. Please note that this code
 * may be simplified in future thanks to more recent library APIs.
 * @version 0.0.9
 * @license MIT
 */let y0,X;async function T0(a){let e;a.style.position="absolute",a.style.height="400px",a.style.width="700px",a.style.top="115.875px",a.style.left="241.5px";try{e=new(await N.RenderPipeline(a,"Text Rendering"))}catch(s){alert(s)}const t=e.CreateShaderModule(a0),o=e.CreateVertexBufferLayout(["position","texture","size"],void 0,"textVertex"),g=e.CreateColorAttachment();g.clearValue=new $(16777215).rgba,e.CreatePassDescriptor(g),e.CreatePipeline({fragment:e.CreateFragmentState(t,"textFragment"),vertex:e.CreateVertexState(t,"textVertex",o)});let _,r;const d=new Image;d.src=i0,d.onload=async()=>{const s=new $;_=new t0({renderer:e,color:s,font:u0,lineGap:.2,size:144}),await _.SetFontTexture(d),r=_.Write("UWAL",[-150,0]),b()};function b(){const s=e.DevicePixelRatio,l=Math.round(s*a.width*.5)*2,h=Math.round(s*a.height*.5)*2;let m=Math.round(-.5*r.rectangle[2]),n=Math.round(.5*r.rectangle[3]),p=2/l,S=2/h;r.transform=e0.create(p,0,0,0,S,0,m*p,n*S,1),e.WriteBuffer(r.buffer,r.transform.buffer),_.Render()}X=new ResizeObserver(s=>{e.SetCanvasSize(700,400)}),X.observe(a)}function z0(){N.OnDeviceLost=()=>{},cancelAnimationFrame(y0),X.disconnect(),N.Destroy()}export{z0 as destroy,T0 as run};

var Bt=w=>{throw TypeError(w)};var xt=(w,x,I)=>x.has(w)||Bt("Cannot "+I);var S=(w,x,I)=>(xt(w,x,"read from private field"),I?I.call(w):x.get(w)),G=(w,x,I)=>x.has(w)?Bt("Cannot add the same private member more than once"):x instanceof WeakSet?x.add(w):x.set(w,I),R=(w,x,I,O)=>(xt(w,x,"write to private field"),O?O.call(w,I):x.set(w,I),I),tt=(w,x,I)=>(xt(w,x,"access private method"),I);import{a as Pt,N as Xt}from"./index-DDCPJUwH.js";var Ct="struct Shape{color: vec4f,matrix: mat3x3f};@group(0)@binding(0)var<uniform>resolution: vec3f;fn GetClipSpace(position: vec2f)->vec2f{let clipSpace=position/resolution.xy*2-1;return clipSpace*vec2f(1,-1);}@group(0)@binding(1)var<uniform>shape: Shape;fn GetVertexClipSpace(position: vec2f)->vec4f{let matrixPosition=shape.matrix*vec3f(position,1);let clipSpace=GetClipSpace(matrixPosition.xy);return vec4f(clipSpace,0,1);}@vertex fn shapeVertex(@location(0)position: vec2f)->@builtin(position)vec4f {return GetVertexClipSpace(position);}";function _t(w,x){return class extends w{constructor(...I){super(...I),x(this)}}}const Qt=_t(Array,w=>w.fill(0));let $=1e-6;function Rt(w){function x(n=0,i=0){const t=new w(2);return n!==void 0&&(t[0]=n,i!==void 0&&(t[1]=i)),t}const I=x;function O(n,i,t){const c=t??new w(2);return c[0]=n,c[1]=i,c}function X(n,i){const t=i??new w(2);return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function Q(n,i){const t=i??new w(2);return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function k(n,i){const t=i??new w(2);return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function H(n,i=0,t=1,c){const u=c??new w(2);return u[0]=Math.min(t,Math.max(i,n[0])),u[1]=Math.min(t,Math.max(i,n[1])),u}function N(n,i,t){const c=t??new w(2);return c[0]=n[0]+i[0],c[1]=n[1]+i[1],c}function hn(n,i,t,c){const u=c??new w(2);return u[0]=n[0]+i[0]*t,u[1]=n[1]+i[1]*t,u}function sn(n,i){const t=n[0],c=n[1],u=i[0],D=i[1],g=Math.sqrt(t*t+c*c),r=Math.sqrt(u*u+D*D),f=g*r,M=f&&zn(n,i)/f;return Math.acos(M)}function ln(n,i,t){const c=t??new w(2);return c[0]=n[0]-i[0],c[1]=n[1]-i[1],c}const Vn=ln;function cn(n,i){return Math.abs(n[0]-i[0])<$&&Math.abs(n[1]-i[1])<$}function pn(n,i){return n[0]===i[0]&&n[1]===i[1]}function xn(n,i,t,c){const u=c??new w(2);return u[0]=n[0]+t*(i[0]-n[0]),u[1]=n[1]+t*(i[1]-n[1]),u}function $n(n,i,t,c){const u=c??new w(2);return u[0]=n[0]+t[0]*(i[0]-n[0]),u[1]=n[1]+t[1]*(i[1]-n[1]),u}function En(n,i,t){const c=t??new w(2);return c[0]=Math.max(n[0],i[0]),c[1]=Math.max(n[1],i[1]),c}function Mn(n,i,t){const c=t??new w(2);return c[0]=Math.min(n[0],i[0]),c[1]=Math.min(n[1],i[1]),c}function en(n,i,t){const c=t??new w(2);return c[0]=n[0]*i,c[1]=n[1]*i,c}const Yn=en;function yn(n,i,t){const c=t??new w(2);return c[0]=n[0]/i,c[1]=n[1]/i,c}function gn(n,i){const t=i??new w(2);return t[0]=1/n[0],t[1]=1/n[1],t}const Fn=gn;function An(n,i,t){const c=t??new w(3),u=n[0]*i[1]-n[1]*i[0];return c[0]=0,c[1]=0,c[2]=u,c}function zn(n,i){return n[0]*i[0]+n[1]*i[1]}function J(n){const i=n[0],t=n[1];return Math.sqrt(i*i+t*t)}const Tn=J;function T(n){const i=n[0],t=n[1];return i*i+t*t}const Z=T;function F(n,i){const t=n[0]-i[0],c=n[1]-i[1];return Math.sqrt(t*t+c*c)}const Gn=F;function on(n,i){const t=n[0]-i[0],c=n[1]-i[1];return t*t+c*c}const Xn=on;function rn(n,i){const t=i??new w(2),c=n[0],u=n[1],D=Math.sqrt(c*c+u*u);return D>1e-5?(t[0]=c/D,t[1]=u/D):(t[0]=0,t[1]=0),t}function _n(n,i){const t=i??new w(2);return t[0]=-n[0],t[1]=-n[1],t}function Y(n,i){const t=i??new w(2);return t[0]=n[0],t[1]=n[1],t}const Qn=Y;function Dn(n,i,t){const c=t??new w(2);return c[0]=n[0]*i[0],c[1]=n[1]*i[1],c}const Rn=Dn;function dn(n,i,t){const c=t??new w(2);return c[0]=n[0]/i[0],c[1]=n[1]/i[1],c}const Un=dn;function Sn(n=1,i){const t=i??new w(2),c=Math.random()*2*Math.PI;return t[0]=Math.cos(c)*n,t[1]=Math.sin(c)*n,t}function e(n){const i=n??new w(2);return i[0]=0,i[1]=0,i}function h(n,i,t){const c=t??new w(2),u=n[0],D=n[1];return c[0]=u*i[0]+D*i[4]+i[12],c[1]=u*i[1]+D*i[5]+i[13],c}function s(n,i,t){const c=t??new w(2),u=n[0],D=n[1];return c[0]=i[0]*u+i[4]*D+i[8],c[1]=i[1]*u+i[5]*D+i[9],c}function o(n,i,t,c){const u=c??new w(2),D=n[0]-i[0],g=n[1]-i[1],r=Math.sin(t),f=Math.cos(t);return u[0]=D*f-g*r+i[0],u[1]=D*r+g*f+i[1],u}function a(n,i,t){const c=t??new w(2);return rn(n,c),en(c,i,c)}function l(n,i,t){const c=t??new w(2);return J(n)>i?a(n,i,c):Y(n,c)}function y(n,i,t){const c=t??new w(2);return xn(n,i,.5,c)}return{create:x,fromValues:I,set:O,ceil:X,floor:Q,round:k,clamp:H,add:N,addScaled:hn,angle:sn,subtract:ln,sub:Vn,equalsApproximately:cn,equals:pn,lerp:xn,lerpV:$n,max:En,min:Mn,mulScalar:en,scale:Yn,divScalar:yn,inverse:gn,invert:Fn,cross:An,dot:zn,length:J,len:Tn,lengthSq:T,lenSq:Z,distance:F,dist:Gn,distanceSq:on,distSq:Xn,normalize:rn,negate:_n,copy:Y,clone:Qn,multiply:Dn,mul:Rn,divide:dn,div:Un,random:Sn,zero:e,transformMat4:h,transformMat3:s,rotate:o,setLength:a,truncate:l,midpoint:y}}const It=new Map;function Zt(w){let x=It.get(w);return x||(x=Rt(w),It.set(w,x)),x}function Lt(w){function x(r,f,M){const d=new w(3);return r!==void 0&&(d[0]=r,f!==void 0&&(d[1]=f,M!==void 0&&(d[2]=M))),d}const I=x;function O(r,f,M,d){const p=d??new w(3);return p[0]=r,p[1]=f,p[2]=M,p}function X(r,f){const M=f??new w(3);return M[0]=Math.ceil(r[0]),M[1]=Math.ceil(r[1]),M[2]=Math.ceil(r[2]),M}function Q(r,f){const M=f??new w(3);return M[0]=Math.floor(r[0]),M[1]=Math.floor(r[1]),M[2]=Math.floor(r[2]),M}function k(r,f){const M=f??new w(3);return M[0]=Math.round(r[0]),M[1]=Math.round(r[1]),M[2]=Math.round(r[2]),M}function H(r,f=0,M=1,d){const p=d??new w(3);return p[0]=Math.min(M,Math.max(f,r[0])),p[1]=Math.min(M,Math.max(f,r[1])),p[2]=Math.min(M,Math.max(f,r[2])),p}function N(r,f,M){const d=M??new w(3);return d[0]=r[0]+f[0],d[1]=r[1]+f[1],d[2]=r[2]+f[2],d}function hn(r,f,M,d){const p=d??new w(3);return p[0]=r[0]+f[0]*M,p[1]=r[1]+f[1]*M,p[2]=r[2]+f[2]*M,p}function sn(r,f){const M=r[0],d=r[1],p=r[2],A=f[0],z=f[1],B=f[2],V=Math.sqrt(M*M+d*d+p*p),q=Math.sqrt(A*A+z*z+B*B),P=V*q,E=P&&zn(r,f)/P;return Math.acos(E)}function ln(r,f,M){const d=M??new w(3);return d[0]=r[0]-f[0],d[1]=r[1]-f[1],d[2]=r[2]-f[2],d}const Vn=ln;function cn(r,f){return Math.abs(r[0]-f[0])<$&&Math.abs(r[1]-f[1])<$&&Math.abs(r[2]-f[2])<$}function pn(r,f){return r[0]===f[0]&&r[1]===f[1]&&r[2]===f[2]}function xn(r,f,M,d){const p=d??new w(3);return p[0]=r[0]+M*(f[0]-r[0]),p[1]=r[1]+M*(f[1]-r[1]),p[2]=r[2]+M*(f[2]-r[2]),p}function $n(r,f,M,d){const p=d??new w(3);return p[0]=r[0]+M[0]*(f[0]-r[0]),p[1]=r[1]+M[1]*(f[1]-r[1]),p[2]=r[2]+M[2]*(f[2]-r[2]),p}function En(r,f,M){const d=M??new w(3);return d[0]=Math.max(r[0],f[0]),d[1]=Math.max(r[1],f[1]),d[2]=Math.max(r[2],f[2]),d}function Mn(r,f,M){const d=M??new w(3);return d[0]=Math.min(r[0],f[0]),d[1]=Math.min(r[1],f[1]),d[2]=Math.min(r[2],f[2]),d}function en(r,f,M){const d=M??new w(3);return d[0]=r[0]*f,d[1]=r[1]*f,d[2]=r[2]*f,d}const Yn=en;function yn(r,f,M){const d=M??new w(3);return d[0]=r[0]/f,d[1]=r[1]/f,d[2]=r[2]/f,d}function gn(r,f){const M=f??new w(3);return M[0]=1/r[0],M[1]=1/r[1],M[2]=1/r[2],M}const Fn=gn;function An(r,f,M){const d=M??new w(3),p=r[2]*f[0]-r[0]*f[2],A=r[0]*f[1]-r[1]*f[0];return d[0]=r[1]*f[2]-r[2]*f[1],d[1]=p,d[2]=A,d}function zn(r,f){return r[0]*f[0]+r[1]*f[1]+r[2]*f[2]}function J(r){const f=r[0],M=r[1],d=r[2];return Math.sqrt(f*f+M*M+d*d)}const Tn=J;function T(r){const f=r[0],M=r[1],d=r[2];return f*f+M*M+d*d}const Z=T;function F(r,f){const M=r[0]-f[0],d=r[1]-f[1],p=r[2]-f[2];return Math.sqrt(M*M+d*d+p*p)}const Gn=F;function on(r,f){const M=r[0]-f[0],d=r[1]-f[1],p=r[2]-f[2];return M*M+d*d+p*p}const Xn=on;function rn(r,f){const M=f??new w(3),d=r[0],p=r[1],A=r[2],z=Math.sqrt(d*d+p*p+A*A);return z>1e-5?(M[0]=d/z,M[1]=p/z,M[2]=A/z):(M[0]=0,M[1]=0,M[2]=0),M}function _n(r,f){const M=f??new w(3);return M[0]=-r[0],M[1]=-r[1],M[2]=-r[2],M}function Y(r,f){const M=f??new w(3);return M[0]=r[0],M[1]=r[1],M[2]=r[2],M}const Qn=Y;function Dn(r,f,M){const d=M??new w(3);return d[0]=r[0]*f[0],d[1]=r[1]*f[1],d[2]=r[2]*f[2],d}const Rn=Dn;function dn(r,f,M){const d=M??new w(3);return d[0]=r[0]/f[0],d[1]=r[1]/f[1],d[2]=r[2]/f[2],d}const Un=dn;function Sn(r=1,f){const M=f??new w(3),d=Math.random()*2*Math.PI,p=Math.random()*2-1,A=Math.sqrt(1-p*p)*r;return M[0]=Math.cos(d)*A,M[1]=Math.sin(d)*A,M[2]=p*r,M}function e(r){const f=r??new w(3);return f[0]=0,f[1]=0,f[2]=0,f}function h(r,f,M){const d=M??new w(3),p=r[0],A=r[1],z=r[2],B=f[3]*p+f[7]*A+f[11]*z+f[15]||1;return d[0]=(f[0]*p+f[4]*A+f[8]*z+f[12])/B,d[1]=(f[1]*p+f[5]*A+f[9]*z+f[13])/B,d[2]=(f[2]*p+f[6]*A+f[10]*z+f[14])/B,d}function s(r,f,M){const d=M??new w(3),p=r[0],A=r[1],z=r[2];return d[0]=p*f[0*4+0]+A*f[1*4+0]+z*f[2*4+0],d[1]=p*f[0*4+1]+A*f[1*4+1]+z*f[2*4+1],d[2]=p*f[0*4+2]+A*f[1*4+2]+z*f[2*4+2],d}function o(r,f,M){const d=M??new w(3),p=r[0],A=r[1],z=r[2];return d[0]=p*f[0]+A*f[4]+z*f[8],d[1]=p*f[1]+A*f[5]+z*f[9],d[2]=p*f[2]+A*f[6]+z*f[10],d}function a(r,f,M){const d=M??new w(3),p=f[0],A=f[1],z=f[2],B=f[3]*2,V=r[0],q=r[1],P=r[2],E=A*P-z*q,U=z*V-p*P,_=p*q-A*V;return d[0]=V+E*B+(A*_-z*U)*2,d[1]=q+U*B+(z*E-p*_)*2,d[2]=P+_*B+(p*U-A*E)*2,d}function l(r,f){const M=f??new w(3);return M[0]=r[12],M[1]=r[13],M[2]=r[14],M}function y(r,f,M){const d=M??new w(3),p=f*4;return d[0]=r[p+0],d[1]=r[p+1],d[2]=r[p+2],d}function n(r,f){const M=f??new w(3),d=r[0],p=r[1],A=r[2],z=r[4],B=r[5],V=r[6],q=r[8],P=r[9],E=r[10];return M[0]=Math.sqrt(d*d+p*p+A*A),M[1]=Math.sqrt(z*z+B*B+V*V),M[2]=Math.sqrt(q*q+P*P+E*E),M}function i(r,f,M,d){const p=d??new w(3),A=[],z=[];return A[0]=r[0]-f[0],A[1]=r[1]-f[1],A[2]=r[2]-f[2],z[0]=A[0],z[1]=A[1]*Math.cos(M)-A[2]*Math.sin(M),z[2]=A[1]*Math.sin(M)+A[2]*Math.cos(M),p[0]=z[0]+f[0],p[1]=z[1]+f[1],p[2]=z[2]+f[2],p}function t(r,f,M,d){const p=d??new w(3),A=[],z=[];return A[0]=r[0]-f[0],A[1]=r[1]-f[1],A[2]=r[2]-f[2],z[0]=A[2]*Math.sin(M)+A[0]*Math.cos(M),z[1]=A[1],z[2]=A[2]*Math.cos(M)-A[0]*Math.sin(M),p[0]=z[0]+f[0],p[1]=z[1]+f[1],p[2]=z[2]+f[2],p}function c(r,f,M,d){const p=d??new w(3),A=[],z=[];return A[0]=r[0]-f[0],A[1]=r[1]-f[1],A[2]=r[2]-f[2],z[0]=A[0]*Math.cos(M)-A[1]*Math.sin(M),z[1]=A[0]*Math.sin(M)+A[1]*Math.cos(M),z[2]=A[2],p[0]=z[0]+f[0],p[1]=z[1]+f[1],p[2]=z[2]+f[2],p}function u(r,f,M){const d=M??new w(3);return rn(r,d),en(d,f,d)}function D(r,f,M){const d=M??new w(3);return J(r)>f?u(r,f,d):Y(r,d)}function g(r,f,M){const d=M??new w(3);return xn(r,f,.5,d)}return{create:x,fromValues:I,set:O,ceil:X,floor:Q,round:k,clamp:H,add:N,addScaled:hn,angle:sn,subtract:ln,sub:Vn,equalsApproximately:cn,equals:pn,lerp:xn,lerpV:$n,max:En,min:Mn,mulScalar:en,scale:Yn,divScalar:yn,inverse:gn,invert:Fn,cross:An,dot:zn,length:J,len:Tn,lengthSq:T,lenSq:Z,distance:F,dist:Gn,distanceSq:on,distSq:Xn,normalize:rn,negate:_n,copy:Y,clone:Qn,multiply:Dn,mul:Rn,divide:dn,div:Un,random:Sn,zero:e,transformMat4:h,transformMat4Upper3x3:s,transformMat3:o,transformQuat:a,getTranslation:l,getAxis:y,getScaling:n,rotateX:i,rotateY:t,rotateZ:c,setLength:u,truncate:D,midpoint:g}}const Vt=new Map;function pt(w){let x=Vt.get(w);return x||(x=Lt(w),Vt.set(w,x)),x}function Wt(w){const x=Zt(w),I=pt(w);function O(e,h,s,o,a,l,y,n,i){const t=new w(12);return t[3]=0,t[7]=0,t[11]=0,e!==void 0&&(t[0]=e,h!==void 0&&(t[1]=h,s!==void 0&&(t[2]=s,o!==void 0&&(t[4]=o,a!==void 0&&(t[5]=a,l!==void 0&&(t[6]=l,y!==void 0&&(t[8]=y,n!==void 0&&(t[9]=n,i!==void 0&&(t[10]=i))))))))),t}function X(e,h,s,o,a,l,y,n,i,t){const c=t??new w(12);return c[0]=e,c[1]=h,c[2]=s,c[3]=0,c[4]=o,c[5]=a,c[6]=l,c[7]=0,c[8]=y,c[9]=n,c[10]=i,c[11]=0,c}function Q(e,h){const s=h??new w(12);return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=0,s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=0,s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=0,s}function k(e,h){const s=h??new w(12),o=e[0],a=e[1],l=e[2],y=e[3],n=o+o,i=a+a,t=l+l,c=o*n,u=a*n,D=a*i,g=l*n,r=l*i,f=l*t,M=y*n,d=y*i,p=y*t;return s[0]=1-D-f,s[1]=u+p,s[2]=g-d,s[3]=0,s[4]=u-p,s[5]=1-c-f,s[6]=r+M,s[7]=0,s[8]=g+d,s[9]=r-M,s[10]=1-c-D,s[11]=0,s}function H(e,h){const s=h??new w(12);return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s[4]=-e[4],s[5]=-e[5],s[6]=-e[6],s[8]=-e[8],s[9]=-e[9],s[10]=-e[10],s}function N(e,h){const s=h??new w(12);return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[8]=e[8],s[9]=e[9],s[10]=e[10],s}const hn=N;function sn(e,h){return Math.abs(e[0]-h[0])<$&&Math.abs(e[1]-h[1])<$&&Math.abs(e[2]-h[2])<$&&Math.abs(e[4]-h[4])<$&&Math.abs(e[5]-h[5])<$&&Math.abs(e[6]-h[6])<$&&Math.abs(e[8]-h[8])<$&&Math.abs(e[9]-h[9])<$&&Math.abs(e[10]-h[10])<$}function ln(e,h){return e[0]===h[0]&&e[1]===h[1]&&e[2]===h[2]&&e[4]===h[4]&&e[5]===h[5]&&e[6]===h[6]&&e[8]===h[8]&&e[9]===h[9]&&e[10]===h[10]}function Vn(e){const h=e??new w(12);return h[0]=1,h[1]=0,h[2]=0,h[4]=0,h[5]=1,h[6]=0,h[8]=0,h[9]=0,h[10]=1,h}function cn(e,h){const s=h??new w(12);if(s===e){let D;return D=e[1],e[1]=e[4],e[4]=D,D=e[2],e[2]=e[8],e[8]=D,D=e[6],e[6]=e[9],e[9]=D,s}const o=e[0*4+0],a=e[0*4+1],l=e[0*4+2],y=e[1*4+0],n=e[1*4+1],i=e[1*4+2],t=e[2*4+0],c=e[2*4+1],u=e[2*4+2];return s[0]=o,s[1]=y,s[2]=t,s[4]=a,s[5]=n,s[6]=c,s[8]=l,s[9]=i,s[10]=u,s}function pn(e,h){const s=h??new w(12),o=e[0*4+0],a=e[0*4+1],l=e[0*4+2],y=e[1*4+0],n=e[1*4+1],i=e[1*4+2],t=e[2*4+0],c=e[2*4+1],u=e[2*4+2],D=u*n-i*c,g=-u*y+i*t,r=c*y-n*t,f=1/(o*D+a*g+l*r);return s[0]=D*f,s[1]=(-u*a+l*c)*f,s[2]=(i*a-l*n)*f,s[4]=g*f,s[5]=(u*o-l*t)*f,s[6]=(-i*o+l*y)*f,s[8]=r*f,s[9]=(-c*o+a*t)*f,s[10]=(n*o-a*y)*f,s}function xn(e){const h=e[0],s=e[0*4+1],o=e[0*4+2],a=e[1*4+0],l=e[1*4+1],y=e[1*4+2],n=e[2*4+0],i=e[2*4+1],t=e[2*4+2];return h*(l*t-i*y)-a*(s*t-i*o)+n*(s*y-l*o)}const $n=pn;function En(e,h,s){const o=s??new w(12),a=e[0],l=e[1],y=e[2],n=e[4],i=e[5],t=e[6],c=e[8],u=e[9],D=e[10],g=h[0],r=h[1],f=h[2],M=h[4],d=h[5],p=h[6],A=h[8],z=h[9],B=h[10];return o[0]=a*g+n*r+c*f,o[1]=l*g+i*r+u*f,o[2]=y*g+t*r+D*f,o[4]=a*M+n*d+c*p,o[5]=l*M+i*d+u*p,o[6]=y*M+t*d+D*p,o[8]=a*A+n*z+c*B,o[9]=l*A+i*z+u*B,o[10]=y*A+t*z+D*B,o}const Mn=En;function en(e,h,s){const o=s??Vn();return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[4]=e[4],o[5]=e[5],o[6]=e[6]),o[8]=h[0],o[9]=h[1],o[10]=1,o}function Yn(e,h){const s=h??x.create();return s[0]=e[8],s[1]=e[9],s}function yn(e,h,s){const o=s??x.create(),a=h*4;return o[0]=e[a+0],o[1]=e[a+1],o}function gn(e,h,s,o){const a=o===e?e:N(e,o),l=s*4;return a[l+0]=h[0],a[l+1]=h[1],a}function Fn(e,h){const s=h??x.create(),o=e[0],a=e[1],l=e[4],y=e[5];return s[0]=Math.sqrt(o*o+a*a),s[1]=Math.sqrt(l*l+y*y),s}function An(e,h){const s=h??I.create(),o=e[0],a=e[1],l=e[2],y=e[4],n=e[5],i=e[6],t=e[8],c=e[9],u=e[10];return s[0]=Math.sqrt(o*o+a*a+l*l),s[1]=Math.sqrt(y*y+n*n+i*i),s[2]=Math.sqrt(t*t+c*c+u*u),s}function zn(e,h){const s=h??new w(12);return s[0]=1,s[1]=0,s[2]=0,s[4]=0,s[5]=1,s[6]=0,s[8]=e[0],s[9]=e[1],s[10]=1,s}function J(e,h,s){const o=s??new w(12),a=h[0],l=h[1],y=e[0],n=e[1],i=e[2],t=e[1*4+0],c=e[1*4+1],u=e[1*4+2],D=e[2*4+0],g=e[2*4+1],r=e[2*4+2];return e!==o&&(o[0]=y,o[1]=n,o[2]=i,o[4]=t,o[5]=c,o[6]=u),o[8]=y*a+t*l+D,o[9]=n*a+c*l+g,o[10]=i*a+u*l+r,o}function Tn(e,h){const s=h??new w(12),o=Math.cos(e),a=Math.sin(e);return s[0]=o,s[1]=a,s[2]=0,s[4]=-a,s[5]=o,s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function T(e,h,s){const o=s??new w(12),a=e[0*4+0],l=e[0*4+1],y=e[0*4+2],n=e[1*4+0],i=e[1*4+1],t=e[1*4+2],c=Math.cos(h),u=Math.sin(h);return o[0]=c*a+u*n,o[1]=c*l+u*i,o[2]=c*y+u*t,o[4]=c*n-u*a,o[5]=c*i-u*l,o[6]=c*t-u*y,e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10]),o}function Z(e,h){const s=h??new w(12),o=Math.cos(e),a=Math.sin(e);return s[0]=1,s[1]=0,s[2]=0,s[4]=0,s[5]=o,s[6]=a,s[8]=0,s[9]=-a,s[10]=o,s}function F(e,h,s){const o=s??new w(12),a=e[4],l=e[5],y=e[6],n=e[8],i=e[9],t=e[10],c=Math.cos(h),u=Math.sin(h);return o[4]=c*a+u*n,o[5]=c*l+u*i,o[6]=c*y+u*t,o[8]=c*n-u*a,o[9]=c*i-u*l,o[10]=c*t-u*y,e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2]),o}function Gn(e,h){const s=h??new w(12),o=Math.cos(e),a=Math.sin(e);return s[0]=o,s[1]=0,s[2]=-a,s[4]=0,s[5]=1,s[6]=0,s[8]=a,s[9]=0,s[10]=o,s}function on(e,h,s){const o=s??new w(12),a=e[0*4+0],l=e[0*4+1],y=e[0*4+2],n=e[2*4+0],i=e[2*4+1],t=e[2*4+2],c=Math.cos(h),u=Math.sin(h);return o[0]=c*a-u*n,o[1]=c*l-u*i,o[2]=c*y-u*t,o[8]=c*n+u*a,o[9]=c*i+u*l,o[10]=c*t+u*y,e!==o&&(o[4]=e[4],o[5]=e[5],o[6]=e[6]),o}const Xn=Tn,rn=T;function _n(e,h){const s=h??new w(12);return s[0]=e[0],s[1]=0,s[2]=0,s[4]=0,s[5]=e[1],s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function Y(e,h,s){const o=s??new w(12),a=h[0],l=h[1];return o[0]=a*e[0*4+0],o[1]=a*e[0*4+1],o[2]=a*e[0*4+2],o[4]=l*e[1*4+0],o[5]=l*e[1*4+1],o[6]=l*e[1*4+2],e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10]),o}function Qn(e,h){const s=h??new w(12);return s[0]=e[0],s[1]=0,s[2]=0,s[4]=0,s[5]=e[1],s[6]=0,s[8]=0,s[9]=0,s[10]=e[2],s}function Dn(e,h,s){const o=s??new w(12),a=h[0],l=h[1],y=h[2];return o[0]=a*e[0*4+0],o[1]=a*e[0*4+1],o[2]=a*e[0*4+2],o[4]=l*e[1*4+0],o[5]=l*e[1*4+1],o[6]=l*e[1*4+2],o[8]=y*e[2*4+0],o[9]=y*e[2*4+1],o[10]=y*e[2*4+2],o}function Rn(e,h){const s=h??new w(12);return s[0]=e,s[1]=0,s[2]=0,s[4]=0,s[5]=e,s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function dn(e,h,s){const o=s??new w(12);return o[0]=h*e[0*4+0],o[1]=h*e[0*4+1],o[2]=h*e[0*4+2],o[4]=h*e[1*4+0],o[5]=h*e[1*4+1],o[6]=h*e[1*4+2],e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10]),o}function Un(e,h){const s=h??new w(12);return s[0]=e,s[1]=0,s[2]=0,s[4]=0,s[5]=e,s[6]=0,s[8]=0,s[9]=0,s[10]=e,s}function Sn(e,h,s){const o=s??new w(12);return o[0]=h*e[0*4+0],o[1]=h*e[0*4+1],o[2]=h*e[0*4+2],o[4]=h*e[1*4+0],o[5]=h*e[1*4+1],o[6]=h*e[1*4+2],o[8]=h*e[2*4+0],o[9]=h*e[2*4+1],o[10]=h*e[2*4+2],o}return{clone:hn,create:O,set:X,fromMat4:Q,fromQuat:k,negate:H,copy:N,equalsApproximately:sn,equals:ln,identity:Vn,transpose:cn,inverse:pn,invert:$n,determinant:xn,mul:Mn,multiply:En,setTranslation:en,getTranslation:Yn,getAxis:yn,setAxis:gn,getScaling:Fn,get3DScaling:An,translation:zn,translate:J,rotation:Tn,rotate:T,rotationX:Z,rotateX:F,rotationY:Gn,rotateY:on,rotationZ:Xn,rotateZ:rn,scaling:_n,scale:Y,uniformScaling:Rn,uniformScale:dn,scaling3D:Qn,scale3D:Dn,uniformScaling3D:Un,uniformScale3D:Sn}}const $t=new Map;function jt(w){let x=$t.get(w);return x||(x=Wt(w),$t.set(w,x)),x}function Ht(w){const x=pt(w);function I(n,i,t,c,u,D,g,r,f,M,d,p,A,z,B,V){const q=new w(16);return n!==void 0&&(q[0]=n,i!==void 0&&(q[1]=i,t!==void 0&&(q[2]=t,c!==void 0&&(q[3]=c,u!==void 0&&(q[4]=u,D!==void 0&&(q[5]=D,g!==void 0&&(q[6]=g,r!==void 0&&(q[7]=r,f!==void 0&&(q[8]=f,M!==void 0&&(q[9]=M,d!==void 0&&(q[10]=d,p!==void 0&&(q[11]=p,A!==void 0&&(q[12]=A,z!==void 0&&(q[13]=z,B!==void 0&&(q[14]=B,V!==void 0&&(q[15]=V)))))))))))))))),q}function O(n,i,t,c,u,D,g,r,f,M,d,p,A,z,B,V,q){const P=q??new w(16);return P[0]=n,P[1]=i,P[2]=t,P[3]=c,P[4]=u,P[5]=D,P[6]=g,P[7]=r,P[8]=f,P[9]=M,P[10]=d,P[11]=p,P[12]=A,P[13]=z,P[14]=B,P[15]=V,P}function X(n,i){const t=i??new w(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(n,i){const t=i??new w(16),c=n[0],u=n[1],D=n[2],g=n[3],r=c+c,f=u+u,M=D+D,d=c*r,p=u*r,A=u*f,z=D*r,B=D*f,V=D*M,q=g*r,P=g*f,E=g*M;return t[0]=1-A-V,t[1]=p+E,t[2]=z-P,t[3]=0,t[4]=p-E,t[5]=1-d-V,t[6]=B+q,t[7]=0,t[8]=z+P,t[9]=B-q,t[10]=1-d-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(n,i){const t=i??new w(16);return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t}function H(n,i){const t=i??new w(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}const N=H;function hn(n,i){return Math.abs(n[0]-i[0])<$&&Math.abs(n[1]-i[1])<$&&Math.abs(n[2]-i[2])<$&&Math.abs(n[3]-i[3])<$&&Math.abs(n[4]-i[4])<$&&Math.abs(n[5]-i[5])<$&&Math.abs(n[6]-i[6])<$&&Math.abs(n[7]-i[7])<$&&Math.abs(n[8]-i[8])<$&&Math.abs(n[9]-i[9])<$&&Math.abs(n[10]-i[10])<$&&Math.abs(n[11]-i[11])<$&&Math.abs(n[12]-i[12])<$&&Math.abs(n[13]-i[13])<$&&Math.abs(n[14]-i[14])<$&&Math.abs(n[15]-i[15])<$}function sn(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&n[4]===i[4]&&n[5]===i[5]&&n[6]===i[6]&&n[7]===i[7]&&n[8]===i[8]&&n[9]===i[9]&&n[10]===i[10]&&n[11]===i[11]&&n[12]===i[12]&&n[13]===i[13]&&n[14]===i[14]&&n[15]===i[15]}function ln(n){const i=n??new w(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Vn(n,i){const t=i??new w(16);if(t===n){let U;return U=n[1],n[1]=n[4],n[4]=U,U=n[2],n[2]=n[8],n[8]=U,U=n[3],n[3]=n[12],n[12]=U,U=n[6],n[6]=n[9],n[9]=U,U=n[7],n[7]=n[13],n[13]=U,U=n[11],n[11]=n[14],n[14]=U,t}const c=n[0*4+0],u=n[0*4+1],D=n[0*4+2],g=n[0*4+3],r=n[1*4+0],f=n[1*4+1],M=n[1*4+2],d=n[1*4+3],p=n[2*4+0],A=n[2*4+1],z=n[2*4+2],B=n[2*4+3],V=n[3*4+0],q=n[3*4+1],P=n[3*4+2],E=n[3*4+3];return t[0]=c,t[1]=r,t[2]=p,t[3]=V,t[4]=u,t[5]=f,t[6]=A,t[7]=q,t[8]=D,t[9]=M,t[10]=z,t[11]=P,t[12]=g,t[13]=d,t[14]=B,t[15]=E,t}function cn(n,i){const t=i??new w(16),c=n[0*4+0],u=n[0*4+1],D=n[0*4+2],g=n[0*4+3],r=n[1*4+0],f=n[1*4+1],M=n[1*4+2],d=n[1*4+3],p=n[2*4+0],A=n[2*4+1],z=n[2*4+2],B=n[2*4+3],V=n[3*4+0],q=n[3*4+1],P=n[3*4+2],E=n[3*4+3],U=z*E,_=P*B,W=M*E,j=P*d,K=M*B,v=z*d,b=D*E,m=P*g,C=D*B,nn=z*g,un=D*d,fn=M*g,an=p*q,wn=V*A,qn=r*q,Bn=V*f,Pn=r*A,at=p*f,wt=c*q,ht=V*u,lt=c*A,Mt=p*u,Dt=c*f,dt=r*u,At=U*f+j*A+K*q-(_*f+W*A+v*q),zt=_*u+b*A+nn*q-(U*u+m*A+C*q),St=W*u+m*f+un*q-(j*u+b*f+fn*q),qt=v*u+C*f+fn*A-(K*u+nn*f+un*A),tn=1/(c*At+r*zt+p*St+V*qt);return t[0]=tn*At,t[1]=tn*zt,t[2]=tn*St,t[3]=tn*qt,t[4]=tn*(_*r+W*p+v*V-(U*r+j*p+K*V)),t[5]=tn*(U*c+m*p+C*V-(_*c+b*p+nn*V)),t[6]=tn*(j*c+b*r+fn*V-(W*c+m*r+un*V)),t[7]=tn*(K*c+nn*r+un*p-(v*c+C*r+fn*p)),t[8]=tn*(an*d+Bn*B+Pn*E-(wn*d+qn*B+at*E)),t[9]=tn*(wn*g+wt*B+Mt*E-(an*g+ht*B+lt*E)),t[10]=tn*(qn*g+ht*d+Dt*E-(Bn*g+wt*d+dt*E)),t[11]=tn*(at*g+lt*d+dt*B-(Pn*g+Mt*d+Dt*B)),t[12]=tn*(qn*z+at*P+wn*M-(Pn*P+an*M+Bn*z)),t[13]=tn*(lt*P+an*D+ht*z-(wt*z+Mt*P+wn*D)),t[14]=tn*(wt*M+dt*P+Bn*D-(Dt*P+qn*D+ht*M)),t[15]=tn*(Dt*z+Pn*D+Mt*M-(lt*M+dt*z+at*D)),t}function pn(n){const i=n[0],t=n[0*4+1],c=n[0*4+2],u=n[0*4+3],D=n[1*4+0],g=n[1*4+1],r=n[1*4+2],f=n[1*4+3],M=n[2*4+0],d=n[2*4+1],p=n[2*4+2],A=n[2*4+3],z=n[3*4+0],B=n[3*4+1],V=n[3*4+2],q=n[3*4+3],P=p*q,E=V*A,U=r*q,_=V*f,W=r*A,j=p*f,K=c*q,v=V*u,b=c*A,m=p*u,C=c*f,nn=r*u,un=P*g+_*d+W*B-(E*g+U*d+j*B),fn=E*t+K*d+m*B-(P*t+v*d+b*B),an=U*t+v*g+C*B-(_*t+K*g+nn*B),wn=j*t+b*g+nn*d-(W*t+m*g+C*d);return i*un+D*fn+M*an+z*wn}const xn=cn;function $n(n,i,t){const c=t??new w(16),u=n[0],D=n[1],g=n[2],r=n[3],f=n[4],M=n[5],d=n[6],p=n[7],A=n[8],z=n[9],B=n[10],V=n[11],q=n[12],P=n[13],E=n[14],U=n[15],_=i[0],W=i[1],j=i[2],K=i[3],v=i[4],b=i[5],m=i[6],C=i[7],nn=i[8],un=i[9],fn=i[10],an=i[11],wn=i[12],qn=i[13],Bn=i[14],Pn=i[15];return c[0]=u*_+f*W+A*j+q*K,c[1]=D*_+M*W+z*j+P*K,c[2]=g*_+d*W+B*j+E*K,c[3]=r*_+p*W+V*j+U*K,c[4]=u*v+f*b+A*m+q*C,c[5]=D*v+M*b+z*m+P*C,c[6]=g*v+d*b+B*m+E*C,c[7]=r*v+p*b+V*m+U*C,c[8]=u*nn+f*un+A*fn+q*an,c[9]=D*nn+M*un+z*fn+P*an,c[10]=g*nn+d*un+B*fn+E*an,c[11]=r*nn+p*un+V*fn+U*an,c[12]=u*wn+f*qn+A*Bn+q*Pn,c[13]=D*wn+M*qn+z*Bn+P*Pn,c[14]=g*wn+d*qn+B*Bn+E*Pn,c[15]=r*wn+p*qn+V*Bn+U*Pn,c}const En=$n;function Mn(n,i,t){const c=t??ln();return n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11]),c[12]=i[0],c[13]=i[1],c[14]=i[2],c[15]=1,c}function en(n,i){const t=i??x.create();return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Yn(n,i,t){const c=t??x.create(),u=i*4;return c[0]=n[u+0],c[1]=n[u+1],c[2]=n[u+2],c}function yn(n,i,t,c){const u=c===n?c:H(n,c),D=t*4;return u[D+0]=i[0],u[D+1]=i[1],u[D+2]=i[2],u}function gn(n,i){const t=i??x.create(),c=n[0],u=n[1],D=n[2],g=n[4],r=n[5],f=n[6],M=n[8],d=n[9],p=n[10];return t[0]=Math.sqrt(c*c+u*u+D*D),t[1]=Math.sqrt(g*g+r*r+f*f),t[2]=Math.sqrt(M*M+d*d+p*p),t}function Fn(n,i,t,c,u){const D=u??new w(16),g=Math.tan(Math.PI*.5-.5*n);if(D[0]=g/i,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=g,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,Number.isFinite(c)){const r=1/(t-c);D[10]=c*r,D[14]=c*t*r}else D[10]=-1,D[14]=-t;return D}function An(n,i,t,c=1/0,u){const D=u??new w(16),g=1/Math.tan(n*.5);if(D[0]=g/i,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=g,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,c===1/0)D[10]=0,D[14]=t;else{const r=1/(c-t);D[10]=t*r,D[14]=c*t*r}return D}function zn(n,i,t,c,u,D,g){const r=g??new w(16);return r[0]=2/(i-n),r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2/(c-t),r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1/(u-D),r[11]=0,r[12]=(i+n)/(n-i),r[13]=(c+t)/(t-c),r[14]=u/(u-D),r[15]=1,r}function J(n,i,t,c,u,D,g){const r=g??new w(16),f=i-n,M=c-t,d=u-D;return r[0]=2*u/f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*u/M,r[6]=0,r[7]=0,r[8]=(n+i)/f,r[9]=(c+t)/M,r[10]=D/d,r[11]=-1,r[12]=0,r[13]=0,r[14]=u*D/d,r[15]=0,r}function Tn(n,i,t,c,u,D=1/0,g){const r=g??new w(16),f=i-n,M=c-t;if(r[0]=2*u/f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*u/M,r[6]=0,r[7]=0,r[8]=(n+i)/f,r[9]=(c+t)/M,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,D===1/0)r[10]=0,r[14]=u;else{const d=1/(D-u);r[10]=u*d,r[14]=D*u*d}return r}const T=x.create(),Z=x.create(),F=x.create();function Gn(n,i,t,c){const u=c??new w(16);return x.normalize(x.subtract(i,n,F),F),x.normalize(x.cross(t,F,T),T),x.normalize(x.cross(F,T,Z),Z),u[0]=T[0],u[1]=T[1],u[2]=T[2],u[3]=0,u[4]=Z[0],u[5]=Z[1],u[6]=Z[2],u[7]=0,u[8]=F[0],u[9]=F[1],u[10]=F[2],u[11]=0,u[12]=n[0],u[13]=n[1],u[14]=n[2],u[15]=1,u}function on(n,i,t,c){const u=c??new w(16);return x.normalize(x.subtract(n,i,F),F),x.normalize(x.cross(t,F,T),T),x.normalize(x.cross(F,T,Z),Z),u[0]=T[0],u[1]=T[1],u[2]=T[2],u[3]=0,u[4]=Z[0],u[5]=Z[1],u[6]=Z[2],u[7]=0,u[8]=F[0],u[9]=F[1],u[10]=F[2],u[11]=0,u[12]=n[0],u[13]=n[1],u[14]=n[2],u[15]=1,u}function Xn(n,i,t,c){const u=c??new w(16);return x.normalize(x.subtract(n,i,F),F),x.normalize(x.cross(t,F,T),T),x.normalize(x.cross(F,T,Z),Z),u[0]=T[0],u[1]=Z[0],u[2]=F[0],u[3]=0,u[4]=T[1],u[5]=Z[1],u[6]=F[1],u[7]=0,u[8]=T[2],u[9]=Z[2],u[10]=F[2],u[11]=0,u[12]=-(T[0]*n[0]+T[1]*n[1]+T[2]*n[2]),u[13]=-(Z[0]*n[0]+Z[1]*n[1]+Z[2]*n[2]),u[14]=-(F[0]*n[0]+F[1]*n[1]+F[2]*n[2]),u[15]=1,u}function rn(n,i){const t=i??new w(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _n(n,i,t){const c=t??new w(16),u=i[0],D=i[1],g=i[2],r=n[0],f=n[1],M=n[2],d=n[3],p=n[1*4+0],A=n[1*4+1],z=n[1*4+2],B=n[1*4+3],V=n[2*4+0],q=n[2*4+1],P=n[2*4+2],E=n[2*4+3],U=n[3*4+0],_=n[3*4+1],W=n[3*4+2],j=n[3*4+3];return n!==c&&(c[0]=r,c[1]=f,c[2]=M,c[3]=d,c[4]=p,c[5]=A,c[6]=z,c[7]=B,c[8]=V,c[9]=q,c[10]=P,c[11]=E),c[12]=r*u+p*D+V*g+U,c[13]=f*u+A*D+q*g+_,c[14]=M*u+z*D+P*g+W,c[15]=d*u+B*D+E*g+j,c}function Y(n,i){const t=i??new w(16),c=Math.cos(n),u=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=u,t[7]=0,t[8]=0,t[9]=-u,t[10]=c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qn(n,i,t){const c=t??new w(16),u=n[4],D=n[5],g=n[6],r=n[7],f=n[8],M=n[9],d=n[10],p=n[11],A=Math.cos(i),z=Math.sin(i);return c[4]=A*u+z*f,c[5]=A*D+z*M,c[6]=A*g+z*d,c[7]=A*r+z*p,c[8]=A*f-z*u,c[9]=A*M-z*D,c[10]=A*d-z*g,c[11]=A*p-z*r,n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function Dn(n,i){const t=i??new w(16),c=Math.cos(n),u=Math.sin(n);return t[0]=c,t[1]=0,t[2]=-u,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=u,t[9]=0,t[10]=c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rn(n,i,t){const c=t??new w(16),u=n[0*4+0],D=n[0*4+1],g=n[0*4+2],r=n[0*4+3],f=n[2*4+0],M=n[2*4+1],d=n[2*4+2],p=n[2*4+3],A=Math.cos(i),z=Math.sin(i);return c[0]=A*u-z*f,c[1]=A*D-z*M,c[2]=A*g-z*d,c[3]=A*r-z*p,c[8]=A*f+z*u,c[9]=A*M+z*D,c[10]=A*d+z*g,c[11]=A*p+z*r,n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function dn(n,i){const t=i??new w(16),c=Math.cos(n),u=Math.sin(n);return t[0]=c,t[1]=u,t[2]=0,t[3]=0,t[4]=-u,t[5]=c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Un(n,i,t){const c=t??new w(16),u=n[0*4+0],D=n[0*4+1],g=n[0*4+2],r=n[0*4+3],f=n[1*4+0],M=n[1*4+1],d=n[1*4+2],p=n[1*4+3],A=Math.cos(i),z=Math.sin(i);return c[0]=A*u+z*f,c[1]=A*D+z*M,c[2]=A*g+z*d,c[3]=A*r+z*p,c[4]=A*f-z*u,c[5]=A*M-z*D,c[6]=A*d-z*g,c[7]=A*p-z*r,n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function Sn(n,i,t){const c=t??new w(16);let u=n[0],D=n[1],g=n[2];const r=Math.sqrt(u*u+D*D+g*g);u/=r,D/=r,g/=r;const f=u*u,M=D*D,d=g*g,p=Math.cos(i),A=Math.sin(i),z=1-p;return c[0]=f+(1-f)*p,c[1]=u*D*z+g*A,c[2]=u*g*z-D*A,c[3]=0,c[4]=u*D*z-g*A,c[5]=M+(1-M)*p,c[6]=D*g*z+u*A,c[7]=0,c[8]=u*g*z+D*A,c[9]=D*g*z-u*A,c[10]=d+(1-d)*p,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}const e=Sn;function h(n,i,t,c){const u=c??new w(16);let D=i[0],g=i[1],r=i[2];const f=Math.sqrt(D*D+g*g+r*r);D/=f,g/=f,r/=f;const M=D*D,d=g*g,p=r*r,A=Math.cos(t),z=Math.sin(t),B=1-A,V=M+(1-M)*A,q=D*g*B+r*z,P=D*r*B-g*z,E=D*g*B-r*z,U=d+(1-d)*A,_=g*r*B+D*z,W=D*r*B+g*z,j=g*r*B-D*z,K=p+(1-p)*A,v=n[0],b=n[1],m=n[2],C=n[3],nn=n[4],un=n[5],fn=n[6],an=n[7],wn=n[8],qn=n[9],Bn=n[10],Pn=n[11];return u[0]=V*v+q*nn+P*wn,u[1]=V*b+q*un+P*qn,u[2]=V*m+q*fn+P*Bn,u[3]=V*C+q*an+P*Pn,u[4]=E*v+U*nn+_*wn,u[5]=E*b+U*un+_*qn,u[6]=E*m+U*fn+_*Bn,u[7]=E*C+U*an+_*Pn,u[8]=W*v+j*nn+K*wn,u[9]=W*b+j*un+K*qn,u[10]=W*m+j*fn+K*Bn,u[11]=W*C+j*an+K*Pn,n!==u&&(u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u}const s=h;function o(n,i){const t=i??new w(16);return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(n,i,t){const c=t??new w(16),u=i[0],D=i[1],g=i[2];return c[0]=u*n[0*4+0],c[1]=u*n[0*4+1],c[2]=u*n[0*4+2],c[3]=u*n[0*4+3],c[4]=D*n[1*4+0],c[5]=D*n[1*4+1],c[6]=D*n[1*4+2],c[7]=D*n[1*4+3],c[8]=g*n[2*4+0],c[9]=g*n[2*4+1],c[10]=g*n[2*4+2],c[11]=g*n[2*4+3],n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function l(n,i){const t=i??new w(16);return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(n,i,t){const c=t??new w(16);return c[0]=i*n[0*4+0],c[1]=i*n[0*4+1],c[2]=i*n[0*4+2],c[3]=i*n[0*4+3],c[4]=i*n[1*4+0],c[5]=i*n[1*4+1],c[6]=i*n[1*4+2],c[7]=i*n[1*4+3],c[8]=i*n[2*4+0],c[9]=i*n[2*4+1],c[10]=i*n[2*4+2],c[11]=i*n[2*4+3],n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}return{create:I,set:O,fromMat3:X,fromQuat:Q,negate:k,copy:H,clone:N,equalsApproximately:hn,equals:sn,identity:ln,transpose:Vn,inverse:cn,determinant:pn,invert:xn,multiply:$n,mul:En,setTranslation:Mn,getTranslation:en,getAxis:Yn,setAxis:yn,getScaling:gn,perspective:Fn,perspectiveReverseZ:An,ortho:zn,frustum:J,frustumReverseZ:Tn,aim:Gn,cameraAim:on,lookAt:Xn,translation:rn,translate:_n,rotationX:Y,rotateX:Qn,rotationY:Dn,rotateY:Rn,rotationZ:dn,rotateZ:Un,axisRotation:Sn,rotation:e,axisRotate:h,rotate:s,scaling:o,scale:a,uniformScaling:l,uniformScale:y}}const Et=new Map;function Nt(w){let x=Et.get(w);return x||(x=Ht(w),Et.set(w,x)),x}function Jt(w){const x=pt(w);function I(e,h,s,o){const a=new w(4);return e!==void 0&&(a[0]=e,h!==void 0&&(a[1]=h,s!==void 0&&(a[2]=s,o!==void 0&&(a[3]=o)))),a}const O=I;function X(e,h,s,o,a){const l=a??new w(4);return l[0]=e,l[1]=h,l[2]=s,l[3]=o,l}function Q(e,h,s){const o=s??new w(4),a=h*.5,l=Math.sin(a);return o[0]=l*e[0],o[1]=l*e[1],o[2]=l*e[2],o[3]=Math.cos(a),o}function k(e,h){const s=h??x.create(3),o=Math.acos(e[3])*2,a=Math.sin(o*.5);return a>$?(s[0]=e[0]/a,s[1]=e[1]/a,s[2]=e[2]/a):(s[0]=1,s[1]=0,s[2]=0),{angle:o,axis:s}}function H(e,h){const s=J(e,h);return Math.acos(2*s*s-1)}function N(e,h,s){const o=s??new w(4),a=e[0],l=e[1],y=e[2],n=e[3],i=h[0],t=h[1],c=h[2],u=h[3];return o[0]=a*u+n*i+l*c-y*t,o[1]=l*u+n*t+y*i-a*c,o[2]=y*u+n*c+a*t-l*i,o[3]=n*u-a*i-l*t-y*c,o}const hn=N;function sn(e,h,s){const o=s??new w(4),a=h*.5,l=e[0],y=e[1],n=e[2],i=e[3],t=Math.sin(a),c=Math.cos(a);return o[0]=l*c+i*t,o[1]=y*c+n*t,o[2]=n*c-y*t,o[3]=i*c-l*t,o}function ln(e,h,s){const o=s??new w(4),a=h*.5,l=e[0],y=e[1],n=e[2],i=e[3],t=Math.sin(a),c=Math.cos(a);return o[0]=l*c-n*t,o[1]=y*c+i*t,o[2]=n*c+l*t,o[3]=i*c-y*t,o}function Vn(e,h,s){const o=s??new w(4),a=h*.5,l=e[0],y=e[1],n=e[2],i=e[3],t=Math.sin(a),c=Math.cos(a);return o[0]=l*c+y*t,o[1]=y*c-l*t,o[2]=n*c+i*t,o[3]=i*c-n*t,o}function cn(e,h,s,o){const a=o??new w(4),l=e[0],y=e[1],n=e[2],i=e[3];let t=h[0],c=h[1],u=h[2],D=h[3],g=l*t+y*c+n*u+i*D;g<0&&(g=-g,t=-t,c=-c,u=-u,D=-D);let r,f;if(1-g>$){const M=Math.acos(g),d=Math.sin(M);r=Math.sin((1-s)*M)/d,f=Math.sin(s*M)/d}else r=1-s,f=s;return a[0]=r*l+f*t,a[1]=r*y+f*c,a[2]=r*n+f*u,a[3]=r*i+f*D,a}function pn(e,h){const s=h??new w(4),o=e[0],a=e[1],l=e[2],y=e[3],n=o*o+a*a+l*l+y*y,i=n?1/n:0;return s[0]=-o*i,s[1]=-a*i,s[2]=-l*i,s[3]=y*i,s}function xn(e,h){const s=h??new w(4);return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s[3]=e[3],s}function $n(e,h){const s=h??new w(4),o=e[0]+e[5]+e[10];if(o>0){const a=Math.sqrt(o+1);s[3]=.5*a;const l=.5/a;s[0]=(e[6]-e[9])*l,s[1]=(e[8]-e[2])*l,s[2]=(e[1]-e[4])*l}else{let a=0;e[5]>e[0]&&(a=1),e[10]>e[a*4+a]&&(a=2);const l=(a+1)%3,y=(a+2)%3,n=Math.sqrt(e[a*4+a]-e[l*4+l]-e[y*4+y]+1);s[a]=.5*n;const i=.5/n;s[3]=(e[l*4+y]-e[y*4+l])*i,s[l]=(e[l*4+a]+e[a*4+l])*i,s[y]=(e[y*4+a]+e[a*4+y])*i}return s}function En(e,h,s,o,a){const l=a??new w(4),y=e*.5,n=h*.5,i=s*.5,t=Math.sin(y),c=Math.cos(y),u=Math.sin(n),D=Math.cos(n),g=Math.sin(i),r=Math.cos(i);switch(o){case"xyz":l[0]=t*D*r+c*u*g,l[1]=c*u*r-t*D*g,l[2]=c*D*g+t*u*r,l[3]=c*D*r-t*u*g;break;case"xzy":l[0]=t*D*r-c*u*g,l[1]=c*u*r-t*D*g,l[2]=c*D*g+t*u*r,l[3]=c*D*r+t*u*g;break;case"yxz":l[0]=t*D*r+c*u*g,l[1]=c*u*r-t*D*g,l[2]=c*D*g-t*u*r,l[3]=c*D*r+t*u*g;break;case"yzx":l[0]=t*D*r+c*u*g,l[1]=c*u*r+t*D*g,l[2]=c*D*g-t*u*r,l[3]=c*D*r-t*u*g;break;case"zxy":l[0]=t*D*r-c*u*g,l[1]=c*u*r+t*D*g,l[2]=c*D*g+t*u*r,l[3]=c*D*r-t*u*g;break;case"zyx":l[0]=t*D*r-c*u*g,l[1]=c*u*r+t*D*g,l[2]=c*D*g-t*u*r,l[3]=c*D*r+t*u*g;break;default:throw new Error(`Unknown rotation order: ${o}`)}return l}function Mn(e,h){const s=h??new w(4);return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s}const en=Mn;function Yn(e,h,s){const o=s??new w(4);return o[0]=e[0]+h[0],o[1]=e[1]+h[1],o[2]=e[2]+h[2],o[3]=e[3]+h[3],o}function yn(e,h,s){const o=s??new w(4);return o[0]=e[0]-h[0],o[1]=e[1]-h[1],o[2]=e[2]-h[2],o[3]=e[3]-h[3],o}const gn=yn;function Fn(e,h,s){const o=s??new w(4);return o[0]=e[0]*h,o[1]=e[1]*h,o[2]=e[2]*h,o[3]=e[3]*h,o}const An=Fn;function zn(e,h,s){const o=s??new w(4);return o[0]=e[0]/h,o[1]=e[1]/h,o[2]=e[2]/h,o[3]=e[3]/h,o}function J(e,h){return e[0]*h[0]+e[1]*h[1]+e[2]*h[2]+e[3]*h[3]}function Tn(e,h,s,o){const a=o??new w(4);return a[0]=e[0]+s*(h[0]-e[0]),a[1]=e[1]+s*(h[1]-e[1]),a[2]=e[2]+s*(h[2]-e[2]),a[3]=e[3]+s*(h[3]-e[3]),a}function T(e){const h=e[0],s=e[1],o=e[2],a=e[3];return Math.sqrt(h*h+s*s+o*o+a*a)}const Z=T;function F(e){const h=e[0],s=e[1],o=e[2],a=e[3];return h*h+s*s+o*o+a*a}const Gn=F;function on(e,h){const s=h??new w(4),o=e[0],a=e[1],l=e[2],y=e[3],n=Math.sqrt(o*o+a*a+l*l+y*y);return n>1e-5?(s[0]=o/n,s[1]=a/n,s[2]=l/n,s[3]=y/n):(s[0]=0,s[1]=0,s[2]=0,s[3]=1),s}function Xn(e,h){return Math.abs(e[0]-h[0])<$&&Math.abs(e[1]-h[1])<$&&Math.abs(e[2]-h[2])<$&&Math.abs(e[3]-h[3])<$}function rn(e,h){return e[0]===h[0]&&e[1]===h[1]&&e[2]===h[2]&&e[3]===h[3]}function _n(e){const h=e??new w(4);return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}const Y=x.create(),Qn=x.create(),Dn=x.create();function Rn(e,h,s){const o=s??new w(4),a=x.dot(e,h);return a<-.999999?(x.cross(Qn,e,Y),x.len(Y)<1e-6&&x.cross(Dn,e,Y),x.normalize(Y,Y),Q(Y,Math.PI,o),o):a>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):(x.cross(e,h,Y),o[0]=Y[0],o[1]=Y[1],o[2]=Y[2],o[3]=1+a,on(o,o))}const dn=new w(4),Un=new w(4);function Sn(e,h,s,o,a,l){const y=l??new w(4);return cn(e,o,a,dn),cn(h,s,a,Un),cn(dn,Un,2*a*(1-a),y),y}return{create:I,fromValues:O,set:X,fromAxisAngle:Q,toAxisAngle:k,angle:H,multiply:N,mul:hn,rotateX:sn,rotateY:ln,rotateZ:Vn,slerp:cn,inverse:pn,conjugate:xn,fromMat:$n,fromEuler:En,copy:Mn,clone:en,add:Yn,subtract:yn,sub:gn,mulScalar:Fn,scale:An,divScalar:zn,dot:J,lerp:Tn,length:T,len:Z,lengthSq:F,lenSq:Gn,normalize:on,equalsApproximately:Xn,equals:rn,identity:_n,rotationTo:Rn,sqlerp:Sn}}const Ft=new Map;function Kt(w){let x=Ft.get(w);return x||(x=Jt(w),Ft.set(w,x)),x}function kt(w){function x(s,o,a,l){const y=new w(4);return s!==void 0&&(y[0]=s,o!==void 0&&(y[1]=o,a!==void 0&&(y[2]=a,l!==void 0&&(y[3]=l)))),y}const I=x;function O(s,o,a,l,y){const n=y??new w(4);return n[0]=s,n[1]=o,n[2]=a,n[3]=l,n}function X(s,o){const a=o??new w(4);return a[0]=Math.ceil(s[0]),a[1]=Math.ceil(s[1]),a[2]=Math.ceil(s[2]),a[3]=Math.ceil(s[3]),a}function Q(s,o){const a=o??new w(4);return a[0]=Math.floor(s[0]),a[1]=Math.floor(s[1]),a[2]=Math.floor(s[2]),a[3]=Math.floor(s[3]),a}function k(s,o){const a=o??new w(4);return a[0]=Math.round(s[0]),a[1]=Math.round(s[1]),a[2]=Math.round(s[2]),a[3]=Math.round(s[3]),a}function H(s,o=0,a=1,l){const y=l??new w(4);return y[0]=Math.min(a,Math.max(o,s[0])),y[1]=Math.min(a,Math.max(o,s[1])),y[2]=Math.min(a,Math.max(o,s[2])),y[3]=Math.min(a,Math.max(o,s[3])),y}function N(s,o,a){const l=a??new w(4);return l[0]=s[0]+o[0],l[1]=s[1]+o[1],l[2]=s[2]+o[2],l[3]=s[3]+o[3],l}function hn(s,o,a,l){const y=l??new w(4);return y[0]=s[0]+o[0]*a,y[1]=s[1]+o[1]*a,y[2]=s[2]+o[2]*a,y[3]=s[3]+o[3]*a,y}function sn(s,o,a){const l=a??new w(4);return l[0]=s[0]-o[0],l[1]=s[1]-o[1],l[2]=s[2]-o[2],l[3]=s[3]-o[3],l}const ln=sn;function Vn(s,o){return Math.abs(s[0]-o[0])<$&&Math.abs(s[1]-o[1])<$&&Math.abs(s[2]-o[2])<$&&Math.abs(s[3]-o[3])<$}function cn(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]&&s[3]===o[3]}function pn(s,o,a,l){const y=l??new w(4);return y[0]=s[0]+a*(o[0]-s[0]),y[1]=s[1]+a*(o[1]-s[1]),y[2]=s[2]+a*(o[2]-s[2]),y[3]=s[3]+a*(o[3]-s[3]),y}function xn(s,o,a,l){const y=l??new w(4);return y[0]=s[0]+a[0]*(o[0]-s[0]),y[1]=s[1]+a[1]*(o[1]-s[1]),y[2]=s[2]+a[2]*(o[2]-s[2]),y[3]=s[3]+a[3]*(o[3]-s[3]),y}function $n(s,o,a){const l=a??new w(4);return l[0]=Math.max(s[0],o[0]),l[1]=Math.max(s[1],o[1]),l[2]=Math.max(s[2],o[2]),l[3]=Math.max(s[3],o[3]),l}function En(s,o,a){const l=a??new w(4);return l[0]=Math.min(s[0],o[0]),l[1]=Math.min(s[1],o[1]),l[2]=Math.min(s[2],o[2]),l[3]=Math.min(s[3],o[3]),l}function Mn(s,o,a){const l=a??new w(4);return l[0]=s[0]*o,l[1]=s[1]*o,l[2]=s[2]*o,l[3]=s[3]*o,l}const en=Mn;function Yn(s,o,a){const l=a??new w(4);return l[0]=s[0]/o,l[1]=s[1]/o,l[2]=s[2]/o,l[3]=s[3]/o,l}function yn(s,o){const a=o??new w(4);return a[0]=1/s[0],a[1]=1/s[1],a[2]=1/s[2],a[3]=1/s[3],a}const gn=yn;function Fn(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]}function An(s){const o=s[0],a=s[1],l=s[2],y=s[3];return Math.sqrt(o*o+a*a+l*l+y*y)}const zn=An;function J(s){const o=s[0],a=s[1],l=s[2],y=s[3];return o*o+a*a+l*l+y*y}const Tn=J;function T(s,o){const a=s[0]-o[0],l=s[1]-o[1],y=s[2]-o[2],n=s[3]-o[3];return Math.sqrt(a*a+l*l+y*y+n*n)}const Z=T;function F(s,o){const a=s[0]-o[0],l=s[1]-o[1],y=s[2]-o[2],n=s[3]-o[3];return a*a+l*l+y*y+n*n}const Gn=F;function on(s,o){const a=o??new w(4),l=s[0],y=s[1],n=s[2],i=s[3],t=Math.sqrt(l*l+y*y+n*n+i*i);return t>1e-5?(a[0]=l/t,a[1]=y/t,a[2]=n/t,a[3]=i/t):(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a}function Xn(s,o){const a=o??new w(4);return a[0]=-s[0],a[1]=-s[1],a[2]=-s[2],a[3]=-s[3],a}function rn(s,o){const a=o??new w(4);return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a}const _n=rn;function Y(s,o,a){const l=a??new w(4);return l[0]=s[0]*o[0],l[1]=s[1]*o[1],l[2]=s[2]*o[2],l[3]=s[3]*o[3],l}const Qn=Y;function Dn(s,o,a){const l=a??new w(4);return l[0]=s[0]/o[0],l[1]=s[1]/o[1],l[2]=s[2]/o[2],l[3]=s[3]/o[3],l}const Rn=Dn;function dn(s){const o=s??new w(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}function Un(s,o,a){const l=a??new w(4),y=s[0],n=s[1],i=s[2],t=s[3];return l[0]=o[0]*y+o[4]*n+o[8]*i+o[12]*t,l[1]=o[1]*y+o[5]*n+o[9]*i+o[13]*t,l[2]=o[2]*y+o[6]*n+o[10]*i+o[14]*t,l[3]=o[3]*y+o[7]*n+o[11]*i+o[15]*t,l}function Sn(s,o,a){const l=a??new w(4);return on(s,l),Mn(l,o,l)}function e(s,o,a){const l=a??new w(4);return An(s)>o?Sn(s,o,l):rn(s,l)}function h(s,o,a){const l=a??new w(4);return pn(s,o,.5,l)}return{create:x,fromValues:I,set:O,ceil:X,floor:Q,round:k,clamp:H,add:N,addScaled:hn,subtract:sn,sub:ln,equalsApproximately:Vn,equals:cn,lerp:pn,lerpV:xn,max:$n,min:En,mulScalar:Mn,scale:en,divScalar:Yn,inverse:yn,invert:gn,dot:Fn,length:An,len:zn,lengthSq:J,lenSq:Tn,distance:T,dist:Z,distanceSq:F,distSq:Gn,normalize:on,negate:Xn,copy:rn,clone:_n,multiply:Y,mul:Qn,divide:Dn,div:Rn,zero:dn,transformMat4:Un,setLength:Sn,truncate:e,midpoint:h}}const Tt=new Map;function vt(w){let x=Tt.get(w);return x||(x=kt(w),Tt.set(w,x)),x}function gt(w,x,I,O,X,Q){return{mat3:jt(w),mat4:Nt(x),quat:Kt(I),vec2:Zt(O),vec3:pt(X),vec4:vt(Q)}}const{mat3:Ln,mat4:ns,quat:ts,vec2:Ut,vec3:ss,vec4:cs}=gt(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);gt(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);gt(Qt,Array,Array,Array,Array,Array);var Zn,st,jn,it,rt,ut,ft,Jn,Hn,ct,L,bn,In,Kn,kn,Nn,mn,On,et,Cn,nt,ot,vn,Wn,Ot,Yt,Gt,yt;class es{constructor(x){G(this,Wn);G(this,Zn);G(this,st,0);G(this,jn,!1);G(this,it,Ln.create());G(this,rt,Ln.create());G(this,ut,Ln.create());G(this,ft,Ln.create());G(this,Jn);G(this,Hn);G(this,ct);G(this,L);G(this,bn);G(this,In);G(this,Kn);G(this,kn);G(this,Nn);G(this,mn,new Float32Array([1,1]));G(this,On,new Float32Array([0,0]));G(this,et,new Float32Array([0,0]));G(this,Cn,new Float32Array([0,0]));G(this,nt,[void 0]);G(this,ot);G(this,vn,Pt({min:Ut.create(),max:Ut.create()}));R(this,Jn,x.label??"Shape"),R(this,Zn,x.radius??0),R(this,L,x.renderer),R(this,Hn,x.segments);const{startAngle:I,endAngle:O,innerRadius:X}=x;tt(this,Wn,Ot).call(this,I,O,X),tt(this,Wn,Yt).call(this),tt(this,Wn,Gt).call(this),this.Scale=S(this,mn),this.Origin=S(this,On),this.Rotation=S(this,st),this.Position=S(this,Cn)}Update(){return S(this,L).SetVertexBuffers(S(this,kn)),S(this,L).SetIndexBuffer(S(this,Kn)),S(this,L).SetBindGroups(S(this,nt)),tt(this,Wn,yt).call(this)}Render(x=!0){S(this,L).SavePipelineState(),S(this,L).Render(S(this.Update(),ct),x),S(this,L).RestorePipelineState()}AddBindGroups(x){S(this,nt).push(...Array.isArray(x)&&x||[x])}set Color(x){S(this,bn).set(Array.isArray(x)||ArrayBuffer.isView(x)?x:x.rgba),S(this,L).WriteBuffer(S(this,Nn),S(this,bn),S(this,ot).color)}get Color(){return S(this,bn)}set Position(x){S(this,Cn).set(x),Ln.translation(S(this,Cn),S(this,ft)),R(this,jn,!0)}get Position(){return S(this,Cn)}set Rotation(x){Ln.rotation(R(this,st,x),S(this,ut)),R(this,jn,!0)}get Rotation(){return S(this,st)}set Scale(x){S(this,mn).set(x),Ln.scaling(S(this,mn),S(this,rt)),R(this,jn,!0)}get Scale(){return S(this,mn)}set Origin(x){S(this,On)[0]=x[0],S(this,On)[1]=x[1],S(this,On)[0]*=-S(this,Zn),S(this,On)[1]*=-S(this,Zn),Ln.translation(S(this,On),S(this,it)),S(this,On)[0]=x[0]||0,S(this,On)[1]=x[1]||0,R(this,jn,!0)}get Origin(){return S(this,On)}get Center(){return S(tt(this,Wn,yt).call(this),et)}get Vertices(){return S(this,ct)}get Transform(){return S(this,In)}get BoundingBox(){return S(this,vn)}Destroy(){S(this,nt).splice(0),R(this,Kn,S(this,Kn).destroy()),R(this,kn,S(this,kn).destroy()),R(this,Nn,S(this,Nn).destroy())}}Zn=new WeakMap,st=new WeakMap,jn=new WeakMap,it=new WeakMap,rt=new WeakMap,ut=new WeakMap,ft=new WeakMap,Jn=new WeakMap,Hn=new WeakMap,ct=new WeakMap,L=new WeakMap,bn=new WeakMap,In=new WeakMap,Kn=new WeakMap,kn=new WeakMap,Nn=new WeakMap,mn=new WeakMap,On=new WeakMap,et=new WeakMap,Cn=new WeakMap,nt=new WeakMap,ot=new WeakMap,vn=new WeakMap,Wn=new WeakSet,Ot=function(x=0,I=Xt.TAU,O=0){const X=I-x,Q=new Float32Array((S(this,Hn)+1)*2*3);for(let k=0,H=0;H<=S(this,Hn);++H){const N=x+H*X/S(this,Hn),hn=Math.cos(N),sn=Math.sin(N);Q[k++]=hn*S(this,Zn),Q[k++]=sn*S(this,Zn),Q[k++]=hn*O,Q[k++]=sn*O}R(this,kn,S(this,L).CreateVertexBuffer(Q,{label:`${S(this,Jn)} Vertex Buffer`})),S(this,L).WriteBuffer(S(this,kn),Q)},Yt=function(){const x=new Uint32Array(R(this,ct,S(this,Hn)*6));for(let I=0,O=0;O<S(this,Hn);++O){const X=O*2;x[I++]=X+1,x[I++]=X+3,x[I++]=X+2,x[I++]=X+2,x[I++]=X+0,x[I++]=X+1}R(this,Kn,S(this,L).CreateIndexBuffer(x,{label:`${S(this,Jn)} Index Buffer`})),S(this,L).WriteBuffer(S(this,Kn),x)},Gt=function(){const{buffer:x,shape:{color:I,matrix:O}}=S(this,L).CreateUniformBuffer("shape",{label:`${S(this,Jn)} Uniform Buffer`});R(this,Nn,x),R(this,In,O),R(this,bn,I),S(this,nt)[0]=S(this,L).CreateBindGroup(S(this,L).CreateBindGroupEntries([{buffer:S(this,L).ResolutionBuffer},{buffer:S(this,Nn)}]),0,`${S(this,Jn)} Bind Group`),R(this,ot,Pt({matrix:I.length*Float32Array.BYTES_PER_ELEMENT,color:0*Float32Array.BYTES_PER_ELEMENT}))},yt=function(){if(S(this,jn)){Ln.multiply(S(this,ft),S(this,ut),S(this,In)),Ln.multiply(S(this,In),S(this,rt),S(this,In)),Ln.multiply(S(this,In),S(this,it),S(this,In)),S(this,L).WriteBuffer(S(this,Nn),S(this,In),S(this,ot).matrix);const x=S(this,et)[0]=S(this,In)[8],I=S(this,et)[1]=S(this,In)[9];S(this,vn).min[0]=x-S(this,Zn),S(this,vn).min[1]=I-S(this,Zn),S(this,vn).max[0]=x+S(this,Zn),S(this,vn).max[1]=I+S(this,Zn),R(this,jn,!1)}return this};export{Ct as S,es as a};

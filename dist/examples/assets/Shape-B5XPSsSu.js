var Bt=f=>{throw TypeError(f)};var pt=(f,x,G)=>x.has(f)||Bt("Cannot "+G);var E=(f,x,G)=>(pt(f,x,"read from private field"),G?G.call(f):x.get(f)),K=(f,x,G)=>x.has(f)?Bt("Cannot add the same private member more than once"):x instanceof WeakSet?x.add(f):x.set(f,G),sn=(f,x,G,J)=>(pt(f,x,"write to private field"),J?J.call(f,G):x.set(f,G),G),mn=(f,x,G)=>(pt(f,x,"access private method"),G);import{a as Pt,T as Yt,E as Lt,N as Zt}from"./index-Dlk0Bfe3.js";var ts="struct Shape{color: vec4f,matrix: mat3x3f};@group(0)@binding(0)var<uniform>resolution: vec2f;fn GetClipSpace(position: vec2f)->vec2f{let clipSpace=position/resolution*2-1;return clipSpace*vec2f(1,-1);}@group(0)@binding(1)var<uniform>shape: Shape;fn GetVertexClipSpace(position: vec2f)->vec4f{let matrixPosition=shape.matrix*vec3f(position,1);let clipSpace=GetClipSpace(matrixPosition.xy);return vec4f(clipSpace,0.0,1.0);}@vertex fn vertex(@location(0)position: vec2f)->@builtin(position)vec4f {return GetVertexClipSpace(position);}";function Xt(f,x){return class extends f{constructor(...G){super(...G),x(this)}}}const Qt=Xt(Array,f=>f.fill(0));let L=1e-6;function Nt(f){function x(n=0,e=0){const t=new f(2);return n!==void 0&&(t[0]=n,e!==void 0&&(t[1]=e)),t}const G=x;function J(n,e,t){const s=t??new f(2);return s[0]=n,s[1]=e,s}function k(n,e){const t=e??new f(2);return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function b(n,e){const t=e??new f(2);return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function on(n,e){const t=e??new f(2);return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function C(n,e=0,t=1,s){const u=s??new f(2);return u[0]=Math.min(t,Math.max(e,n[0])),u[1]=Math.min(t,Math.max(e,n[1])),u}function Mn(n,e,t){const s=t??new f(2);return s[0]=n[0]+e[0],s[1]=n[1]+e[1],s}function zn(n,e,t,s){const u=s??new f(2);return u[0]=n[0]+e[0]*t,u[1]=n[1]+e[1]*t,u}function Dn(n,e){const t=n[0],s=n[1],u=e[0],D=e[1],A=Math.sqrt(t*t+s*s),c=Math.sqrt(u*u+D*D),r=A*c,h=r&&Un(n,e)/r;return Math.acos(h)}function dn(n,e,t){const s=t??new f(2);return s[0]=n[0]-e[0],s[1]=n[1]-e[1],s}const Yn=dn;function rn(n,e){return Math.abs(n[0]-e[0])<L&&Math.abs(n[1]-e[1])<L}function Rn(n,e){return n[0]===e[0]&&n[1]===e[1]}function qn(n,e,t,s){const u=s??new f(2);return u[0]=n[0]+t*(e[0]-n[0]),u[1]=n[1]+t*(e[1]-n[1]),u}function Bn(n,e,t,s){const u=s??new f(2);return u[0]=n[0]+t[0]*(e[0]-n[0]),u[1]=n[1]+t[1]*(e[1]-n[1]),u}function Ln(n,e,t){const s=t??new f(2);return s[0]=Math.max(n[0],e[0]),s[1]=Math.max(n[1],e[1]),s}function Sn(n,e,t){const s=t??new f(2);return s[0]=Math.min(n[0],e[0]),s[1]=Math.min(n[1],e[1]),s}function pn(n,e,t){const s=t??new f(2);return s[0]=n[0]*e,s[1]=n[1]*e,s}const Zn=pn;function Pn(n,e,t){const s=t??new f(2);return s[0]=n[0]/e,s[1]=n[1]/e,s}function En(n,e){const t=e??new f(2);return t[0]=1/n[0],t[1]=1/n[1],t}const Gn=En;function In(n,e,t){const s=t??new f(3),u=n[0]*e[1]-n[1]*e[0];return s[0]=0,s[1]=0,s[2]=u,s}function Un(n,e){return n[0]*e[0]+n[1]*e[1]}function cn(n){const e=n[0],t=n[1];return Math.sqrt(e*e+t*t)}const Xn=cn;function W(n){const e=n[0],t=n[1];return e*e+t*t}const H=W;function X(n,e){const t=n[0]-e[0],s=n[1]-e[1];return Math.sqrt(t*t+s*s)}const w=X;function B(n,e){const t=n[0]-e[0],s=n[1]-e[1];return t*t+s*s}const p=B;function S(n,e){const t=e??new f(2),s=n[0],u=n[1],D=Math.sqrt(s*s+u*u);return D>1e-5?(t[0]=s/D,t[1]=u/D):(t[0]=0,t[1]=0),t}function V(n,e){const t=e??new f(2);return t[0]=-n[0],t[1]=-n[1],t}function I(n,e){const t=e??new f(2);return t[0]=n[0],t[1]=n[1],t}const _=I;function Y(n,e,t){const s=t??new f(2);return s[0]=n[0]*e[0],s[1]=n[1]*e[1],s}const Q=Y;function F(n,e,t){const s=t??new f(2);return s[0]=n[0]/e[0],s[1]=n[1]/e[1],s}const R=F;function j(n=1,e){const t=e??new f(2),s=Math.random()*2*Math.PI;return t[0]=Math.cos(s)*n,t[1]=Math.sin(s)*n,t}function d(n){const e=n??new f(2);return e[0]=0,e[1]=0,e}function q(n,e,t){const s=t??new f(2),u=n[0],D=n[1];return s[0]=u*e[0]+D*e[4]+e[12],s[1]=u*e[1]+D*e[5]+e[13],s}function o(n,e,t){const s=t??new f(2),u=n[0],D=n[1];return s[0]=e[0]*u+e[4]*D+e[8],s[1]=e[1]*u+e[5]*D+e[9],s}function i(n,e,t,s){const u=s??new f(2),D=n[0]-e[0],A=n[1]-e[1],c=Math.sin(t),r=Math.cos(t);return u[0]=D*r-A*c+e[0],u[1]=D*c+A*r+e[1],u}function a(n,e,t){const s=t??new f(2);return S(n,s),pn(s,e,s)}function M(n,e,t){const s=t??new f(2);return cn(n)>e?a(n,e,s):I(n,s)}function P(n,e,t){const s=t??new f(2);return qn(n,e,.5,s)}return{create:x,fromValues:G,set:J,ceil:k,floor:b,round:on,clamp:C,add:Mn,addScaled:zn,angle:Dn,subtract:dn,sub:Yn,equalsApproximately:rn,equals:Rn,lerp:qn,lerpV:Bn,max:Ln,min:Sn,mulScalar:pn,scale:Zn,divScalar:Pn,inverse:En,invert:Gn,cross:In,dot:Un,length:cn,len:Xn,lengthSq:W,lenSq:H,distance:X,dist:w,distanceSq:B,distSq:p,normalize:S,negate:V,copy:I,clone:_,multiply:Y,mul:Q,divide:F,div:R,random:j,zero:d,transformMat4:q,transformMat3:o,rotate:i,setLength:a,truncate:M,midpoint:P}}const Et=new Map;function Rt(f){let x=Et.get(f);return x||(x=Nt(f),Et.set(f,x)),x}function Wt(f){const x=Rt(f);function G(w,B,p,S,V,I,_,Y,Q){const F=new f(12);return F[3]=0,F[7]=0,F[11]=0,w!==void 0&&(F[0]=w,B!==void 0&&(F[1]=B,p!==void 0&&(F[2]=p,S!==void 0&&(F[4]=S,V!==void 0&&(F[5]=V,I!==void 0&&(F[6]=I,_!==void 0&&(F[8]=_,Y!==void 0&&(F[9]=Y,Q!==void 0&&(F[10]=Q))))))))),F}function J(w,B,p,S,V,I,_,Y,Q,F){const R=F??new f(12);return R[0]=w,R[1]=B,R[2]=p,R[3]=0,R[4]=S,R[5]=V,R[6]=I,R[7]=0,R[8]=_,R[9]=Y,R[10]=Q,R[11]=0,R}function k(w,B){const p=B??new f(12);return p[0]=w[0],p[1]=w[1],p[2]=w[2],p[3]=0,p[4]=w[4],p[5]=w[5],p[6]=w[6],p[7]=0,p[8]=w[8],p[9]=w[9],p[10]=w[10],p[11]=0,p}function b(w,B){const p=B??new f(12),S=w[0],V=w[1],I=w[2],_=w[3],Y=S+S,Q=V+V,F=I+I,R=S*Y,j=V*Y,d=V*Q,q=I*Y,o=I*Q,i=I*F,a=_*Y,M=_*Q,P=_*F;return p[0]=1-d-i,p[1]=j+P,p[2]=q-M,p[3]=0,p[4]=j-P,p[5]=1-R-i,p[6]=o+a,p[7]=0,p[8]=q+M,p[9]=o-a,p[10]=1-R-d,p[11]=0,p}function on(w,B){const p=B??new f(12);return p[0]=-w[0],p[1]=-w[1],p[2]=-w[2],p[4]=-w[4],p[5]=-w[5],p[6]=-w[6],p[8]=-w[8],p[9]=-w[9],p[10]=-w[10],p}function C(w,B){const p=B??new f(12);return p[0]=w[0],p[1]=w[1],p[2]=w[2],p[4]=w[4],p[5]=w[5],p[6]=w[6],p[8]=w[8],p[9]=w[9],p[10]=w[10],p}const Mn=C;function zn(w,B){return Math.abs(w[0]-B[0])<L&&Math.abs(w[1]-B[1])<L&&Math.abs(w[2]-B[2])<L&&Math.abs(w[4]-B[4])<L&&Math.abs(w[5]-B[5])<L&&Math.abs(w[6]-B[6])<L&&Math.abs(w[8]-B[8])<L&&Math.abs(w[9]-B[9])<L&&Math.abs(w[10]-B[10])<L}function Dn(w,B){return w[0]===B[0]&&w[1]===B[1]&&w[2]===B[2]&&w[4]===B[4]&&w[5]===B[5]&&w[6]===B[6]&&w[8]===B[8]&&w[9]===B[9]&&w[10]===B[10]}function dn(w){const B=w??new f(12);return B[0]=1,B[1]=0,B[2]=0,B[4]=0,B[5]=1,B[6]=0,B[8]=0,B[9]=0,B[10]=1,B}function Yn(w,B){const p=B??new f(12);if(p===w){let d;return d=w[1],w[1]=w[4],w[4]=d,d=w[2],w[2]=w[8],w[8]=d,d=w[6],w[6]=w[9],w[9]=d,p}const S=w[0*4+0],V=w[0*4+1],I=w[0*4+2],_=w[1*4+0],Y=w[1*4+1],Q=w[1*4+2],F=w[2*4+0],R=w[2*4+1],j=w[2*4+2];return p[0]=S,p[1]=_,p[2]=F,p[4]=V,p[5]=Y,p[6]=R,p[8]=I,p[9]=Q,p[10]=j,p}function rn(w,B){const p=B??new f(12),S=w[0*4+0],V=w[0*4+1],I=w[0*4+2],_=w[1*4+0],Y=w[1*4+1],Q=w[1*4+2],F=w[2*4+0],R=w[2*4+1],j=w[2*4+2],d=j*Y-Q*R,q=-j*_+Q*F,o=R*_-Y*F,i=1/(S*d+V*q+I*o);return p[0]=d*i,p[1]=(-j*V+I*R)*i,p[2]=(Q*V-I*Y)*i,p[4]=q*i,p[5]=(j*S-I*F)*i,p[6]=(-Q*S+I*_)*i,p[8]=o*i,p[9]=(-R*S+V*F)*i,p[10]=(Y*S-V*_)*i,p}function Rn(w){const B=w[0],p=w[0*4+1],S=w[0*4+2],V=w[1*4+0],I=w[1*4+1],_=w[1*4+2],Y=w[2*4+0],Q=w[2*4+1],F=w[2*4+2];return B*(I*F-Q*_)-V*(p*F-Q*S)+Y*(p*_-I*S)}const qn=rn;function Bn(w,B,p){const S=p??new f(12),V=w[0],I=w[1],_=w[2],Y=w[4],Q=w[5],F=w[6],R=w[8],j=w[9],d=w[10],q=B[0],o=B[1],i=B[2],a=B[4],M=B[5],P=B[6],n=B[8],e=B[9],t=B[10];return S[0]=V*q+Y*o+R*i,S[1]=I*q+Q*o+j*i,S[2]=_*q+F*o+d*i,S[4]=V*a+Y*M+R*P,S[5]=I*a+Q*M+j*P,S[6]=_*a+F*M+d*P,S[8]=V*n+Y*e+R*t,S[9]=I*n+Q*e+j*t,S[10]=_*n+F*e+d*t,S}const Ln=Bn;function Sn(w,B,p){const S=p??dn();return w!==S&&(S[0]=w[0],S[1]=w[1],S[2]=w[2],S[4]=w[4],S[5]=w[5],S[6]=w[6]),S[8]=B[0],S[9]=B[1],S[10]=1,S}function pn(w,B){const p=B??x.create();return p[0]=w[8],p[1]=w[9],p}function Zn(w,B,p){const S=p??x.create(),V=B*4;return S[0]=w[V+0],S[1]=w[V+1],S}function Pn(w,B,p,S){const V=S===w?w:C(w,S),I=p*4;return V[I+0]=B[0],V[I+1]=B[1],V}function En(w,B){const p=B??x.create(),S=w[0],V=w[1],I=w[4],_=w[5];return p[0]=Math.sqrt(S*S+V*V),p[1]=Math.sqrt(I*I+_*_),p}function Gn(w,B){const p=B??new f(12);return p[0]=1,p[1]=0,p[2]=0,p[4]=0,p[5]=1,p[6]=0,p[8]=w[0],p[9]=w[1],p[10]=1,p}function In(w,B,p){const S=p??new f(12),V=B[0],I=B[1],_=w[0],Y=w[1],Q=w[2],F=w[1*4+0],R=w[1*4+1],j=w[1*4+2],d=w[2*4+0],q=w[2*4+1],o=w[2*4+2];return w!==S&&(S[0]=_,S[1]=Y,S[2]=Q,S[4]=F,S[5]=R,S[6]=j),S[8]=_*V+F*I+d,S[9]=Y*V+R*I+q,S[10]=Q*V+j*I+o,S}function Un(w,B){const p=B??new f(12),S=Math.cos(w),V=Math.sin(w);return p[0]=S,p[1]=V,p[2]=0,p[4]=-V,p[5]=S,p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function cn(w,B,p){const S=p??new f(12),V=w[0*4+0],I=w[0*4+1],_=w[0*4+2],Y=w[1*4+0],Q=w[1*4+1],F=w[1*4+2],R=Math.cos(B),j=Math.sin(B);return S[0]=R*V+j*Y,S[1]=R*I+j*Q,S[2]=R*_+j*F,S[4]=R*Y-j*V,S[5]=R*Q-j*I,S[6]=R*F-j*_,w!==S&&(S[8]=w[8],S[9]=w[9],S[10]=w[10]),S}function Xn(w,B){const p=B??new f(12);return p[0]=w[0],p[1]=0,p[2]=0,p[4]=0,p[5]=w[1],p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function W(w,B,p){const S=p??new f(12),V=B[0],I=B[1];return S[0]=V*w[0*4+0],S[1]=V*w[0*4+1],S[2]=V*w[0*4+2],S[4]=I*w[1*4+0],S[5]=I*w[1*4+1],S[6]=I*w[1*4+2],w!==S&&(S[8]=w[8],S[9]=w[9],S[10]=w[10]),S}function H(w,B){const p=B??new f(12);return p[0]=w,p[1]=0,p[2]=0,p[4]=0,p[5]=w,p[6]=0,p[8]=0,p[9]=0,p[10]=1,p}function X(w,B,p){const S=p??new f(12);return S[0]=B*w[0*4+0],S[1]=B*w[0*4+1],S[2]=B*w[0*4+2],S[4]=B*w[1*4+0],S[5]=B*w[1*4+1],S[6]=B*w[1*4+2],w!==S&&(S[8]=w[8],S[9]=w[9],S[10]=w[10]),S}return{clone:Mn,create:G,set:J,fromMat4:k,fromQuat:b,negate:on,copy:C,equalsApproximately:zn,equals:Dn,identity:dn,transpose:Yn,inverse:rn,invert:qn,determinant:Rn,mul:Ln,multiply:Bn,setTranslation:Sn,getTranslation:pn,getAxis:Zn,setAxis:Pn,getScaling:En,translation:Gn,translate:In,rotation:Un,rotate:cn,scaling:Xn,scale:W,uniformScaling:H,uniformScale:X}}const It=new Map;function jt(f){let x=It.get(f);return x||(x=Wt(f),It.set(f,x)),x}function Ht(f){function x(c,r,h){const l=new f(3);return c!==void 0&&(l[0]=c,r!==void 0&&(l[1]=r,h!==void 0&&(l[2]=h))),l}const G=x;function J(c,r,h,l){const y=l??new f(3);return y[0]=c,y[1]=r,y[2]=h,y}function k(c,r){const h=r??new f(3);return h[0]=Math.ceil(c[0]),h[1]=Math.ceil(c[1]),h[2]=Math.ceil(c[2]),h}function b(c,r){const h=r??new f(3);return h[0]=Math.floor(c[0]),h[1]=Math.floor(c[1]),h[2]=Math.floor(c[2]),h}function on(c,r){const h=r??new f(3);return h[0]=Math.round(c[0]),h[1]=Math.round(c[1]),h[2]=Math.round(c[2]),h}function C(c,r=0,h=1,l){const y=l??new f(3);return y[0]=Math.min(h,Math.max(r,c[0])),y[1]=Math.min(h,Math.max(r,c[1])),y[2]=Math.min(h,Math.max(r,c[2])),y}function Mn(c,r,h){const l=h??new f(3);return l[0]=c[0]+r[0],l[1]=c[1]+r[1],l[2]=c[2]+r[2],l}function zn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+r[0]*h,y[1]=c[1]+r[1]*h,y[2]=c[2]+r[2]*h,y}function Dn(c,r){const h=c[0],l=c[1],y=c[2],g=r[0],z=r[1],$=r[2],O=Math.sqrt(h*h+l*l+y*y),U=Math.sqrt(g*g+z*z+$*$),T=O*U,Z=T&&Un(c,r)/T;return Math.acos(Z)}function dn(c,r,h){const l=h??new f(3);return l[0]=c[0]-r[0],l[1]=c[1]-r[1],l[2]=c[2]-r[2],l}const Yn=dn;function rn(c,r){return Math.abs(c[0]-r[0])<L&&Math.abs(c[1]-r[1])<L&&Math.abs(c[2]-r[2])<L}function Rn(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]}function qn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+h*(r[0]-c[0]),y[1]=c[1]+h*(r[1]-c[1]),y[2]=c[2]+h*(r[2]-c[2]),y}function Bn(c,r,h,l){const y=l??new f(3);return y[0]=c[0]+h[0]*(r[0]-c[0]),y[1]=c[1]+h[1]*(r[1]-c[1]),y[2]=c[2]+h[2]*(r[2]-c[2]),y}function Ln(c,r,h){const l=h??new f(3);return l[0]=Math.max(c[0],r[0]),l[1]=Math.max(c[1],r[1]),l[2]=Math.max(c[2],r[2]),l}function Sn(c,r,h){const l=h??new f(3);return l[0]=Math.min(c[0],r[0]),l[1]=Math.min(c[1],r[1]),l[2]=Math.min(c[2],r[2]),l}function pn(c,r,h){const l=h??new f(3);return l[0]=c[0]*r,l[1]=c[1]*r,l[2]=c[2]*r,l}const Zn=pn;function Pn(c,r,h){const l=h??new f(3);return l[0]=c[0]/r,l[1]=c[1]/r,l[2]=c[2]/r,l}function En(c,r){const h=r??new f(3);return h[0]=1/c[0],h[1]=1/c[1],h[2]=1/c[2],h}const Gn=En;function In(c,r,h){const l=h??new f(3),y=c[2]*r[0]-c[0]*r[2],g=c[0]*r[1]-c[1]*r[0];return l[0]=c[1]*r[2]-c[2]*r[1],l[1]=y,l[2]=g,l}function Un(c,r){return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]}function cn(c){const r=c[0],h=c[1],l=c[2];return Math.sqrt(r*r+h*h+l*l)}const Xn=cn;function W(c){const r=c[0],h=c[1],l=c[2];return r*r+h*h+l*l}const H=W;function X(c,r){const h=c[0]-r[0],l=c[1]-r[1],y=c[2]-r[2];return Math.sqrt(h*h+l*l+y*y)}const w=X;function B(c,r){const h=c[0]-r[0],l=c[1]-r[1],y=c[2]-r[2];return h*h+l*l+y*y}const p=B;function S(c,r){const h=r??new f(3),l=c[0],y=c[1],g=c[2],z=Math.sqrt(l*l+y*y+g*g);return z>1e-5?(h[0]=l/z,h[1]=y/z,h[2]=g/z):(h[0]=0,h[1]=0,h[2]=0),h}function V(c,r){const h=r??new f(3);return h[0]=-c[0],h[1]=-c[1],h[2]=-c[2],h}function I(c,r){const h=r??new f(3);return h[0]=c[0],h[1]=c[1],h[2]=c[2],h}const _=I;function Y(c,r,h){const l=h??new f(3);return l[0]=c[0]*r[0],l[1]=c[1]*r[1],l[2]=c[2]*r[2],l}const Q=Y;function F(c,r,h){const l=h??new f(3);return l[0]=c[0]/r[0],l[1]=c[1]/r[1],l[2]=c[2]/r[2],l}const R=F;function j(c=1,r){const h=r??new f(3),l=Math.random()*2*Math.PI,y=Math.random()*2-1,g=Math.sqrt(1-y*y)*c;return h[0]=Math.cos(l)*g,h[1]=Math.sin(l)*g,h[2]=y*c,h}function d(c){const r=c??new f(3);return r[0]=0,r[1]=0,r[2]=0,r}function q(c,r,h){const l=h??new f(3),y=c[0],g=c[1],z=c[2],$=r[3]*y+r[7]*g+r[11]*z+r[15]||1;return l[0]=(r[0]*y+r[4]*g+r[8]*z+r[12])/$,l[1]=(r[1]*y+r[5]*g+r[9]*z+r[13])/$,l[2]=(r[2]*y+r[6]*g+r[10]*z+r[14])/$,l}function o(c,r,h){const l=h??new f(3),y=c[0],g=c[1],z=c[2];return l[0]=y*r[0*4+0]+g*r[1*4+0]+z*r[2*4+0],l[1]=y*r[0*4+1]+g*r[1*4+1]+z*r[2*4+1],l[2]=y*r[0*4+2]+g*r[1*4+2]+z*r[2*4+2],l}function i(c,r,h){const l=h??new f(3),y=c[0],g=c[1],z=c[2];return l[0]=y*r[0]+g*r[4]+z*r[8],l[1]=y*r[1]+g*r[5]+z*r[9],l[2]=y*r[2]+g*r[6]+z*r[10],l}function a(c,r,h){const l=h??new f(3),y=r[0],g=r[1],z=r[2],$=r[3]*2,O=c[0],U=c[1],T=c[2],Z=g*T-z*U,N=z*O-y*T,v=y*U-g*O;return l[0]=O+Z*$+(g*v-z*N)*2,l[1]=U+N*$+(z*Z-y*v)*2,l[2]=T+v*$+(y*N-g*Z)*2,l}function M(c,r){const h=r??new f(3);return h[0]=c[12],h[1]=c[13],h[2]=c[14],h}function P(c,r,h){const l=h??new f(3),y=r*4;return l[0]=c[y+0],l[1]=c[y+1],l[2]=c[y+2],l}function n(c,r){const h=r??new f(3),l=c[0],y=c[1],g=c[2],z=c[4],$=c[5],O=c[6],U=c[8],T=c[9],Z=c[10];return h[0]=Math.sqrt(l*l+y*y+g*g),h[1]=Math.sqrt(z*z+$*$+O*O),h[2]=Math.sqrt(U*U+T*T+Z*Z),h}function e(c,r,h,l){const y=l??new f(3),g=[],z=[];return g[0]=c[0]-r[0],g[1]=c[1]-r[1],g[2]=c[2]-r[2],z[0]=g[0],z[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),z[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),y[0]=z[0]+r[0],y[1]=z[1]+r[1],y[2]=z[2]+r[2],y}function t(c,r,h,l){const y=l??new f(3),g=[],z=[];return g[0]=c[0]-r[0],g[1]=c[1]-r[1],g[2]=c[2]-r[2],z[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),z[1]=g[1],z[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),y[0]=z[0]+r[0],y[1]=z[1]+r[1],y[2]=z[2]+r[2],y}function s(c,r,h,l){const y=l??new f(3),g=[],z=[];return g[0]=c[0]-r[0],g[1]=c[1]-r[1],g[2]=c[2]-r[2],z[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),z[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),z[2]=g[2],y[0]=z[0]+r[0],y[1]=z[1]+r[1],y[2]=z[2]+r[2],y}function u(c,r,h){const l=h??new f(3);return S(c,l),pn(l,r,l)}function D(c,r,h){const l=h??new f(3);return cn(c)>r?u(c,r,l):I(c,l)}function A(c,r,h){const l=h??new f(3);return qn(c,r,.5,l)}return{create:x,fromValues:G,set:J,ceil:k,floor:b,round:on,clamp:C,add:Mn,addScaled:zn,angle:Dn,subtract:dn,sub:Yn,equalsApproximately:rn,equals:Rn,lerp:qn,lerpV:Bn,max:Ln,min:Sn,mulScalar:pn,scale:Zn,divScalar:Pn,inverse:En,invert:Gn,cross:In,dot:Un,length:cn,len:Xn,lengthSq:W,lenSq:H,distance:X,dist:w,distanceSq:B,distSq:p,normalize:S,negate:V,copy:I,clone:_,multiply:Y,mul:Q,divide:F,div:R,random:j,zero:d,transformMat4:q,transformMat4Upper3x3:o,transformMat3:i,transformQuat:a,getTranslation:M,getAxis:P,getScaling:n,rotateX:e,rotateY:t,rotateZ:s,setLength:u,truncate:D,midpoint:A}}const Ut=new Map;function yt(f){let x=Ut.get(f);return x||(x=Ht(f),Ut.set(f,x)),x}function Jt(f){const x=yt(f);function G(n,e,t,s,u,D,A,c,r,h,l,y,g,z,$,O){const U=new f(16);return n!==void 0&&(U[0]=n,e!==void 0&&(U[1]=e,t!==void 0&&(U[2]=t,s!==void 0&&(U[3]=s,u!==void 0&&(U[4]=u,D!==void 0&&(U[5]=D,A!==void 0&&(U[6]=A,c!==void 0&&(U[7]=c,r!==void 0&&(U[8]=r,h!==void 0&&(U[9]=h,l!==void 0&&(U[10]=l,y!==void 0&&(U[11]=y,g!==void 0&&(U[12]=g,z!==void 0&&(U[13]=z,$!==void 0&&(U[14]=$,O!==void 0&&(U[15]=O)))))))))))))))),U}function J(n,e,t,s,u,D,A,c,r,h,l,y,g,z,$,O,U){const T=U??new f(16);return T[0]=n,T[1]=e,T[2]=t,T[3]=s,T[4]=u,T[5]=D,T[6]=A,T[7]=c,T[8]=r,T[9]=h,T[10]=l,T[11]=y,T[12]=g,T[13]=z,T[14]=$,T[15]=O,T}function k(n,e){const t=e??new f(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function b(n,e){const t=e??new f(16),s=n[0],u=n[1],D=n[2],A=n[3],c=s+s,r=u+u,h=D+D,l=s*c,y=u*c,g=u*r,z=D*c,$=D*r,O=D*h,U=A*c,T=A*r,Z=A*h;return t[0]=1-g-O,t[1]=y+Z,t[2]=z-T,t[3]=0,t[4]=y-Z,t[5]=1-l-O,t[6]=$+U,t[7]=0,t[8]=z+T,t[9]=$-U,t[10]=1-l-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function on(n,e){const t=e??new f(16);return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t}function C(n,e){const t=e??new f(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}const Mn=C;function zn(n,e){return Math.abs(n[0]-e[0])<L&&Math.abs(n[1]-e[1])<L&&Math.abs(n[2]-e[2])<L&&Math.abs(n[3]-e[3])<L&&Math.abs(n[4]-e[4])<L&&Math.abs(n[5]-e[5])<L&&Math.abs(n[6]-e[6])<L&&Math.abs(n[7]-e[7])<L&&Math.abs(n[8]-e[8])<L&&Math.abs(n[9]-e[9])<L&&Math.abs(n[10]-e[10])<L&&Math.abs(n[11]-e[11])<L&&Math.abs(n[12]-e[12])<L&&Math.abs(n[13]-e[13])<L&&Math.abs(n[14]-e[14])<L&&Math.abs(n[15]-e[15])<L}function Dn(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]}function dn(n){const e=n??new f(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yn(n,e){const t=e??new f(16);if(t===n){let N;return N=n[1],n[1]=n[4],n[4]=N,N=n[2],n[2]=n[8],n[8]=N,N=n[3],n[3]=n[12],n[12]=N,N=n[6],n[6]=n[9],n[9]=N,N=n[7],n[7]=n[13],n[13]=N,N=n[11],n[11]=n[14],n[14]=N,t}const s=n[0*4+0],u=n[0*4+1],D=n[0*4+2],A=n[0*4+3],c=n[1*4+0],r=n[1*4+1],h=n[1*4+2],l=n[1*4+3],y=n[2*4+0],g=n[2*4+1],z=n[2*4+2],$=n[2*4+3],O=n[3*4+0],U=n[3*4+1],T=n[3*4+2],Z=n[3*4+3];return t[0]=s,t[1]=c,t[2]=y,t[3]=O,t[4]=u,t[5]=r,t[6]=g,t[7]=U,t[8]=D,t[9]=h,t[10]=z,t[11]=T,t[12]=A,t[13]=l,t[14]=$,t[15]=Z,t}function rn(n,e){const t=e??new f(16),s=n[0*4+0],u=n[0*4+1],D=n[0*4+2],A=n[0*4+3],c=n[1*4+0],r=n[1*4+1],h=n[1*4+2],l=n[1*4+3],y=n[2*4+0],g=n[2*4+1],z=n[2*4+2],$=n[2*4+3],O=n[3*4+0],U=n[3*4+1],T=n[3*4+2],Z=n[3*4+3],N=z*Z,v=T*$,nn=h*Z,tn=T*l,en=h*$,un=z*l,fn=D*Z,an=T*A,wn=D*$,hn=z*A,xn=D*l,yn=h*A,gn=y*U,An=O*g,Tn=c*U,Vn=O*r,$n=c*g,at=y*r,wt=s*U,ht=O*u,lt=s*g,Mt=y*u,Dt=s*r,dt=c*u,At=N*r+tn*g+en*U-(v*r+nn*g+un*U),zt=v*u+fn*g+hn*U-(N*u+an*g+wn*U),St=nn*u+an*r+xn*U-(tn*u+fn*r+yn*U),qt=un*u+wn*r+yn*g-(en*u+hn*r+xn*g),ln=1/(s*At+c*zt+y*St+O*qt);return t[0]=ln*At,t[1]=ln*zt,t[2]=ln*St,t[3]=ln*qt,t[4]=ln*(v*c+nn*y+un*O-(N*c+tn*y+en*O)),t[5]=ln*(N*s+an*y+wn*O-(v*s+fn*y+hn*O)),t[6]=ln*(tn*s+fn*c+yn*O-(nn*s+an*c+xn*O)),t[7]=ln*(en*s+hn*c+xn*y-(un*s+wn*c+yn*y)),t[8]=ln*(gn*l+Vn*$+$n*Z-(An*l+Tn*$+at*Z)),t[9]=ln*(An*A+wt*$+Mt*Z-(gn*A+ht*$+lt*Z)),t[10]=ln*(Tn*A+ht*l+Dt*Z-(Vn*A+wt*l+dt*Z)),t[11]=ln*(at*A+lt*l+dt*$-($n*A+Mt*l+Dt*$)),t[12]=ln*(Tn*z+at*T+An*h-($n*T+gn*h+Vn*z)),t[13]=ln*(lt*T+gn*D+ht*z-(wt*z+Mt*T+An*D)),t[14]=ln*(wt*h+dt*T+Vn*D-(Dt*T+Tn*D+ht*h)),t[15]=ln*(Dt*z+$n*D+Mt*h-(lt*h+dt*z+at*D)),t}function Rn(n){const e=n[0],t=n[0*4+1],s=n[0*4+2],u=n[0*4+3],D=n[1*4+0],A=n[1*4+1],c=n[1*4+2],r=n[1*4+3],h=n[2*4+0],l=n[2*4+1],y=n[2*4+2],g=n[2*4+3],z=n[3*4+0],$=n[3*4+1],O=n[3*4+2],U=n[3*4+3],T=y*U,Z=O*g,N=c*U,v=O*r,nn=c*g,tn=y*r,en=s*U,un=O*u,fn=s*g,an=y*u,wn=s*r,hn=c*u,xn=T*A+v*l+nn*$-(Z*A+N*l+tn*$),yn=Z*t+en*l+an*$-(T*t+un*l+fn*$),gn=N*t+un*A+wn*$-(v*t+en*A+hn*$),An=tn*t+fn*A+hn*l-(nn*t+an*A+wn*l);return e*xn+D*yn+h*gn+z*An}const qn=rn;function Bn(n,e,t){const s=t??new f(16),u=n[0],D=n[1],A=n[2],c=n[3],r=n[4],h=n[5],l=n[6],y=n[7],g=n[8],z=n[9],$=n[10],O=n[11],U=n[12],T=n[13],Z=n[14],N=n[15],v=e[0],nn=e[1],tn=e[2],en=e[3],un=e[4],fn=e[5],an=e[6],wn=e[7],hn=e[8],xn=e[9],yn=e[10],gn=e[11],An=e[12],Tn=e[13],Vn=e[14],$n=e[15];return s[0]=u*v+r*nn+g*tn+U*en,s[1]=D*v+h*nn+z*tn+T*en,s[2]=A*v+l*nn+$*tn+Z*en,s[3]=c*v+y*nn+O*tn+N*en,s[4]=u*un+r*fn+g*an+U*wn,s[5]=D*un+h*fn+z*an+T*wn,s[6]=A*un+l*fn+$*an+Z*wn,s[7]=c*un+y*fn+O*an+N*wn,s[8]=u*hn+r*xn+g*yn+U*gn,s[9]=D*hn+h*xn+z*yn+T*gn,s[10]=A*hn+l*xn+$*yn+Z*gn,s[11]=c*hn+y*xn+O*yn+N*gn,s[12]=u*An+r*Tn+g*Vn+U*$n,s[13]=D*An+h*Tn+z*Vn+T*$n,s[14]=A*An+l*Tn+$*Vn+Z*$n,s[15]=c*An+y*Tn+O*Vn+N*$n,s}const Ln=Bn;function Sn(n,e,t){const s=t??dn();return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11]),s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s}function pn(n,e){const t=e??x.create();return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Zn(n,e,t){const s=t??x.create(),u=e*4;return s[0]=n[u+0],s[1]=n[u+1],s[2]=n[u+2],s}function Pn(n,e,t,s){const u=s===n?s:C(n,s),D=t*4;return u[D+0]=e[0],u[D+1]=e[1],u[D+2]=e[2],u}function En(n,e){const t=e??x.create(),s=n[0],u=n[1],D=n[2],A=n[4],c=n[5],r=n[6],h=n[8],l=n[9],y=n[10];return t[0]=Math.sqrt(s*s+u*u+D*D),t[1]=Math.sqrt(A*A+c*c+r*r),t[2]=Math.sqrt(h*h+l*l+y*y),t}function Gn(n,e,t,s,u){const D=u??new f(16),A=Math.tan(Math.PI*.5-.5*n);if(D[0]=A/e,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=A,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,Number.isFinite(s)){const c=1/(t-s);D[10]=s*c,D[14]=s*t*c}else D[10]=-1,D[14]=-t;return D}function In(n,e,t,s=1/0,u){const D=u??new f(16),A=1/Math.tan(n*.5);if(D[0]=A/e,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=A,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,s===1/0)D[10]=0,D[14]=t;else{const c=1/(s-t);D[10]=t*c,D[14]=s*t*c}return D}function Un(n,e,t,s,u,D,A){const c=A??new f(16);return c[0]=2/(e-n),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2/(s-t),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1/(u-D),c[11]=0,c[12]=(e+n)/(n-e),c[13]=(s+t)/(t-s),c[14]=u/(u-D),c[15]=1,c}function cn(n,e,t,s,u,D,A){const c=A??new f(16),r=e-n,h=s-t,l=u-D;return c[0]=2*u/r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*u/h,c[6]=0,c[7]=0,c[8]=(n+e)/r,c[9]=(s+t)/h,c[10]=D/l,c[11]=-1,c[12]=0,c[13]=0,c[14]=u*D/l,c[15]=0,c}function Xn(n,e,t,s,u,D=1/0,A){const c=A??new f(16),r=e-n,h=s-t;if(c[0]=2*u/r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*u/h,c[6]=0,c[7]=0,c[8]=(n+e)/r,c[9]=(s+t)/h,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,D===1/0)c[10]=0,c[14]=u;else{const l=1/(D-u);c[10]=u*l,c[14]=D*u*l}return c}const W=x.create(),H=x.create(),X=x.create();function w(n,e,t,s){const u=s??new f(16);return x.normalize(x.subtract(e,n,X),X),x.normalize(x.cross(t,X,W),W),x.normalize(x.cross(X,W,H),H),u[0]=W[0],u[1]=W[1],u[2]=W[2],u[3]=0,u[4]=H[0],u[5]=H[1],u[6]=H[2],u[7]=0,u[8]=X[0],u[9]=X[1],u[10]=X[2],u[11]=0,u[12]=n[0],u[13]=n[1],u[14]=n[2],u[15]=1,u}function B(n,e,t,s){const u=s??new f(16);return x.normalize(x.subtract(n,e,X),X),x.normalize(x.cross(t,X,W),W),x.normalize(x.cross(X,W,H),H),u[0]=W[0],u[1]=W[1],u[2]=W[2],u[3]=0,u[4]=H[0],u[5]=H[1],u[6]=H[2],u[7]=0,u[8]=X[0],u[9]=X[1],u[10]=X[2],u[11]=0,u[12]=n[0],u[13]=n[1],u[14]=n[2],u[15]=1,u}function p(n,e,t,s){const u=s??new f(16);return x.normalize(x.subtract(n,e,X),X),x.normalize(x.cross(t,X,W),W),x.normalize(x.cross(X,W,H),H),u[0]=W[0],u[1]=H[0],u[2]=X[0],u[3]=0,u[4]=W[1],u[5]=H[1],u[6]=X[1],u[7]=0,u[8]=W[2],u[9]=H[2],u[10]=X[2],u[11]=0,u[12]=-(W[0]*n[0]+W[1]*n[1]+W[2]*n[2]),u[13]=-(H[0]*n[0]+H[1]*n[1]+H[2]*n[2]),u[14]=-(X[0]*n[0]+X[1]*n[1]+X[2]*n[2]),u[15]=1,u}function S(n,e){const t=e??new f(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function V(n,e,t){const s=t??new f(16),u=e[0],D=e[1],A=e[2],c=n[0],r=n[1],h=n[2],l=n[3],y=n[1*4+0],g=n[1*4+1],z=n[1*4+2],$=n[1*4+3],O=n[2*4+0],U=n[2*4+1],T=n[2*4+2],Z=n[2*4+3],N=n[3*4+0],v=n[3*4+1],nn=n[3*4+2],tn=n[3*4+3];return n!==s&&(s[0]=c,s[1]=r,s[2]=h,s[3]=l,s[4]=y,s[5]=g,s[6]=z,s[7]=$,s[8]=O,s[9]=U,s[10]=T,s[11]=Z),s[12]=c*u+y*D+O*A+N,s[13]=r*u+g*D+U*A+v,s[14]=h*u+z*D+T*A+nn,s[15]=l*u+$*D+Z*A+tn,s}function I(n,e){const t=e??new f(16),s=Math.cos(n),u=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=u,t[7]=0,t[8]=0,t[9]=-u,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(n,e,t){const s=t??new f(16),u=n[4],D=n[5],A=n[6],c=n[7],r=n[8],h=n[9],l=n[10],y=n[11],g=Math.cos(e),z=Math.sin(e);return s[4]=g*u+z*r,s[5]=g*D+z*h,s[6]=g*A+z*l,s[7]=g*c+z*y,s[8]=g*r-z*u,s[9]=g*h-z*D,s[10]=g*l-z*A,s[11]=g*y-z*c,n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function Y(n,e){const t=e??new f(16),s=Math.cos(n),u=Math.sin(n);return t[0]=s,t[1]=0,t[2]=-u,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=u,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(n,e,t){const s=t??new f(16),u=n[0*4+0],D=n[0*4+1],A=n[0*4+2],c=n[0*4+3],r=n[2*4+0],h=n[2*4+1],l=n[2*4+2],y=n[2*4+3],g=Math.cos(e),z=Math.sin(e);return s[0]=g*u-z*r,s[1]=g*D-z*h,s[2]=g*A-z*l,s[3]=g*c-z*y,s[8]=g*r+z*u,s[9]=g*h+z*D,s[10]=g*l+z*A,s[11]=g*y+z*c,n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function F(n,e){const t=e??new f(16),s=Math.cos(n),u=Math.sin(n);return t[0]=s,t[1]=u,t[2]=0,t[3]=0,t[4]=-u,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(n,e,t){const s=t??new f(16),u=n[0*4+0],D=n[0*4+1],A=n[0*4+2],c=n[0*4+3],r=n[1*4+0],h=n[1*4+1],l=n[1*4+2],y=n[1*4+3],g=Math.cos(e),z=Math.sin(e);return s[0]=g*u+z*r,s[1]=g*D+z*h,s[2]=g*A+z*l,s[3]=g*c+z*y,s[4]=g*r-z*u,s[5]=g*h-z*D,s[6]=g*l-z*A,s[7]=g*y-z*c,n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function j(n,e,t){const s=t??new f(16);let u=n[0],D=n[1],A=n[2];const c=Math.sqrt(u*u+D*D+A*A);u/=c,D/=c,A/=c;const r=u*u,h=D*D,l=A*A,y=Math.cos(e),g=Math.sin(e),z=1-y;return s[0]=r+(1-r)*y,s[1]=u*D*z+A*g,s[2]=u*A*z-D*g,s[3]=0,s[4]=u*D*z-A*g,s[5]=h+(1-h)*y,s[6]=D*A*z+u*g,s[7]=0,s[8]=u*A*z+D*g,s[9]=D*A*z-u*g,s[10]=l+(1-l)*y,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}const d=j;function q(n,e,t,s){const u=s??new f(16);let D=e[0],A=e[1],c=e[2];const r=Math.sqrt(D*D+A*A+c*c);D/=r,A/=r,c/=r;const h=D*D,l=A*A,y=c*c,g=Math.cos(t),z=Math.sin(t),$=1-g,O=h+(1-h)*g,U=D*A*$+c*z,T=D*c*$-A*z,Z=D*A*$-c*z,N=l+(1-l)*g,v=A*c*$+D*z,nn=D*c*$+A*z,tn=A*c*$-D*z,en=y+(1-y)*g,un=n[0],fn=n[1],an=n[2],wn=n[3],hn=n[4],xn=n[5],yn=n[6],gn=n[7],An=n[8],Tn=n[9],Vn=n[10],$n=n[11];return u[0]=O*un+U*hn+T*An,u[1]=O*fn+U*xn+T*Tn,u[2]=O*an+U*yn+T*Vn,u[3]=O*wn+U*gn+T*$n,u[4]=Z*un+N*hn+v*An,u[5]=Z*fn+N*xn+v*Tn,u[6]=Z*an+N*yn+v*Vn,u[7]=Z*wn+N*gn+v*$n,u[8]=nn*un+tn*hn+en*An,u[9]=nn*fn+tn*xn+en*Tn,u[10]=nn*an+tn*yn+en*Vn,u[11]=nn*wn+tn*gn+en*$n,n!==u&&(u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u}const o=q;function i(n,e){const t=e??new f(16);return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(n,e,t){const s=t??new f(16),u=e[0],D=e[1],A=e[2];return s[0]=u*n[0*4+0],s[1]=u*n[0*4+1],s[2]=u*n[0*4+2],s[3]=u*n[0*4+3],s[4]=D*n[1*4+0],s[5]=D*n[1*4+1],s[6]=D*n[1*4+2],s[7]=D*n[1*4+3],s[8]=A*n[2*4+0],s[9]=A*n[2*4+1],s[10]=A*n[2*4+2],s[11]=A*n[2*4+3],n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}function M(n,e){const t=e??new f(16);return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(n,e,t){const s=t??new f(16);return s[0]=e*n[0*4+0],s[1]=e*n[0*4+1],s[2]=e*n[0*4+2],s[3]=e*n[0*4+3],s[4]=e*n[1*4+0],s[5]=e*n[1*4+1],s[6]=e*n[1*4+2],s[7]=e*n[1*4+3],s[8]=e*n[2*4+0],s[9]=e*n[2*4+1],s[10]=e*n[2*4+2],s[11]=e*n[2*4+3],n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s}return{create:G,set:J,fromMat3:k,fromQuat:b,negate:on,copy:C,clone:Mn,equalsApproximately:zn,equals:Dn,identity:dn,transpose:Yn,inverse:rn,determinant:Rn,invert:qn,multiply:Bn,mul:Ln,setTranslation:Sn,getTranslation:pn,getAxis:Zn,setAxis:Pn,getScaling:En,perspective:Gn,perspectiveReverseZ:In,ortho:Un,frustum:cn,frustumReverseZ:Xn,aim:w,cameraAim:B,lookAt:p,translation:S,translate:V,rotationX:I,rotateX:_,rotationY:Y,rotateY:Q,rotationZ:F,rotateZ:R,axisRotation:j,rotation:d,axisRotate:q,rotate:o,scaling:i,scale:a,uniformScaling:M,uniformScale:P}}const Tt=new Map;function Kt(f){let x=Tt.get(f);return x||(x=Jt(f),Tt.set(f,x)),x}function kt(f){const x=yt(f);function G(d,q,o,i){const a=new f(4);return d!==void 0&&(a[0]=d,q!==void 0&&(a[1]=q,o!==void 0&&(a[2]=o,i!==void 0&&(a[3]=i)))),a}const J=G;function k(d,q,o,i,a){const M=a??new f(4);return M[0]=d,M[1]=q,M[2]=o,M[3]=i,M}function b(d,q,o){const i=o??new f(4),a=q*.5,M=Math.sin(a);return i[0]=M*d[0],i[1]=M*d[1],i[2]=M*d[2],i[3]=Math.cos(a),i}function on(d,q){const o=q??x.create(3),i=Math.acos(d[3])*2,a=Math.sin(i*.5);return a>L?(o[0]=d[0]/a,o[1]=d[1]/a,o[2]=d[2]/a):(o[0]=1,o[1]=0,o[2]=0),{angle:i,axis:o}}function C(d,q){const o=cn(d,q);return Math.acos(2*o*o-1)}function Mn(d,q,o){const i=o??new f(4),a=d[0],M=d[1],P=d[2],n=d[3],e=q[0],t=q[1],s=q[2],u=q[3];return i[0]=a*u+n*e+M*s-P*t,i[1]=M*u+n*t+P*e-a*s,i[2]=P*u+n*s+a*t-M*e,i[3]=n*u-a*e-M*t-P*s,i}const zn=Mn;function Dn(d,q,o){const i=o??new f(4),a=q*.5,M=d[0],P=d[1],n=d[2],e=d[3],t=Math.sin(a),s=Math.cos(a);return i[0]=M*s+e*t,i[1]=P*s+n*t,i[2]=n*s-P*t,i[3]=e*s-M*t,i}function dn(d,q,o){const i=o??new f(4),a=q*.5,M=d[0],P=d[1],n=d[2],e=d[3],t=Math.sin(a),s=Math.cos(a);return i[0]=M*s-n*t,i[1]=P*s+e*t,i[2]=n*s+M*t,i[3]=e*s-P*t,i}function Yn(d,q,o){const i=o??new f(4),a=q*.5,M=d[0],P=d[1],n=d[2],e=d[3],t=Math.sin(a),s=Math.cos(a);return i[0]=M*s+P*t,i[1]=P*s-M*t,i[2]=n*s+e*t,i[3]=e*s-n*t,i}function rn(d,q,o,i){const a=i??new f(4),M=d[0],P=d[1],n=d[2],e=d[3];let t=q[0],s=q[1],u=q[2],D=q[3],A=M*t+P*s+n*u+e*D;A<0&&(A=-A,t=-t,s=-s,u=-u,D=-D);let c,r;if(1-A>L){const h=Math.acos(A),l=Math.sin(h);c=Math.sin((1-o)*h)/l,r=Math.sin(o*h)/l}else c=1-o,r=o;return a[0]=c*M+r*t,a[1]=c*P+r*s,a[2]=c*n+r*u,a[3]=c*e+r*D,a}function Rn(d,q){const o=q??new f(4),i=d[0],a=d[1],M=d[2],P=d[3],n=i*i+a*a+M*M+P*P,e=n?1/n:0;return o[0]=-i*e,o[1]=-a*e,o[2]=-M*e,o[3]=P*e,o}function qn(d,q){const o=q??new f(4);return o[0]=-d[0],o[1]=-d[1],o[2]=-d[2],o[3]=d[3],o}function Bn(d,q){const o=q??new f(4),i=d[0]+d[5]+d[10];if(i>0){const a=Math.sqrt(i+1);o[3]=.5*a;const M=.5/a;o[0]=(d[6]-d[9])*M,o[1]=(d[8]-d[2])*M,o[2]=(d[1]-d[4])*M}else{let a=0;d[5]>d[0]&&(a=1),d[10]>d[a*4+a]&&(a=2);const M=(a+1)%3,P=(a+2)%3,n=Math.sqrt(d[a*4+a]-d[M*4+M]-d[P*4+P]+1);o[a]=.5*n;const e=.5/n;o[3]=(d[M*4+P]-d[P*4+M])*e,o[M]=(d[M*4+a]+d[a*4+M])*e,o[P]=(d[P*4+a]+d[a*4+P])*e}return o}function Ln(d,q,o,i,a){const M=a??new f(4),P=d*.5,n=q*.5,e=o*.5,t=Math.sin(P),s=Math.cos(P),u=Math.sin(n),D=Math.cos(n),A=Math.sin(e),c=Math.cos(e);switch(i){case"xyz":M[0]=t*D*c+s*u*A,M[1]=s*u*c-t*D*A,M[2]=s*D*A+t*u*c,M[3]=s*D*c-t*u*A;break;case"xzy":M[0]=t*D*c-s*u*A,M[1]=s*u*c-t*D*A,M[2]=s*D*A+t*u*c,M[3]=s*D*c+t*u*A;break;case"yxz":M[0]=t*D*c+s*u*A,M[1]=s*u*c-t*D*A,M[2]=s*D*A-t*u*c,M[3]=s*D*c+t*u*A;break;case"yzx":M[0]=t*D*c+s*u*A,M[1]=s*u*c+t*D*A,M[2]=s*D*A-t*u*c,M[3]=s*D*c-t*u*A;break;case"zxy":M[0]=t*D*c-s*u*A,M[1]=s*u*c+t*D*A,M[2]=s*D*A+t*u*c,M[3]=s*D*c-t*u*A;break;case"zyx":M[0]=t*D*c-s*u*A,M[1]=s*u*c+t*D*A,M[2]=s*D*A-t*u*c,M[3]=s*D*c+t*u*A;break;default:throw new Error(`Unknown rotation order: ${i}`)}return M}function Sn(d,q){const o=q??new f(4);return o[0]=d[0],o[1]=d[1],o[2]=d[2],o[3]=d[3],o}const pn=Sn;function Zn(d,q,o){const i=o??new f(4);return i[0]=d[0]+q[0],i[1]=d[1]+q[1],i[2]=d[2]+q[2],i[3]=d[3]+q[3],i}function Pn(d,q,o){const i=o??new f(4);return i[0]=d[0]-q[0],i[1]=d[1]-q[1],i[2]=d[2]-q[2],i[3]=d[3]-q[3],i}const En=Pn;function Gn(d,q,o){const i=o??new f(4);return i[0]=d[0]*q,i[1]=d[1]*q,i[2]=d[2]*q,i[3]=d[3]*q,i}const In=Gn;function Un(d,q,o){const i=o??new f(4);return i[0]=d[0]/q,i[1]=d[1]/q,i[2]=d[2]/q,i[3]=d[3]/q,i}function cn(d,q){return d[0]*q[0]+d[1]*q[1]+d[2]*q[2]+d[3]*q[3]}function Xn(d,q,o,i){const a=i??new f(4);return a[0]=d[0]+o*(q[0]-d[0]),a[1]=d[1]+o*(q[1]-d[1]),a[2]=d[2]+o*(q[2]-d[2]),a[3]=d[3]+o*(q[3]-d[3]),a}function W(d){const q=d[0],o=d[1],i=d[2],a=d[3];return Math.sqrt(q*q+o*o+i*i+a*a)}const H=W;function X(d){const q=d[0],o=d[1],i=d[2],a=d[3];return q*q+o*o+i*i+a*a}const w=X;function B(d,q){const o=q??new f(4),i=d[0],a=d[1],M=d[2],P=d[3],n=Math.sqrt(i*i+a*a+M*M+P*P);return n>1e-5?(o[0]=i/n,o[1]=a/n,o[2]=M/n,o[3]=P/n):(o[0]=0,o[1]=0,o[2]=0,o[3]=1),o}function p(d,q){return Math.abs(d[0]-q[0])<L&&Math.abs(d[1]-q[1])<L&&Math.abs(d[2]-q[2])<L&&Math.abs(d[3]-q[3])<L}function S(d,q){return d[0]===q[0]&&d[1]===q[1]&&d[2]===q[2]&&d[3]===q[3]}function V(d){const q=d??new f(4);return q[0]=0,q[1]=0,q[2]=0,q[3]=1,q}const I=x.create(),_=x.create(),Y=x.create();function Q(d,q,o){const i=o??new f(4),a=x.dot(d,q);return a<-.999999?(x.cross(_,d,I),x.len(I)<1e-6&&x.cross(Y,d,I),x.normalize(I,I),b(I,Math.PI,i),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(x.cross(d,q,I),i[0]=I[0],i[1]=I[1],i[2]=I[2],i[3]=1+a,B(i,i))}const F=new f(4),R=new f(4);function j(d,q,o,i,a,M){const P=M??new f(4);return rn(d,i,a,F),rn(q,o,a,R),rn(F,R,2*a*(1-a),P),P}return{create:G,fromValues:J,set:k,fromAxisAngle:b,toAxisAngle:on,angle:C,multiply:Mn,mul:zn,rotateX:Dn,rotateY:dn,rotateZ:Yn,slerp:rn,inverse:Rn,conjugate:qn,fromMat:Bn,fromEuler:Ln,copy:Sn,clone:pn,add:Zn,subtract:Pn,sub:En,mulScalar:Gn,scale:In,divScalar:Un,dot:cn,lerp:Xn,length:W,len:H,lengthSq:X,lenSq:w,normalize:B,equalsApproximately:p,equals:S,identity:V,rotationTo:Q,sqlerp:j}}const Vt=new Map;function vt(f){let x=Vt.get(f);return x||(x=kt(f),Vt.set(f,x)),x}function bt(f){function x(o,i,a,M){const P=new f(4);return o!==void 0&&(P[0]=o,i!==void 0&&(P[1]=i,a!==void 0&&(P[2]=a,M!==void 0&&(P[3]=M)))),P}const G=x;function J(o,i,a,M,P){const n=P??new f(4);return n[0]=o,n[1]=i,n[2]=a,n[3]=M,n}function k(o,i){const a=i??new f(4);return a[0]=Math.ceil(o[0]),a[1]=Math.ceil(o[1]),a[2]=Math.ceil(o[2]),a[3]=Math.ceil(o[3]),a}function b(o,i){const a=i??new f(4);return a[0]=Math.floor(o[0]),a[1]=Math.floor(o[1]),a[2]=Math.floor(o[2]),a[3]=Math.floor(o[3]),a}function on(o,i){const a=i??new f(4);return a[0]=Math.round(o[0]),a[1]=Math.round(o[1]),a[2]=Math.round(o[2]),a[3]=Math.round(o[3]),a}function C(o,i=0,a=1,M){const P=M??new f(4);return P[0]=Math.min(a,Math.max(i,o[0])),P[1]=Math.min(a,Math.max(i,o[1])),P[2]=Math.min(a,Math.max(i,o[2])),P[3]=Math.min(a,Math.max(i,o[3])),P}function Mn(o,i,a){const M=a??new f(4);return M[0]=o[0]+i[0],M[1]=o[1]+i[1],M[2]=o[2]+i[2],M[3]=o[3]+i[3],M}function zn(o,i,a,M){const P=M??new f(4);return P[0]=o[0]+i[0]*a,P[1]=o[1]+i[1]*a,P[2]=o[2]+i[2]*a,P[3]=o[3]+i[3]*a,P}function Dn(o,i,a){const M=a??new f(4);return M[0]=o[0]-i[0],M[1]=o[1]-i[1],M[2]=o[2]-i[2],M[3]=o[3]-i[3],M}const dn=Dn;function Yn(o,i){return Math.abs(o[0]-i[0])<L&&Math.abs(o[1]-i[1])<L&&Math.abs(o[2]-i[2])<L&&Math.abs(o[3]-i[3])<L}function rn(o,i){return o[0]===i[0]&&o[1]===i[1]&&o[2]===i[2]&&o[3]===i[3]}function Rn(o,i,a,M){const P=M??new f(4);return P[0]=o[0]+a*(i[0]-o[0]),P[1]=o[1]+a*(i[1]-o[1]),P[2]=o[2]+a*(i[2]-o[2]),P[3]=o[3]+a*(i[3]-o[3]),P}function qn(o,i,a,M){const P=M??new f(4);return P[0]=o[0]+a[0]*(i[0]-o[0]),P[1]=o[1]+a[1]*(i[1]-o[1]),P[2]=o[2]+a[2]*(i[2]-o[2]),P[3]=o[3]+a[3]*(i[3]-o[3]),P}function Bn(o,i,a){const M=a??new f(4);return M[0]=Math.max(o[0],i[0]),M[1]=Math.max(o[1],i[1]),M[2]=Math.max(o[2],i[2]),M[3]=Math.max(o[3],i[3]),M}function Ln(o,i,a){const M=a??new f(4);return M[0]=Math.min(o[0],i[0]),M[1]=Math.min(o[1],i[1]),M[2]=Math.min(o[2],i[2]),M[3]=Math.min(o[3],i[3]),M}function Sn(o,i,a){const M=a??new f(4);return M[0]=o[0]*i,M[1]=o[1]*i,M[2]=o[2]*i,M[3]=o[3]*i,M}const pn=Sn;function Zn(o,i,a){const M=a??new f(4);return M[0]=o[0]/i,M[1]=o[1]/i,M[2]=o[2]/i,M[3]=o[3]/i,M}function Pn(o,i){const a=i??new f(4);return a[0]=1/o[0],a[1]=1/o[1],a[2]=1/o[2],a[3]=1/o[3],a}const En=Pn;function Gn(o,i){return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]*i[3]}function In(o){const i=o[0],a=o[1],M=o[2],P=o[3];return Math.sqrt(i*i+a*a+M*M+P*P)}const Un=In;function cn(o){const i=o[0],a=o[1],M=o[2],P=o[3];return i*i+a*a+M*M+P*P}const Xn=cn;function W(o,i){const a=o[0]-i[0],M=o[1]-i[1],P=o[2]-i[2],n=o[3]-i[3];return Math.sqrt(a*a+M*M+P*P+n*n)}const H=W;function X(o,i){const a=o[0]-i[0],M=o[1]-i[1],P=o[2]-i[2],n=o[3]-i[3];return a*a+M*M+P*P+n*n}const w=X;function B(o,i){const a=i??new f(4),M=o[0],P=o[1],n=o[2],e=o[3],t=Math.sqrt(M*M+P*P+n*n+e*e);return t>1e-5?(a[0]=M/t,a[1]=P/t,a[2]=n/t,a[3]=e/t):(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a}function p(o,i){const a=i??new f(4);return a[0]=-o[0],a[1]=-o[1],a[2]=-o[2],a[3]=-o[3],a}function S(o,i){const a=i??new f(4);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a}const V=S;function I(o,i,a){const M=a??new f(4);return M[0]=o[0]*i[0],M[1]=o[1]*i[1],M[2]=o[2]*i[2],M[3]=o[3]*i[3],M}const _=I;function Y(o,i,a){const M=a??new f(4);return M[0]=o[0]/i[0],M[1]=o[1]/i[1],M[2]=o[2]/i[2],M[3]=o[3]/i[3],M}const Q=Y;function F(o){const i=o??new f(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}function R(o,i,a){const M=a??new f(4),P=o[0],n=o[1],e=o[2],t=o[3];return M[0]=i[0]*P+i[4]*n+i[8]*e+i[12]*t,M[1]=i[1]*P+i[5]*n+i[9]*e+i[13]*t,M[2]=i[2]*P+i[6]*n+i[10]*e+i[14]*t,M[3]=i[3]*P+i[7]*n+i[11]*e+i[15]*t,M}function j(o,i,a){const M=a??new f(4);return B(o,M),Sn(M,i,M)}function d(o,i,a){const M=a??new f(4);return In(o)>i?j(o,i,M):S(o,M)}function q(o,i,a){const M=a??new f(4);return Rn(o,i,.5,M)}return{create:x,fromValues:G,set:J,ceil:k,floor:b,round:on,clamp:C,add:Mn,addScaled:zn,subtract:Dn,sub:dn,equalsApproximately:Yn,equals:rn,lerp:Rn,lerpV:qn,max:Bn,min:Ln,mulScalar:Sn,scale:pn,divScalar:Zn,inverse:Pn,invert:En,dot:Gn,length:In,len:Un,lengthSq:cn,lenSq:Xn,distance:W,dist:H,distanceSq:X,distSq:w,normalize:B,negate:p,copy:S,clone:V,multiply:I,mul:_,divide:Y,div:Q,zero:F,transformMat4:R,setLength:j,truncate:d,midpoint:q}}const $t=new Map;function mt(f){let x=$t.get(f);return x||(x=bt(f),$t.set(f,x)),x}function gt(f,x,G,J,k,b){return{mat4:Kt(f),mat3:jt(x),quat:vt(G),vec2:Rt(J),vec3:yt(k),vec4:mt(b)}}const{mat4:ss,mat3:Qn,quat:cs,vec2:Ft,vec3:es,vec4:os}=gt(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);gt(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);gt(Qt,Array,Array,Array,Array,Array);var m,On,Cn,Wn,ot,it,rt,ut,Hn,jn,nt,Kn,Fn,tt,st,kn,ft,vn,_n,ct,bn,et,Jn,Nn,Gt,Ot,_t,xt;class is{constructor(x){K(this,Nn);K(this,m);K(this,On);K(this,Cn,0);K(this,Wn,!1);K(this,ot,Qn.create());K(this,it,Qn.create());K(this,rt,Qn.create());K(this,ut,Qn.create());K(this,Hn);K(this,jn);K(this,nt);K(this,Kn);K(this,Fn);K(this,tt);K(this,st);K(this,kn);K(this,ft);K(this,vn,new Float32Array([1,1]));K(this,_n,new Float32Array([0,0]));K(this,ct,new Float32Array([0,0]));K(this,bn,new Float32Array([0,0]));K(this,et);K(this,Jn,Pt({min:Ft.create(),max:Ft.create()}));!x.segments&&Yt(Lt.REQUIRED_SEGMENTS),sn(this,Hn,x.label??"Shape"),sn(this,On,x.radius??0),sn(this,m,x.renderer),sn(this,jn,x.segments);const{startAngle:G,endAngle:J,innerRadius:k}=x;mn(this,Nn,Gt).call(this,G,J,k),mn(this,Nn,Ot).call(this),mn(this,Nn,_t).call(this),this.Scale=E(this,vn),this.Origin=E(this,_n),this.Rotation=E(this,Cn),this.Position=E(this,bn)}Update(){return E(this,m).SetVertexBuffers(E(this,st)),E(this,m).SetIndexBuffer(E(this,tt)),E(this,m).SetBindGroups(E(this,ft)),mn(this,Nn,xt).call(this)}Render(x=!0){E(this,m).SavePipelineState(),E(this,m).Render(E(this.Update(),nt),x),E(this,m).RestorePipelineState()}set Color(x){E(this,Kn).set(Array.isArray(x)||ArrayBuffer.isView(x)?x:x.rgba),E(this,m).WriteBuffer(E(this,kn),E(this,Kn),E(this,et).color)}get Color(){return E(this,Kn)}set Position(x){E(this,bn).set(x),Qn.translation(E(this,bn),E(this,ut)),sn(this,Wn,!0)}get Position(){return E(this,bn)}set Rotation(x){Qn.rotation(sn(this,Cn,x),E(this,rt)),sn(this,Wn,!0)}get Rotation(){return E(this,Cn)}set Scale(x){E(this,vn).set(x),Qn.scaling(E(this,vn),E(this,it)),sn(this,Wn,!0)}get Scale(){return E(this,vn)}set Origin(x){E(this,_n)[0]=x[0],E(this,_n)[1]=x[1],E(this,_n)[0]*=-E(this,On),E(this,_n)[1]*=-E(this,On),Qn.translation(E(this,_n),E(this,ot)),E(this,_n)[0]=x[0]||0,E(this,_n)[1]=x[1]||0,sn(this,Wn,!0)}get Origin(){return E(this,_n)}get Center(){return E(mn(this,Nn,xt).call(this),ct)}get Vertices(){return E(this,nt)}get Transform(){return E(this,Fn)}get BoundingBox(){return E(this,Jn)}}m=new WeakMap,On=new WeakMap,Cn=new WeakMap,Wn=new WeakMap,ot=new WeakMap,it=new WeakMap,rt=new WeakMap,ut=new WeakMap,Hn=new WeakMap,jn=new WeakMap,nt=new WeakMap,Kn=new WeakMap,Fn=new WeakMap,tt=new WeakMap,st=new WeakMap,kn=new WeakMap,ft=new WeakMap,vn=new WeakMap,_n=new WeakMap,ct=new WeakMap,bn=new WeakMap,et=new WeakMap,Jn=new WeakMap,Nn=new WeakSet,Gt=function(x=0,G=Zt.TAU,J=0){const k=G-x,b=new Float32Array((E(this,jn)+1)*2*3);for(let on=0,C=0;C<=E(this,jn);++C){const Mn=x+C*k/E(this,jn),zn=Math.cos(Mn),Dn=Math.sin(Mn);b[on++]=zn*E(this,On),b[on++]=Dn*E(this,On),b[on++]=zn*J,b[on++]=Dn*J}sn(this,st,E(this,m).CreateBuffer({size:b.byteLength,label:`${E(this,Hn)} Vertex Buffer`,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST})),E(this,m).WriteBuffer(E(this,st),b)},Ot=function(){const x=new Uint32Array(sn(this,nt,E(this,jn)*6));for(let G=0,J=0;J<E(this,jn);++J){const k=J*2;x[G++]=k+1,x[G++]=k+3,x[G++]=k+2,x[G++]=k+2,x[G++]=k+0,x[G++]=k+1}sn(this,tt,E(this,m).CreateBuffer({size:x.byteLength,label:`${E(this,Hn)} Index Buffer`,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST})),E(this,m).WriteBuffer(E(this,tt),x)},_t=function(){const{color:x,matrix:G}=E(this,m).CreateUniformBufferLayout("shape");sn(this,Kn,x),sn(this,Fn,G),sn(this,kn,E(this,m).CreateBuffer({size:(x.length+G.length)*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:`${E(this,Hn)} Uniform Buffer`})),sn(this,ft,E(this,m).CreateBindGroup(E(this,m).CreateBindGroupEntries([{buffer:E(this,m).ResolutionBuffer},{buffer:E(this,kn)}]),0,`${E(this,Hn)} Bind Group`)),sn(this,et,Pt({matrix:x.length*Float32Array.BYTES_PER_ELEMENT,color:0*Float32Array.BYTES_PER_ELEMENT}))},xt=function(){if(E(this,Wn)){Qn.multiply(E(this,ut),E(this,rt),E(this,Fn)),Qn.multiply(E(this,Fn),E(this,it),E(this,Fn)),Qn.multiply(E(this,Fn),E(this,ot),E(this,Fn)),E(this,m).WriteBuffer(E(this,kn),E(this,Fn),E(this,et).matrix);const x=E(this,ct)[0]=E(this,Fn)[8],G=E(this,ct)[1]=E(this,Fn)[9];E(this,Jn).min[0]=x-E(this,On),E(this,Jn).min[1]=G-E(this,On),E(this,Jn).max[0]=x+E(this,On),E(this,Jn).max[1]=G+E(this,On),sn(this,Wn,!1)}return this};export{ts as S,is as a};

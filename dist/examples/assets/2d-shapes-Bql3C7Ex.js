import{a as e,c as t,d as n,f as r,l as i,m as a,p as o,s,t as c}from"./lib-Dec1TxwB.js";var l,u,d,f=new s;async function p(s){try{u=new(await(o.Renderer(s,`2D Shapes`)))}catch(e){alert(e)}let p=new c,m=new n(3349069),h=[],g=[],_=[],v=new e,y=new u.Pipeline,b=y.CreateShaderModule(a);u.CreatePassDescriptor(u.CreateColorAttachment(m)),await u.AddPipeline(y,{fragment:y.CreateFragmentState(b),vertex:y.CreateVertexState(b,v.GetPositionBufferLayout(y))}),v.Destroy();function x(){f.Traverse(e=>e.Destroy?.()),h.splice(0),g.splice(0),_.splice(0),f.Children.splice(0),cancelAnimationFrame(l)}function S(){w(),l=requestAnimationFrame(T)}function C(){return m.rgb=[r.Random(.3),r.Random(.2),r.Random(.4)]}function w(){let[n,a]=u.CanvasSize;for(let o=3;o<=12;o++){let s=o===11&&64||o;for(let o=0;o<2;o++){let c=r.Random(50,100),l=new t(new e({segments:s,radius:c,innerRadius:r.Random(.75,.95)*c*o}),new i(C()));_.push([r.Random(-1),r.Random(-1)]),l.Rotation=r.Random(0,r.TAU),l.Position=[r.Random(c,n-c),r.Random(c,a-c)],l.SetRenderPipeline(y),g.push(r.Random(1,10)),h.push(r.Random(0,.1)),f.Add(l)}}}function T(e,t=0){let[n,r]=u.CanvasSize;l=requestAnimationFrame(T),u.Render(f),f.Traverse(e=>{let{min:i,max:a}=e.BoundingBox,[o,s]=e.Position,c=_[t];(i[0]<=0||a[0]>=n)&&(c[0]*=-1,e.Material.Color=C()),(i[1]<=0||a[1]>=r)&&(c[1]*=-1,e.Material.Color=C()),e.Position=[o+c[0]*g[t],s+c[1]*g[t]],e.Rotation+=h[t++]})}d=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-240,!f.MainCamera&&f.AddCamera(p),u.SetCanvasSize(e,n),p.Size=u.CanvasSize}x(),S()}),d.observe(document.body)}function m(){o.OnLost=()=>void 0,cancelAnimationFrame(l),d.disconnect(),u.Destroy(),o.Destroy(),f.Destroy()}export{m as destroy,p as run};
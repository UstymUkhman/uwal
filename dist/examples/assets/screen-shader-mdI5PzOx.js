import{_ as e,d as t,p as n}from"./lib-CUrWRaeN.js";var r=`struct Screen{color: vec3f,time: f32};struct VertexOutput{@location(0)coord: vec2f,@builtin(position)position: vec4f};@group(0)@binding(0)var<uniform>screen: Screen;@vertex fn vertex(@builtin(vertex_index)index: u32)->VertexOutput {var output: VertexOutput;let coord=GetFullQuadCoord(index);output.position=vec4f(coord,0,1);output.coord=(coord+1)*0.5;return output;}@fragment fn fragment(@location(0)coord: vec2f)->@location(0)vec4f {let c=screen.color*cos(screen.time);let l=screen.color*length(coord.xy);return vec4f(screen.color+c+l,1);}`,i,a,o,s;async function c(c){try{a=new(await(n.Renderer(c,`Screen Shader`)))}catch(e){alert(e)}let l=await a.CreatePipeline([e,r]),{screen:u,buffer:d}=l.CreateUniformBuffer(`screen`);l.SetBindGroupFromResources(d),u.color.set(new t(23196).rgb),l.SetDrawParams(6),o=d;function f(e){l.WriteBuffer(d,u.time.buffer),i=requestAnimationFrame(f),u.time.set([e*.001]),a.Render()}s=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-240,a.SetCanvasSize(e,n)}cancelAnimationFrame(i),i=requestAnimationFrame(f)}),s.observe(document.body)}function l(){n.OnLost=()=>void 0,cancelAnimationFrame(i),s.disconnect(),a.Destroy(),n.Destroy(o)}export{l as destroy,c as run};
var cn=(e,n,r)=>{if(!n.has(e))throw TypeError("Cannot "+r)};var i=(e,n,r)=>(cn(e,n,"read from private field"),r?r.call(e):n.get(e)),s=(e,n,r)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,r)},g=(e,n,r,t)=>(cn(e,n,"write to private field"),t?t.call(e,r):n.set(e,r),r);var D=(e,n,r)=>(cn(e,n,"access private method"),r);import{C as sn,T as mn,E as Vn,N as On}from"./index-B25kT6SQ.js";let T=1e-6,l=Float32Array;function Rn(e){const n=l;return l=e,n}function k(e=0,n=0){const r=new l(2);return e!==void 0&&(r[0]=e,n!==void 0&&(r[1]=n)),r}let Dn=Float32Array;const Fn=k;function In(e,n,r){return r=r||new l(2),r[0]=e,r[1]=n,r}function Nn(e,n){return n=n||new l(2),n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n}function Ln(e,n){return n=n||new l(2),n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n}function bn(e,n){return n=n||new l(2),n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n}function Wn(e,n=0,r=1,t){return t=t||new l(2),t[0]=Math.min(r,Math.max(n,e[0])),t[1]=Math.min(r,Math.max(n,e[1])),t}function Yn(e,n,r){return r=r||new l(2),r[0]=e[0]+n[0],r[1]=e[1]+n[1],r}function jn(e,n,r,t){return t=t||new l(2),t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Qn(e,n){const r=e[0],t=e[1],o=e[0],a=e[1],u=Math.sqrt(r*r+t*t),f=Math.sqrt(o*o+a*a),h=u*f,c=h&&Mn(e,n)/h;return Math.acos(c)}function xn(e,n,r){return r=r||new l(2),r[0]=e[0]-n[0],r[1]=e[1]-n[1],r}const Xn=xn;function Hn(e,n){return Math.abs(e[0]-n[0])<T&&Math.abs(e[1]-n[1])<T}function Jn(e,n){return e[0]===n[0]&&e[1]===n[1]}function gn(e,n,r,t){return t=t||new l(2),t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function Kn(e,n,r,t){return t=t||new l(2),t[0]=e[0]+r[0]*(n[0]-e[0]),t[1]=e[1]+r[1]*(n[1]-e[1]),t}function Zn(e,n,r){return r=r||new l(2),r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r}function kn(e,n,r){return r=r||new l(2),r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r}function un(e,n,r){return r=r||new l(2),r[0]=e[0]*n,r[1]=e[1]*n,r}const dn=un;function ne(e,n,r){return r=r||new l(2),r[0]=e[0]/n,r[1]=e[1]/n,r}function yn(e,n){return n=n||new l(2),n[0]=1/e[0],n[1]=1/e[1],n}const ee=yn;function re(e,n,r){r=r||new Dn(3);const t=e[0]*n[1]-e[1]*n[0];return r[0]=0,r[1]=0,r[2]=t,r}function Mn(e,n){return e[0]*n[0]+e[1]*n[1]}function fn(e){const n=e[0],r=e[1];return Math.sqrt(n*n+r*r)}const te=fn;function Sn(e){const n=e[0],r=e[1];return n*n+r*r}const ie=Sn;function wn(e,n){const r=e[0]-n[0],t=e[1]-n[1];return Math.sqrt(r*r+t*t)}const oe=wn;function Bn(e,n){const r=e[0]-n[0],t=e[1]-n[1];return r*r+t*t}const ce=Bn;function An(e,n){n=n||new l(2);const r=e[0],t=e[1],o=Math.sqrt(r*r+t*t);return o>1e-5?(n[0]=r/o,n[1]=t/o):(n[0]=0,n[1]=0),n}function ae(e,n){return n=n||new l(2),n[0]=-e[0],n[1]=-e[1],n}function hn(e,n){return n=n||new l(2),n[0]=e[0],n[1]=e[1],n}const ue=hn;function Cn(e,n,r){return r=r||new l(2),r[0]=e[0]*n[0],r[1]=e[1]*n[1],r}const fe=Cn;function Tn(e,n,r){return r=r||new l(2),r[0]=e[0]/n[0],r[1]=e[1]/n[1],r}const he=Tn;function le(e=1,n){n=n||new l(2);const r=Math.random()*2*Math.PI;return n[0]=Math.cos(r)*e,n[1]=Math.sin(r)*e,n}function se(e){return e=e||new l(2),e[0]=0,e[1]=0,e}function $e(e,n,r){r=r||new l(2);const t=e[0],o=e[1];return r[0]=t*n[0]+o*n[4]+n[12],r[1]=t*n[1]+o*n[5]+n[13],r}function pe(e,n,r){r=r||new l(2);const t=e[0],o=e[1];return r[0]=n[0]*t+n[4]*o+n[8],r[1]=n[1]*t+n[5]*o+n[9],r}function xe(e,n,r,t){t=t||new l(2);const o=e[0]-n[0],a=e[1]-n[1],u=Math.sin(r),f=Math.cos(r);return t[0]=o*f-a*u+n[0],t[1]=o*u+a*f+n[1],t}function Un(e,n,r){return r=r||new l(2),An(e,r),un(r,n,r)}function ge(e,n,r){return r=r||new l(2),fn(e)>n?Un(e,n,r):hn(e,r)}function ye(e,n,r){return r=r||new l(2),gn(e,n,.5,r)}var $n=Object.freeze({__proto__:null,add:Yn,addScaled:jn,angle:Qn,ceil:Nn,clamp:Wn,clone:ue,copy:hn,create:k,cross:re,dist:oe,distSq:ce,distance:wn,distanceSq:Bn,div:he,divScalar:ne,divide:Tn,dot:Mn,equals:Jn,equalsApproximately:Hn,floor:Ln,fromValues:Fn,inverse:yn,invert:ee,len:te,lenSq:ie,length:fn,lengthSq:Sn,lerp:gn,lerpV:Kn,max:Zn,midpoint:ye,min:kn,mul:fe,mulScalar:un,multiply:Cn,negate:ae,normalize:An,random:le,rotate:xe,round:bn,scale:dn,set:In,setDefaultType:Rn,setLength:Un,sub:Xn,subtract:xn,transformMat3:pe,transformMat4:$e,truncate:ge,zero:se});let pn=Float32Array;const qn=new Map([[Float32Array,()=>new Float32Array(12)],[Float64Array,()=>new Float64Array(12)],[Array,()=>new Array(12).fill(0)]]);let p=qn.get(Float32Array);function Me(e){const n=pn;return pn=e,p=qn.get(e),n}function Se(e,n,r,t,o,a,u,f,h){const c=p();return c[3]=0,c[7]=0,c[11]=0,e!==void 0&&(c[0]=e,n!==void 0&&(c[1]=n,r!==void 0&&(c[2]=r,t!==void 0&&(c[4]=t,o!==void 0&&(c[5]=o,a!==void 0&&(c[6]=a,u!==void 0&&(c[8]=u,f!==void 0&&(c[9]=f,h!==void 0&&(c[10]=h))))))))),c}function we(e,n,r,t,o,a,u,f,h,c){return c=c||p(),c[0]=e,c[1]=n,c[2]=r,c[3]=0,c[4]=t,c[5]=o,c[6]=a,c[7]=0,c[8]=u,c[9]=f,c[10]=h,c[11]=0,c}function Be(e,n){return n=n||p(),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=0,n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=0,n}function Ae(e,n){n=n||p();const r=e[0],t=e[1],o=e[2],a=e[3],u=r+r,f=t+t,h=o+o,c=r*u,$=t*u,x=t*f,B=o*u,A=o*f,M=o*h,V=a*u,O=a*f,R=a*h;return n[0]=1-x-M,n[1]=$+R,n[2]=B-O,n[3]=0,n[4]=$-R,n[5]=1-c-M,n[6]=A+V,n[7]=0,n[8]=B+O,n[9]=A-V,n[10]=1-c-x,n[11]=0,n}function Ce(e,n){return n=n||p(),n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[4]=-e[4],n[5]=-e[5],n[6]=-e[6],n[8]=-e[8],n[9]=-e[9],n[10]=-e[10],n}function ln(e,n){return n=n||p(),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[8]=e[8],n[9]=e[9],n[10]=e[10],n}const Te=ln;function Ue(e,n){return Math.abs(e[0]-n[0])<T&&Math.abs(e[1]-n[1])<T&&Math.abs(e[2]-n[2])<T&&Math.abs(e[4]-n[4])<T&&Math.abs(e[5]-n[5])<T&&Math.abs(e[6]-n[6])<T&&Math.abs(e[8]-n[8])<T&&Math.abs(e[9]-n[9])<T&&Math.abs(e[10]-n[10])<T}function qe(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]}function Pn(e){return e=e||p(),e[0]=1,e[1]=0,e[2]=0,e[4]=0,e[5]=1,e[6]=0,e[8]=0,e[9]=0,e[10]=1,e}function Pe(e,n){if(n=n||p(),n===e){let x;return x=e[1],e[1]=e[4],e[4]=x,x=e[2],e[2]=e[8],e[8]=x,x=e[6],e[6]=e[9],e[9]=x,n}const r=e[0*4+0],t=e[0*4+1],o=e[0*4+2],a=e[1*4+0],u=e[1*4+1],f=e[1*4+2],h=e[2*4+0],c=e[2*4+1],$=e[2*4+2];return n[0]=r,n[1]=a,n[2]=h,n[4]=t,n[5]=u,n[6]=c,n[8]=o,n[9]=f,n[10]=$,n}function vn(e,n){n=n||p();const r=e[0*4+0],t=e[0*4+1],o=e[0*4+2],a=e[1*4+0],u=e[1*4+1],f=e[1*4+2],h=e[2*4+0],c=e[2*4+1],$=e[2*4+2],x=$*u-f*c,B=-$*a+f*h,A=c*a-u*h,M=1/(r*x+t*B+o*A);return n[0]=x*M,n[1]=(-$*t+o*c)*M,n[2]=(f*t-o*u)*M,n[4]=B*M,n[5]=($*r-o*h)*M,n[6]=(-f*r+o*a)*M,n[8]=A*M,n[9]=(-c*r+t*h)*M,n[10]=(u*r-t*a)*M,n}function ve(e){const n=e[0],r=e[0*4+1],t=e[0*4+2],o=e[1*4+0],a=e[1*4+1],u=e[1*4+2],f=e[2*4+0],h=e[2*4+1],c=e[2*4+2];return n*(a*c-h*u)-o*(r*c-h*t)+f*(r*u-a*t)}const ze=vn;function zn(e,n,r){r=r||p();const t=e[0],o=e[1],a=e[2],u=e[4],f=e[5],h=e[6],c=e[8],$=e[9],x=e[10],B=n[0],A=n[1],M=n[2],V=n[4],O=n[5],R=n[6],rn=n[8],tn=n[9],on=n[10];return r[0]=t*B+u*A+c*M,r[1]=o*B+f*A+$*M,r[2]=a*B+h*A+x*M,r[4]=t*V+u*O+c*R,r[5]=o*V+f*O+$*R,r[6]=a*V+h*O+x*R,r[8]=t*rn+u*tn+c*on,r[9]=o*rn+f*tn+$*on,r[10]=a*rn+h*tn+x*on,r}const Ee=zn;function Ge(e,n,r){return r=r||Pn(),e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[4]=e[4],r[5]=e[5],r[6]=e[6]),r[8]=n[0],r[9]=n[1],r[10]=1,r}function _e(e,n){return n=n||k(),n[0]=e[8],n[1]=e[9],n}function me(e,n,r){r=r||k();const t=n*4;return r[0]=e[t+0],r[1]=e[t+1],r}function Ve(e,n,r,t){t!==e&&(t=ln(e,t));const o=r*4;return t[o+0]=n[0],t[o+1]=n[1],t}function Oe(e,n){n=n||k();const r=e[0],t=e[1],o=e[4],a=e[5];return n[0]=Math.sqrt(r*r+t*t),n[1]=Math.sqrt(o*o+a*a),n}function Re(e,n){return n=n||p(),n[0]=1,n[1]=0,n[2]=0,n[4]=0,n[5]=1,n[6]=0,n[8]=e[0],n[9]=e[1],n[10]=1,n}function De(e,n,r){r=r||p();const t=n[0],o=n[1],a=e[0],u=e[1],f=e[2],h=e[1*4+0],c=e[1*4+1],$=e[1*4+2],x=e[2*4+0],B=e[2*4+1],A=e[2*4+2];return e!==r&&(r[0]=a,r[1]=u,r[2]=f,r[4]=h,r[5]=c,r[6]=$),r[8]=a*t+h*o+x,r[9]=u*t+c*o+B,r[10]=f*t+$*o+A,r}function Fe(e,n){n=n||p();const r=Math.cos(e),t=Math.sin(e);return n[0]=r,n[1]=t,n[2]=0,n[4]=-t,n[5]=r,n[6]=0,n[8]=0,n[9]=0,n[10]=1,n}function Ie(e,n,r){r=r||p();const t=e[0*4+0],o=e[0*4+1],a=e[0*4+2],u=e[1*4+0],f=e[1*4+1],h=e[1*4+2],c=Math.cos(n),$=Math.sin(n);return r[0]=c*t+$*u,r[1]=c*o+$*f,r[2]=c*a+$*h,r[4]=c*u-$*t,r[5]=c*f-$*o,r[6]=c*h-$*a,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10]),r}function Ne(e,n){return n=n||p(),n[0]=e[0],n[1]=0,n[2]=0,n[4]=0,n[5]=e[1],n[6]=0,n[8]=0,n[9]=0,n[10]=1,n}function Le(e,n,r){r=r||p();const t=n[0],o=n[1];return r[0]=t*e[0*4+0],r[1]=t*e[0*4+1],r[2]=t*e[0*4+2],r[4]=o*e[1*4+0],r[5]=o*e[1*4+1],r[6]=o*e[1*4+2],e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10]),r}function be(e,n){return n=n||p(),n[0]=e,n[1]=0,n[2]=0,n[4]=0,n[5]=e,n[6]=0,n[8]=0,n[9]=0,n[10]=1,n}function We(e,n,r){return r=r||p(),r[0]=n*e[0*4+0],r[1]=n*e[0*4+1],r[2]=n*e[0*4+2],r[4]=n*e[1*4+0],r[5]=n*e[1*4+1],r[6]=n*e[1*4+2],e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10]),r}var C=Object.freeze({__proto__:null,clone:Te,copy:ln,create:Se,determinant:ve,equals:qe,equalsApproximately:Ue,fromMat4:Be,fromQuat:Ae,getAxis:me,getScaling:Oe,getTranslation:_e,identity:Pn,inverse:vn,invert:ze,mul:Ee,multiply:zn,negate:Ce,rotate:Ie,rotation:Fe,scale:Le,scaling:Ne,set:we,setAxis:Ve,setDefaultType:Me,setTranslation:Ge,translate:De,translation:Re,transpose:Pe,uniformScale:We,uniformScaling:be}),y,S,F,q,Y,j,Q,X,v,P,H,I,N,G,J,L,w,b,W,z,_,m,E,K,U,d,En,nn,Gn,en,_n,Z,an;class Qe{constructor(n){s(this,d);s(this,nn);s(this,en);s(this,Z);s(this,y,void 0);s(this,S,void 0);s(this,F,0);s(this,q,!1);s(this,Y,C.create());s(this,j,C.create());s(this,Q,C.create());s(this,X,C.create());s(this,v,void 0);s(this,P,void 0);s(this,H,void 0);s(this,I,void 0);s(this,N,void 0);s(this,G,void 0);s(this,J,void 0);s(this,L,[1,1]);s(this,w,[0,0]);s(this,b,[0,0]);s(this,W,[0,0]);s(this,z,{min:$n.create(),max:$n.create()});s(this,_,sn({color:4,matrix:12}));s(this,m,sn({color:0,matrix:4}));s(this,E,new Float32Array(i(this,_).color+i(this,_).matrix));s(this,K,i(this,E).subarray(i(this,m).color,i(this,m).color+i(this,_).color));s(this,U,i(this,E).subarray(i(this,m).matrix,i(this,m).matrix+i(this,_).matrix));n.segments||mn(Vn.REQUIRED_SEGMENTS),g(this,v,n.label??"Shape"),g(this,S,n.radius??0),g(this,y,n.renderer),g(this,P,n.segments);const{startAngle:r,endAngle:t,innerRadius:o}=n;D(this,d,En).call(this,r,t,o),D(this,nn,Gn).call(this),D(this,en,_n).call(this),this.Scale=i(this,L),this.Origin=i(this,w),this.Rotation=i(this,F),this.Position=i(this,W)}Update(){return i(this,y).SetVertexBuffers(i(this,I)),i(this,y).SetIndexBuffer(i(this,N)),i(this,y).SetBindGroups(i(this,J)),D(this,Z,an).call(this)}set Color(n){i(this,K).set(n),i(this,y).WriteBuffer(i(this,G),i(this,E))}get Color(){return i(this,K)}set Position(n){C.translation(g(this,W,n),i(this,X)),g(this,q,!0)}get Position(){return i(this,W)}set Rotation(n){C.rotation(g(this,F,n),i(this,Q)),g(this,q,!0)}get Rotation(){return i(this,F)}set Scale(n){C.scaling(g(this,L,n),i(this,j)),g(this,q,!0)}get Scale(){return i(this,L)}set Origin(n){i(this,w)[0]=n[0],i(this,w)[1]=n[1],i(this,w)[0]*=-i(this,S),i(this,w)[1]*=-i(this,S),C.translation(i(this,w),i(this,Y)),i(this,w)[0]=n[0]||0,i(this,w)[1]=n[1]||0,g(this,q,!0)}get Origin(){return i(this,w)}get Center(){return i(D(this,Z,an).call(this),b)}get Vertices(){return i(this,H)}get Transform(){return i(this,U)}get BoundingBox(){return i(this,z)}}y=new WeakMap,S=new WeakMap,F=new WeakMap,q=new WeakMap,Y=new WeakMap,j=new WeakMap,Q=new WeakMap,X=new WeakMap,v=new WeakMap,P=new WeakMap,H=new WeakMap,I=new WeakMap,N=new WeakMap,G=new WeakMap,J=new WeakMap,L=new WeakMap,w=new WeakMap,b=new WeakMap,W=new WeakMap,z=new WeakMap,_=new WeakMap,m=new WeakMap,E=new WeakMap,K=new WeakMap,U=new WeakMap,d=new WeakSet,En=function(n=0,r=On.TAU,t=0){const o=r-n,a=new Float32Array((i(this,P)+1)*2*3);for(let u=0,f=0;f<=i(this,P);++f){const h=n+f*o/i(this,P),c=Math.cos(h),$=Math.sin(h);a[u++]=c*i(this,S),a[u++]=$*i(this,S),a[u++]=c*t,a[u++]=$*t}g(this,I,i(this,y).CreateBuffer({size:a.byteLength,label:`${i(this,v)} Vertex Data Buffer`,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST})),i(this,y).WriteBuffer(i(this,I),a)},nn=new WeakSet,Gn=function(){const n=new Uint32Array(g(this,H,i(this,P)*6));for(let r=0,t=0;t<i(this,P);t++){const o=t*2;n[r++]=o+1,n[r++]=o+3,n[r++]=o+2,n[r++]=o+2,n[r++]=o+0,n[r++]=o+1}g(this,N,i(this,y).CreateBuffer({size:n.byteLength,label:`${i(this,v)} Index Buffer`,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST})),i(this,y).WriteBuffer(i(this,N),n)},en=new WeakSet,_n=function(){g(this,G,i(this,y).CreateBuffer({size:i(this,E).length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:`${i(this,v)} Uniform Buffer`})),g(this,J,i(this,y).CreateBindGroup(i(this,y).CreateBindGroupEntries([{buffer:i(this,y).ResolutionBuffer},{buffer:i(this,G)}]),0,`${i(this,v)} Bind Group`))},Z=new WeakSet,an=function(){if(i(this,q)){C.multiply(i(this,X),i(this,Q),i(this,U)),C.multiply(i(this,U),i(this,j),i(this,U)),C.multiply(i(this,U),i(this,Y),i(this,U)),i(this,y).WriteBuffer(i(this,G),i(this,E));const n=i(this,b)[0]=i(this,U)[8],r=i(this,b)[1]=i(this,U)[9];i(this,z).min[0]=n-i(this,S),i(this,z).min[1]=r-i(this,S),i(this,z).max[0]=n+i(this,S),i(this,z).max[1]=r+i(this,S),g(this,q,!1)}return this};var Xe="struct Shape{color: vec4f,matrix: mat3x3f};@group(0)@binding(0)var<uniform>resolution: vec2f;fn GetClipSpace(position: vec2f)->vec2f{let clipSpace=position/resolution*2-1;return clipSpace*vec2f(1,-1);}@group(0)@binding(1)var<uniform>shape: Shape;fn GetVertexClipSpace(position: vec2f)->vec4f{let matrixPosition=shape.matrix*vec3f(position,1);let clipSpace=GetClipSpace(matrixPosition.xy);return vec4f(clipSpace,0.0,1.0);}@vertex fn vertex(@location(0)position: vec2f)->@builtin(position)vec4f {return GetVertexClipSpace(position);}";export{Xe as S,Qe as a};

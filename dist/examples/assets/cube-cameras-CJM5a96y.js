import{a as e,b as t,c as n,f as r,l as i,m as a,n as o,o as s,p as c,r as l,v as u}from"./lib-cC2LiaUE.js";var d=``+new URL(`dice-Vcs4qiRq.jpg`,import.meta.url).href,f=`@group(0)@binding(1)var Sampler: sampler;@group(0)@binding(2)var Texture: texture_2d<f32>;@fragment fn fragment(cube: MeshVertexUV)->@location(0)vec4f {return textureSample(Texture,Sampler,cube.uv);}`,p,m,h,g,_=new s;async function v(s){try{m=new(await(a.Renderer(s,`Cube / Cameras`)))}catch(e){alert(e)}let v,y,b,x=1/0,S=new m.Pipeline,C=c.Vec3.create(),w=new o,T=new l,E=c.Vec3.create(),D=c.Vec3.create(),O=new n(`Cube`,`uint16`);O.Primitive=i();let k=new e(O,null),A=new e(O,null),j=c.Vec3.create(),M=c.Vec3.create(),N=c.Vec3.create(),P=new(await(a.Texture(m))),F=await P.CreateImageBitmap(d);h=await P.CopyImageToTexture(F);let I=S.CreateShaderModule([u,f]);m.CreatePassDescriptor(m.CreateColorAttachment(new r(1657907))),await m.AddPipeline(S,{primitive:S.CreatePrimitiveState(),multisample:S.CreateMultisampleState(),depthStencil:S.CreateDepthStencilState(),fragment:S.CreateFragmentState(I),vertex:S.CreateVertexState(I,[O.GetPositionBufferLayout(S,`vertexUV`),S.CreateVertexBufferLayout(`uv`,`vertexUV`)],`vertexUV`)}),A.SetRenderPipeline(S,[P.CreateSampler({filter:t.LINEAR}),h.createView()]),k.SetRenderPipeline(S,[P.CreateSampler({filter:t.LINEAR}),h.createView()]),O.AddVertexBuffer(S,new Float32Array([.5,.5,.75,.5,.5,1,.75,1,.25,.5,.5,.5,.25,1,.5,1,0,0,0,.5,.25,0,.25,.5,.5,0,.5,.5,.75,0,.75,.5,0,.5,.25,.5,0,1,.25,1,.25,0,.5,0,.25,.5,.5,.5]),`uv`,`vertexUV`),_.Add([k,A]),_.AddCamera(T),_.AddCamera(w);function L(){x=1/0,clearTimeout(b),cancelAnimationFrame(p)}function R(){b=setTimeout(()=>{let e=-v||0,t=c.RandomInt(-2,2)||1/0,n=c.RandomInt(-2,2)||1/0,r=c.RandomInt(-2,2)||1/0;M[0]=Math.PI/t,M[1]=Math.PI/n,M[2]=Math.PI/r,N[0]=Math.PI/t+v,N[1]=!isFinite(t)&&v||Math.abs(t)<2&&e,N[2]=Math.abs(t)===2&&Math.sign(t)*e,N[1]&&=N[1]+Math.PI/n,N[2]&&=N[2]+Math.PI/r,x=Date.now()},1e3)}function z(e){p=requestAnimationFrame(z),e=(Date.now()-x)/1e3;let t=c.SmoothStep(e),n=c.SmootherStep(e*2);.5<=t&&(n=(.5-(t-.5))*2,t===1&&(c.Vec3.copy(M,j),c.Vec3.copy(N,D),x=1/0,R()));{let[e,r,i]=j;C[0]=c.Lerp(e,M[0],t),C[1]=c.Lerp(r,M[1],t),C[2]=c.Lerp(i,M[2],t),k.Transform=[[0,c.Lerp(0,4,n),0],C],k.Visible=!(A.Visible=!1),_.MainCamera=w,m.Render(_,!1)}{let[e,r,i]=E,[a,o,s]=D;C[0]=c.Lerp(a,N[0],t),C[1]=c.Lerp(o,N[1],t),C[2]=c.Lerp(s,N[2],t),A.Transform=[[e,c.Lerp(r,y,n),i],C],A.Visible=!(k.Visible=!1),_.MainCamera=T,m.Render(_)}}g=new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];e=e<=960&&e||e-Math.max(e*.15,240),m.SetCanvasSize(e,n),w.ResetLocalMatrix(),T.Bottom=n,T.Right=e,T.Near=-100,m.MultisampleTexture=P.CreateMultisampleTexture(),w.AspectRatio=m.AspectRatio,w.Position=[e/360,2,8],T.UpdateViewProjectionMatrix(),w.UpdateViewProjectionMatrix();let r=n-n/3.6,i=(e-360)/1320;v=i*.2+.1,y=r*.39;let a=i+1;k.Scaling=[a,a,a];let o=(1-(n-1e3)/-400)*36+72;A.Scaling=[o*a,o*a,o*a],c.Vec3.set(.2,v,0,D),c.Vec3.set(e-(i*250+100),r,0,E)}L(),R(),p=requestAnimationFrame(z)}),g.observe(document.body)}function y(){a.OnLost=()=>void 0,cancelAnimationFrame(p),g.disconnect(),m.Destroy(),_.Destroy(),a.Destroy(void 0,h)}export{y as destroy,v as run};
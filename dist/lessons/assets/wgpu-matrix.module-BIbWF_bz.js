function tt(M,A){return class extends M{constructor(...L){super(...L),A(this)}}}const st=tt(Array,M=>M.fill(0));let $=1e-6;function ct(M){function A(n=0,u=0){const t=new M(2);return n!==void 0&&(t[0]=n,u!==void 0&&(t[1]=u)),t}const L=A;function un(n,u,t){const c=t??new M(2);return c[0]=n,c[1]=u,c}function rn(n,u){const t=u??new M(2);return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function nn(n,u){const t=u??new M(2);return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function $n(n,u){const t=u??new M(2);return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function fn(n,u=0,t=1,c){const i=c??new M(2);return i[0]=Math.min(t,Math.max(u,n[0])),i[1]=Math.min(t,Math.max(u,n[1])),i}function tn(n,u,t){const c=t??new M(2);return c[0]=n[0]+u[0],c[1]=n[1]+u[1],c}function Vn(n,u,t,c){const i=c??new M(2);return i[0]=n[0]+u[0]*t,i[1]=n[1]+u[1]*t,i}function zn(n,u){const t=n[0],c=n[1],i=u[0],D=u[1],x=Math.sqrt(t*t+c*c),r=Math.sqrt(i*i+D*D),f=x*r,l=f&&Dn(n,u)/f;return Math.acos(l)}function sn(n,u,t){const c=t??new M(2);return c[0]=n[0]-u[0],c[1]=n[1]-u[1],c}const gn=sn;function _(n,u){return Math.abs(n[0]-u[0])<$&&Math.abs(n[1]-u[1])<$}function wn(n,u){return n[0]===u[0]&&n[1]===u[1]}function an(n,u,t,c){const i=c??new M(2);return i[0]=n[0]+t*(u[0]-n[0]),i[1]=n[1]+t*(u[1]-n[1]),i}function An(n,u,t,c){const i=c??new M(2);return i[0]=n[0]+t[0]*(u[0]-n[0]),i[1]=n[1]+t[1]*(u[1]-n[1]),i}function qn(n,u,t){const c=t??new M(2);return c[0]=Math.max(n[0],u[0]),c[1]=Math.max(n[1],u[1]),c}function cn(n,u,t){const c=t??new M(2);return c[0]=Math.min(n[0],u[0]),c[1]=Math.min(n[1],u[1]),c}function N(n,u,t){const c=t??new M(2);return c[0]=n[0]*u,c[1]=n[1]*u,c}const Zn=N;function hn(n,u,t){const c=t??new M(2);return c[0]=n[0]/u,c[1]=n[1]/u,c}function Mn(n,u){const t=u??new M(2);return t[0]=1/n[0],t[1]=1/n[1],t}const Sn=Mn;function ln(n,u,t){const c=t??new M(3),i=n[0]*u[1]-n[1]*u[0];return c[0]=0,c[1]=0,c[2]=i,c}function Dn(n,u){return n[0]*u[0]+n[1]*u[1]}function O(n){const u=n[0],t=n[1];return Math.sqrt(u*u+t*t)}const Pn=O;function F(n){const u=n[0],t=n[1];return u*u+t*t}const Y=F;function Z(n,u){const t=n[0]-u[0],c=n[1]-u[1];return Math.sqrt(t*t+c*c)}const Fn=Z;function R(n,u){const t=n[0]-u[0],c=n[1]-u[1];return t*t+c*c}const Xn=R;function k(n,u){const t=u??new M(2),c=n[0],i=n[1],D=Math.sqrt(c*c+i*i);return D>1e-5?(t[0]=c/D,t[1]=i/D):(t[0]=0,t[1]=0),t}function Yn(n,u){const t=u??new M(2);return t[0]=-n[0],t[1]=-n[1],t}function T(n,u){const t=u??new M(2);return t[0]=n[0],t[1]=n[1],t}const Tn=T;function on(n,u,t){const c=t??new M(2);return c[0]=n[0]*u[0],c[1]=n[1]*u[1],c}const Qn=on;function en(n,u,t){const c=t??new M(2);return c[0]=n[0]/u[0],c[1]=n[1]/u[1],c}const In=en;function dn(n=1,u){const t=u??new M(2),c=Math.random()*2*Math.PI;return t[0]=Math.cos(c)*n,t[1]=Math.sin(c)*n,t}function o(n){const u=n??new M(2);return u[0]=0,u[1]=0,u}function a(n,u,t){const c=t??new M(2),i=n[0],D=n[1];return c[0]=i*u[0]+D*u[4]+u[12],c[1]=i*u[1]+D*u[5]+u[13],c}function s(n,u,t){const c=t??new M(2),i=n[0],D=n[1];return c[0]=u[0]*i+u[4]*D+u[8],c[1]=u[1]*i+u[5]*D+u[9],c}function e(n,u,t,c){const i=c??new M(2),D=n[0]-u[0],x=n[1]-u[1],r=Math.sin(t),f=Math.cos(t);return i[0]=D*f-x*r+u[0],i[1]=D*r+x*f+u[1],i}function w(n,u,t){const c=t??new M(2);return k(n,c),N(c,u,c)}function h(n,u,t){const c=t??new M(2);return O(n)>u?w(n,u,c):T(n,c)}function p(n,u,t){const c=t??new M(2);return an(n,u,.5,c)}return{create:A,fromValues:L,set:un,ceil:rn,floor:nn,round:$n,clamp:fn,add:tn,addScaled:Vn,angle:zn,subtract:sn,sub:gn,equalsApproximately:_,equals:wn,lerp:an,lerpV:An,max:qn,min:cn,mulScalar:N,scale:Zn,divScalar:hn,inverse:Mn,invert:Sn,cross:ln,dot:Dn,length:O,len:Pn,lengthSq:F,lenSq:Y,distance:Z,dist:Fn,distanceSq:R,distSq:Xn,normalize:k,negate:Yn,copy:T,clone:Tn,multiply:on,mul:Qn,divide:en,div:In,random:dn,zero:o,transformMat4:a,transformMat3:s,rotate:e,setLength:w,truncate:h,midpoint:p}}const Rn=new Map;function nt(M){let A=Rn.get(M);return A||(A=ct(M),Rn.set(M,A)),A}function ot(M){function A(r,f,l){const d=new M(3);return r!==void 0&&(d[0]=r,f!==void 0&&(d[1]=f,l!==void 0&&(d[2]=l))),d}const L=A;function un(r,f,l,d){const y=d??new M(3);return y[0]=r,y[1]=f,y[2]=l,y}function rn(r,f){const l=f??new M(3);return l[0]=Math.ceil(r[0]),l[1]=Math.ceil(r[1]),l[2]=Math.ceil(r[2]),l}function nn(r,f){const l=f??new M(3);return l[0]=Math.floor(r[0]),l[1]=Math.floor(r[1]),l[2]=Math.floor(r[2]),l}function $n(r,f){const l=f??new M(3);return l[0]=Math.round(r[0]),l[1]=Math.round(r[1]),l[2]=Math.round(r[2]),l}function fn(r,f=0,l=1,d){const y=d??new M(3);return y[0]=Math.min(l,Math.max(f,r[0])),y[1]=Math.min(l,Math.max(f,r[1])),y[2]=Math.min(l,Math.max(f,r[2])),y}function tn(r,f,l){const d=l??new M(3);return d[0]=r[0]+f[0],d[1]=r[1]+f[1],d[2]=r[2]+f[2],d}function Vn(r,f,l,d){const y=d??new M(3);return y[0]=r[0]+f[0]*l,y[1]=r[1]+f[1]*l,y[2]=r[2]+f[2]*l,y}function zn(r,f){const l=r[0],d=r[1],y=r[2],z=f[0],g=f[1],S=f[2],I=Math.sqrt(l*l+d*d+y*y),q=Math.sqrt(z*z+g*g+S*S),P=I*q,V=P&&Dn(r,f)/P;return Math.acos(V)}function sn(r,f,l){const d=l??new M(3);return d[0]=r[0]-f[0],d[1]=r[1]-f[1],d[2]=r[2]-f[2],d}const gn=sn;function _(r,f){return Math.abs(r[0]-f[0])<$&&Math.abs(r[1]-f[1])<$&&Math.abs(r[2]-f[2])<$}function wn(r,f){return r[0]===f[0]&&r[1]===f[1]&&r[2]===f[2]}function an(r,f,l,d){const y=d??new M(3);return y[0]=r[0]+l*(f[0]-r[0]),y[1]=r[1]+l*(f[1]-r[1]),y[2]=r[2]+l*(f[2]-r[2]),y}function An(r,f,l,d){const y=d??new M(3);return y[0]=r[0]+l[0]*(f[0]-r[0]),y[1]=r[1]+l[1]*(f[1]-r[1]),y[2]=r[2]+l[2]*(f[2]-r[2]),y}function qn(r,f,l){const d=l??new M(3);return d[0]=Math.max(r[0],f[0]),d[1]=Math.max(r[1],f[1]),d[2]=Math.max(r[2],f[2]),d}function cn(r,f,l){const d=l??new M(3);return d[0]=Math.min(r[0],f[0]),d[1]=Math.min(r[1],f[1]),d[2]=Math.min(r[2],f[2]),d}function N(r,f,l){const d=l??new M(3);return d[0]=r[0]*f,d[1]=r[1]*f,d[2]=r[2]*f,d}const Zn=N;function hn(r,f,l){const d=l??new M(3);return d[0]=r[0]/f,d[1]=r[1]/f,d[2]=r[2]/f,d}function Mn(r,f){const l=f??new M(3);return l[0]=1/r[0],l[1]=1/r[1],l[2]=1/r[2],l}const Sn=Mn;function ln(r,f,l){const d=l??new M(3),y=r[2]*f[0]-r[0]*f[2],z=r[0]*f[1]-r[1]*f[0];return d[0]=r[1]*f[2]-r[2]*f[1],d[1]=y,d[2]=z,d}function Dn(r,f){return r[0]*f[0]+r[1]*f[1]+r[2]*f[2]}function O(r){const f=r[0],l=r[1],d=r[2];return Math.sqrt(f*f+l*l+d*d)}const Pn=O;function F(r){const f=r[0],l=r[1],d=r[2];return f*f+l*l+d*d}const Y=F;function Z(r,f){const l=r[0]-f[0],d=r[1]-f[1],y=r[2]-f[2];return Math.sqrt(l*l+d*d+y*y)}const Fn=Z;function R(r,f){const l=r[0]-f[0],d=r[1]-f[1],y=r[2]-f[2];return l*l+d*d+y*y}const Xn=R;function k(r,f){const l=f??new M(3),d=r[0],y=r[1],z=r[2],g=Math.sqrt(d*d+y*y+z*z);return g>1e-5?(l[0]=d/g,l[1]=y/g,l[2]=z/g):(l[0]=0,l[1]=0,l[2]=0),l}function Yn(r,f){const l=f??new M(3);return l[0]=-r[0],l[1]=-r[1],l[2]=-r[2],l}function T(r,f){const l=f??new M(3);return l[0]=r[0],l[1]=r[1],l[2]=r[2],l}const Tn=T;function on(r,f,l){const d=l??new M(3);return d[0]=r[0]*f[0],d[1]=r[1]*f[1],d[2]=r[2]*f[2],d}const Qn=on;function en(r,f,l){const d=l??new M(3);return d[0]=r[0]/f[0],d[1]=r[1]/f[1],d[2]=r[2]/f[2],d}const In=en;function dn(r=1,f){const l=f??new M(3),d=Math.random()*2*Math.PI,y=Math.random()*2-1,z=Math.sqrt(1-y*y)*r;return l[0]=Math.cos(d)*z,l[1]=Math.sin(d)*z,l[2]=y*r,l}function o(r){const f=r??new M(3);return f[0]=0,f[1]=0,f[2]=0,f}function a(r,f,l){const d=l??new M(3),y=r[0],z=r[1],g=r[2],S=f[3]*y+f[7]*z+f[11]*g+f[15]||1;return d[0]=(f[0]*y+f[4]*z+f[8]*g+f[12])/S,d[1]=(f[1]*y+f[5]*z+f[9]*g+f[13])/S,d[2]=(f[2]*y+f[6]*z+f[10]*g+f[14])/S,d}function s(r,f,l){const d=l??new M(3),y=r[0],z=r[1],g=r[2];return d[0]=y*f[0*4+0]+z*f[1*4+0]+g*f[2*4+0],d[1]=y*f[0*4+1]+z*f[1*4+1]+g*f[2*4+1],d[2]=y*f[0*4+2]+z*f[1*4+2]+g*f[2*4+2],d}function e(r,f,l){const d=l??new M(3),y=r[0],z=r[1],g=r[2];return d[0]=y*f[0]+z*f[4]+g*f[8],d[1]=y*f[1]+z*f[5]+g*f[9],d[2]=y*f[2]+z*f[6]+g*f[10],d}function w(r,f,l){const d=l??new M(3),y=f[0],z=f[1],g=f[2],S=f[3]*2,I=r[0],q=r[1],P=r[2],V=z*P-g*q,X=g*I-y*P,Q=y*q-z*I;return d[0]=I+V*S+(z*Q-g*X)*2,d[1]=q+X*S+(g*V-y*Q)*2,d[2]=P+Q*S+(y*X-z*V)*2,d}function h(r,f){const l=f??new M(3);return l[0]=r[12],l[1]=r[13],l[2]=r[14],l}function p(r,f,l){const d=l??new M(3),y=f*4;return d[0]=r[y+0],d[1]=r[y+1],d[2]=r[y+2],d}function n(r,f){const l=f??new M(3),d=r[0],y=r[1],z=r[2],g=r[4],S=r[5],I=r[6],q=r[8],P=r[9],V=r[10];return l[0]=Math.sqrt(d*d+y*y+z*z),l[1]=Math.sqrt(g*g+S*S+I*I),l[2]=Math.sqrt(q*q+P*P+V*V),l}function u(r,f,l,d){const y=d??new M(3),z=[],g=[];return z[0]=r[0]-f[0],z[1]=r[1]-f[1],z[2]=r[2]-f[2],g[0]=z[0],g[1]=z[1]*Math.cos(l)-z[2]*Math.sin(l),g[2]=z[1]*Math.sin(l)+z[2]*Math.cos(l),y[0]=g[0]+f[0],y[1]=g[1]+f[1],y[2]=g[2]+f[2],y}function t(r,f,l,d){const y=d??new M(3),z=[],g=[];return z[0]=r[0]-f[0],z[1]=r[1]-f[1],z[2]=r[2]-f[2],g[0]=z[2]*Math.sin(l)+z[0]*Math.cos(l),g[1]=z[1],g[2]=z[2]*Math.cos(l)-z[0]*Math.sin(l),y[0]=g[0]+f[0],y[1]=g[1]+f[1],y[2]=g[2]+f[2],y}function c(r,f,l,d){const y=d??new M(3),z=[],g=[];return z[0]=r[0]-f[0],z[1]=r[1]-f[1],z[2]=r[2]-f[2],g[0]=z[0]*Math.cos(l)-z[1]*Math.sin(l),g[1]=z[0]*Math.sin(l)+z[1]*Math.cos(l),g[2]=z[2],y[0]=g[0]+f[0],y[1]=g[1]+f[1],y[2]=g[2]+f[2],y}function i(r,f,l){const d=l??new M(3);return k(r,d),N(d,f,d)}function D(r,f,l){const d=l??new M(3);return O(r)>f?i(r,f,d):T(r,d)}function x(r,f,l){const d=l??new M(3);return an(r,f,.5,d)}return{create:A,fromValues:L,set:un,ceil:rn,floor:nn,round:$n,clamp:fn,add:tn,addScaled:Vn,angle:zn,subtract:sn,sub:gn,equalsApproximately:_,equals:wn,lerp:an,lerpV:An,max:qn,min:cn,mulScalar:N,scale:Zn,divScalar:hn,inverse:Mn,invert:Sn,cross:ln,dot:Dn,length:O,len:Pn,lengthSq:F,lenSq:Y,distance:Z,dist:Fn,distanceSq:R,distSq:Xn,normalize:k,negate:Yn,copy:T,clone:Tn,multiply:on,mul:Qn,divide:en,div:In,random:dn,zero:o,transformMat4:a,transformMat4Upper3x3:s,transformMat3:e,transformQuat:w,getTranslation:h,getAxis:p,getScaling:n,rotateX:u,rotateY:t,rotateZ:c,setLength:i,truncate:D,midpoint:x}}const kn=new Map;function Jn(M){let A=kn.get(M);return A||(A=ot(M),kn.set(M,A)),A}function et(M){const A=nt(M),L=Jn(M);function un(o,a,s,e,w,h,p,n,u){const t=new M(12);return t[3]=0,t[7]=0,t[11]=0,o!==void 0&&(t[0]=o,a!==void 0&&(t[1]=a,s!==void 0&&(t[2]=s,e!==void 0&&(t[4]=e,w!==void 0&&(t[5]=w,h!==void 0&&(t[6]=h,p!==void 0&&(t[8]=p,n!==void 0&&(t[9]=n,u!==void 0&&(t[10]=u))))))))),t}function rn(o,a,s,e,w,h,p,n,u,t){const c=t??new M(12);return c[0]=o,c[1]=a,c[2]=s,c[3]=0,c[4]=e,c[5]=w,c[6]=h,c[7]=0,c[8]=p,c[9]=n,c[10]=u,c[11]=0,c}function nn(o,a){const s=a??new M(12);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=0,s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=0,s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=0,s}function $n(o,a){const s=a??new M(12),e=o[0],w=o[1],h=o[2],p=o[3],n=e+e,u=w+w,t=h+h,c=e*n,i=w*n,D=w*u,x=h*n,r=h*u,f=h*t,l=p*n,d=p*u,y=p*t;return s[0]=1-D-f,s[1]=i+y,s[2]=x-d,s[3]=0,s[4]=i-y,s[5]=1-c-f,s[6]=r+l,s[7]=0,s[8]=x+d,s[9]=r-l,s[10]=1-c-D,s[11]=0,s}function fn(o,a){const s=a??new M(12);return s[0]=-o[0],s[1]=-o[1],s[2]=-o[2],s[4]=-o[4],s[5]=-o[5],s[6]=-o[6],s[8]=-o[8],s[9]=-o[9],s[10]=-o[10],s}function tn(o,a){const s=a??new M(12);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[8]=o[8],s[9]=o[9],s[10]=o[10],s}const Vn=tn;function zn(o,a){return Math.abs(o[0]-a[0])<$&&Math.abs(o[1]-a[1])<$&&Math.abs(o[2]-a[2])<$&&Math.abs(o[4]-a[4])<$&&Math.abs(o[5]-a[5])<$&&Math.abs(o[6]-a[6])<$&&Math.abs(o[8]-a[8])<$&&Math.abs(o[9]-a[9])<$&&Math.abs(o[10]-a[10])<$}function sn(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[4]===a[4]&&o[5]===a[5]&&o[6]===a[6]&&o[8]===a[8]&&o[9]===a[9]&&o[10]===a[10]}function gn(o){const a=o??new M(12);return a[0]=1,a[1]=0,a[2]=0,a[4]=0,a[5]=1,a[6]=0,a[8]=0,a[9]=0,a[10]=1,a}function _(o,a){const s=a??new M(12);if(s===o){let D;return D=o[1],o[1]=o[4],o[4]=D,D=o[2],o[2]=o[8],o[8]=D,D=o[6],o[6]=o[9],o[9]=D,s}const e=o[0*4+0],w=o[0*4+1],h=o[0*4+2],p=o[1*4+0],n=o[1*4+1],u=o[1*4+2],t=o[2*4+0],c=o[2*4+1],i=o[2*4+2];return s[0]=e,s[1]=p,s[2]=t,s[4]=w,s[5]=n,s[6]=c,s[8]=h,s[9]=u,s[10]=i,s}function wn(o,a){const s=a??new M(12),e=o[0*4+0],w=o[0*4+1],h=o[0*4+2],p=o[1*4+0],n=o[1*4+1],u=o[1*4+2],t=o[2*4+0],c=o[2*4+1],i=o[2*4+2],D=i*n-u*c,x=-i*p+u*t,r=c*p-n*t,f=1/(e*D+w*x+h*r);return s[0]=D*f,s[1]=(-i*w+h*c)*f,s[2]=(u*w-h*n)*f,s[4]=x*f,s[5]=(i*e-h*t)*f,s[6]=(-u*e+h*p)*f,s[8]=r*f,s[9]=(-c*e+w*t)*f,s[10]=(n*e-w*p)*f,s}function an(o){const a=o[0],s=o[0*4+1],e=o[0*4+2],w=o[1*4+0],h=o[1*4+1],p=o[1*4+2],n=o[2*4+0],u=o[2*4+1],t=o[2*4+2];return a*(h*t-u*p)-w*(s*t-u*e)+n*(s*p-h*e)}const An=wn;function qn(o,a,s){const e=s??new M(12),w=o[0],h=o[1],p=o[2],n=o[4],u=o[5],t=o[6],c=o[8],i=o[9],D=o[10],x=a[0],r=a[1],f=a[2],l=a[4],d=a[5],y=a[6],z=a[8],g=a[9],S=a[10];return e[0]=w*x+n*r+c*f,e[1]=h*x+u*r+i*f,e[2]=p*x+t*r+D*f,e[4]=w*l+n*d+c*y,e[5]=h*l+u*d+i*y,e[6]=p*l+t*d+D*y,e[8]=w*z+n*g+c*S,e[9]=h*z+u*g+i*S,e[10]=p*z+t*g+D*S,e}const cn=qn;function N(o,a,s){const e=s??gn();return o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[4]=o[4],e[5]=o[5],e[6]=o[6]),e[8]=a[0],e[9]=a[1],e[10]=1,e}function Zn(o,a){const s=a??A.create();return s[0]=o[8],s[1]=o[9],s}function hn(o,a,s){const e=s??A.create(),w=a*4;return e[0]=o[w+0],e[1]=o[w+1],e}function Mn(o,a,s,e){const w=e===o?o:tn(o,e),h=s*4;return w[h+0]=a[0],w[h+1]=a[1],w}function Sn(o,a){const s=a??A.create(),e=o[0],w=o[1],h=o[4],p=o[5];return s[0]=Math.sqrt(e*e+w*w),s[1]=Math.sqrt(h*h+p*p),s}function ln(o,a){const s=a??L.create(),e=o[0],w=o[1],h=o[2],p=o[4],n=o[5],u=o[6],t=o[8],c=o[9],i=o[10];return s[0]=Math.sqrt(e*e+w*w+h*h),s[1]=Math.sqrt(p*p+n*n+u*u),s[2]=Math.sqrt(t*t+c*c+i*i),s}function Dn(o,a){const s=a??new M(12);return s[0]=1,s[1]=0,s[2]=0,s[4]=0,s[5]=1,s[6]=0,s[8]=o[0],s[9]=o[1],s[10]=1,s}function O(o,a,s){const e=s??new M(12),w=a[0],h=a[1],p=o[0],n=o[1],u=o[2],t=o[1*4+0],c=o[1*4+1],i=o[1*4+2],D=o[2*4+0],x=o[2*4+1],r=o[2*4+2];return o!==e&&(e[0]=p,e[1]=n,e[2]=u,e[4]=t,e[5]=c,e[6]=i),e[8]=p*w+t*h+D,e[9]=n*w+c*h+x,e[10]=u*w+i*h+r,e}function Pn(o,a){const s=a??new M(12),e=Math.cos(o),w=Math.sin(o);return s[0]=e,s[1]=w,s[2]=0,s[4]=-w,s[5]=e,s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function F(o,a,s){const e=s??new M(12),w=o[0*4+0],h=o[0*4+1],p=o[0*4+2],n=o[1*4+0],u=o[1*4+1],t=o[1*4+2],c=Math.cos(a),i=Math.sin(a);return e[0]=c*w+i*n,e[1]=c*h+i*u,e[2]=c*p+i*t,e[4]=c*n-i*w,e[5]=c*u-i*h,e[6]=c*t-i*p,o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10]),e}function Y(o,a){const s=a??new M(12),e=Math.cos(o),w=Math.sin(o);return s[0]=1,s[1]=0,s[2]=0,s[4]=0,s[5]=e,s[6]=w,s[8]=0,s[9]=-w,s[10]=e,s}function Z(o,a,s){const e=s??new M(12),w=o[4],h=o[5],p=o[6],n=o[8],u=o[9],t=o[10],c=Math.cos(a),i=Math.sin(a);return e[4]=c*w+i*n,e[5]=c*h+i*u,e[6]=c*p+i*t,e[8]=c*n-i*w,e[9]=c*u-i*h,e[10]=c*t-i*p,o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2]),e}function Fn(o,a){const s=a??new M(12),e=Math.cos(o),w=Math.sin(o);return s[0]=e,s[1]=0,s[2]=-w,s[4]=0,s[5]=1,s[6]=0,s[8]=w,s[9]=0,s[10]=e,s}function R(o,a,s){const e=s??new M(12),w=o[0*4+0],h=o[0*4+1],p=o[0*4+2],n=o[2*4+0],u=o[2*4+1],t=o[2*4+2],c=Math.cos(a),i=Math.sin(a);return e[0]=c*w-i*n,e[1]=c*h-i*u,e[2]=c*p-i*t,e[8]=c*n+i*w,e[9]=c*u+i*h,e[10]=c*t+i*p,o!==e&&(e[4]=o[4],e[5]=o[5],e[6]=o[6]),e}const Xn=Pn,k=F;function Yn(o,a){const s=a??new M(12);return s[0]=o[0],s[1]=0,s[2]=0,s[4]=0,s[5]=o[1],s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function T(o,a,s){const e=s??new M(12),w=a[0],h=a[1];return e[0]=w*o[0*4+0],e[1]=w*o[0*4+1],e[2]=w*o[0*4+2],e[4]=h*o[1*4+0],e[5]=h*o[1*4+1],e[6]=h*o[1*4+2],o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10]),e}function Tn(o,a){const s=a??new M(12);return s[0]=o[0],s[1]=0,s[2]=0,s[4]=0,s[5]=o[1],s[6]=0,s[8]=0,s[9]=0,s[10]=o[2],s}function on(o,a,s){const e=s??new M(12),w=a[0],h=a[1],p=a[2];return e[0]=w*o[0*4+0],e[1]=w*o[0*4+1],e[2]=w*o[0*4+2],e[4]=h*o[1*4+0],e[5]=h*o[1*4+1],e[6]=h*o[1*4+2],e[8]=p*o[2*4+0],e[9]=p*o[2*4+1],e[10]=p*o[2*4+2],e}function Qn(o,a){const s=a??new M(12);return s[0]=o,s[1]=0,s[2]=0,s[4]=0,s[5]=o,s[6]=0,s[8]=0,s[9]=0,s[10]=1,s}function en(o,a,s){const e=s??new M(12);return e[0]=a*o[0*4+0],e[1]=a*o[0*4+1],e[2]=a*o[0*4+2],e[4]=a*o[1*4+0],e[5]=a*o[1*4+1],e[6]=a*o[1*4+2],o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10]),e}function In(o,a){const s=a??new M(12);return s[0]=o,s[1]=0,s[2]=0,s[4]=0,s[5]=o,s[6]=0,s[8]=0,s[9]=0,s[10]=o,s}function dn(o,a,s){const e=s??new M(12);return e[0]=a*o[0*4+0],e[1]=a*o[0*4+1],e[2]=a*o[0*4+2],e[4]=a*o[1*4+0],e[5]=a*o[1*4+1],e[6]=a*o[1*4+2],e[8]=a*o[2*4+0],e[9]=a*o[2*4+1],e[10]=a*o[2*4+2],e}return{clone:Vn,create:un,set:rn,fromMat4:nn,fromQuat:$n,negate:fn,copy:tn,equalsApproximately:zn,equals:sn,identity:gn,transpose:_,inverse:wn,invert:An,determinant:an,mul:cn,multiply:qn,setTranslation:N,getTranslation:Zn,getAxis:hn,setAxis:Mn,getScaling:Sn,get3DScaling:ln,translation:Dn,translate:O,rotation:Pn,rotate:F,rotationX:Y,rotateX:Z,rotationY:Fn,rotateY:R,rotationZ:Xn,rotateZ:k,scaling:Yn,scale:T,uniformScaling:Qn,uniformScale:en,scaling3D:Tn,scale3D:on,uniformScaling3D:In,uniformScale3D:dn}}const vn=new Map;function ut(M){let A=vn.get(M);return A||(A=et(M),vn.set(M,A)),A}function rt(M){const A=Jn(M);function L(n,u,t,c,i,D,x,r,f,l,d,y,z,g,S,I){const q=new M(16);return n!==void 0&&(q[0]=n,u!==void 0&&(q[1]=u,t!==void 0&&(q[2]=t,c!==void 0&&(q[3]=c,i!==void 0&&(q[4]=i,D!==void 0&&(q[5]=D,x!==void 0&&(q[6]=x,r!==void 0&&(q[7]=r,f!==void 0&&(q[8]=f,l!==void 0&&(q[9]=l,d!==void 0&&(q[10]=d,y!==void 0&&(q[11]=y,z!==void 0&&(q[12]=z,g!==void 0&&(q[13]=g,S!==void 0&&(q[14]=S,I!==void 0&&(q[15]=I)))))))))))))))),q}function un(n,u,t,c,i,D,x,r,f,l,d,y,z,g,S,I,q){const P=q??new M(16);return P[0]=n,P[1]=u,P[2]=t,P[3]=c,P[4]=i,P[5]=D,P[6]=x,P[7]=r,P[8]=f,P[9]=l,P[10]=d,P[11]=y,P[12]=z,P[13]=g,P[14]=S,P[15]=I,P}function rn(n,u){const t=u??new M(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nn(n,u){const t=u??new M(16),c=n[0],i=n[1],D=n[2],x=n[3],r=c+c,f=i+i,l=D+D,d=c*r,y=i*r,z=i*f,g=D*r,S=D*f,I=D*l,q=x*r,P=x*f,V=x*l;return t[0]=1-z-I,t[1]=y+V,t[2]=g-P,t[3]=0,t[4]=y-V,t[5]=1-d-I,t[6]=S+q,t[7]=0,t[8]=g+P,t[9]=S-q,t[10]=1-d-z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $n(n,u){const t=u??new M(16);return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t}function fn(n,u){const t=u??new M(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}const tn=fn;function Vn(n,u){return Math.abs(n[0]-u[0])<$&&Math.abs(n[1]-u[1])<$&&Math.abs(n[2]-u[2])<$&&Math.abs(n[3]-u[3])<$&&Math.abs(n[4]-u[4])<$&&Math.abs(n[5]-u[5])<$&&Math.abs(n[6]-u[6])<$&&Math.abs(n[7]-u[7])<$&&Math.abs(n[8]-u[8])<$&&Math.abs(n[9]-u[9])<$&&Math.abs(n[10]-u[10])<$&&Math.abs(n[11]-u[11])<$&&Math.abs(n[12]-u[12])<$&&Math.abs(n[13]-u[13])<$&&Math.abs(n[14]-u[14])<$&&Math.abs(n[15]-u[15])<$}function zn(n,u){return n[0]===u[0]&&n[1]===u[1]&&n[2]===u[2]&&n[3]===u[3]&&n[4]===u[4]&&n[5]===u[5]&&n[6]===u[6]&&n[7]===u[7]&&n[8]===u[8]&&n[9]===u[9]&&n[10]===u[10]&&n[11]===u[11]&&n[12]===u[12]&&n[13]===u[13]&&n[14]===u[14]&&n[15]===u[15]}function sn(n){const u=n??new M(16);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function gn(n,u){const t=u??new M(16);if(t===n){let X;return X=n[1],n[1]=n[4],n[4]=X,X=n[2],n[2]=n[8],n[8]=X,X=n[3],n[3]=n[12],n[12]=X,X=n[6],n[6]=n[9],n[9]=X,X=n[7],n[7]=n[13],n[13]=X,X=n[11],n[11]=n[14],n[14]=X,t}const c=n[0*4+0],i=n[0*4+1],D=n[0*4+2],x=n[0*4+3],r=n[1*4+0],f=n[1*4+1],l=n[1*4+2],d=n[1*4+3],y=n[2*4+0],z=n[2*4+1],g=n[2*4+2],S=n[2*4+3],I=n[3*4+0],q=n[3*4+1],P=n[3*4+2],V=n[3*4+3];return t[0]=c,t[1]=r,t[2]=y,t[3]=I,t[4]=i,t[5]=f,t[6]=z,t[7]=q,t[8]=D,t[9]=l,t[10]=g,t[11]=P,t[12]=x,t[13]=d,t[14]=S,t[15]=V,t}function _(n,u){const t=u??new M(16),c=n[0*4+0],i=n[0*4+1],D=n[0*4+2],x=n[0*4+3],r=n[1*4+0],f=n[1*4+1],l=n[1*4+2],d=n[1*4+3],y=n[2*4+0],z=n[2*4+1],g=n[2*4+2],S=n[2*4+3],I=n[3*4+0],q=n[3*4+1],P=n[3*4+2],V=n[3*4+3],X=g*V,Q=P*S,E=l*V,H=P*d,j=l*S,B=g*d,G=D*V,J=P*x,K=D*S,U=g*x,v=D*d,b=l*x,m=y*q,C=I*z,yn=r*q,pn=I*f,xn=r*z,En=y*f,Hn=c*q,On=I*i,jn=c*z,Ln=y*i,Bn=c*f,Gn=r*i,Un=X*f+H*z+j*q-(Q*f+E*z+B*q),Wn=Q*i+G*z+U*q-(X*i+J*z+K*q),_n=E*i+J*f+v*q-(H*i+G*f+b*q),Nn=B*i+K*f+b*z-(j*i+U*f+v*z),W=1/(c*Un+r*Wn+y*_n+I*Nn);return t[0]=W*Un,t[1]=W*Wn,t[2]=W*_n,t[3]=W*Nn,t[4]=W*(Q*r+E*y+B*I-(X*r+H*y+j*I)),t[5]=W*(X*c+J*y+K*I-(Q*c+G*y+U*I)),t[6]=W*(H*c+G*r+b*I-(E*c+J*r+v*I)),t[7]=W*(j*c+U*r+v*y-(B*c+K*r+b*y)),t[8]=W*(m*d+pn*S+xn*V-(C*d+yn*S+En*V)),t[9]=W*(C*x+Hn*S+Ln*V-(m*x+On*S+jn*V)),t[10]=W*(yn*x+On*d+Bn*V-(pn*x+Hn*d+Gn*V)),t[11]=W*(En*x+jn*d+Gn*S-(xn*x+Ln*d+Bn*S)),t[12]=W*(yn*g+En*P+C*l-(xn*P+m*l+pn*g)),t[13]=W*(jn*P+m*D+On*g-(Hn*g+Ln*P+C*D)),t[14]=W*(Hn*l+Gn*P+pn*D-(Bn*P+yn*D+On*l)),t[15]=W*(Bn*g+xn*D+Ln*l-(jn*l+Gn*g+En*D)),t}function wn(n){const u=n[0],t=n[0*4+1],c=n[0*4+2],i=n[0*4+3],D=n[1*4+0],x=n[1*4+1],r=n[1*4+2],f=n[1*4+3],l=n[2*4+0],d=n[2*4+1],y=n[2*4+2],z=n[2*4+3],g=n[3*4+0],S=n[3*4+1],I=n[3*4+2],q=n[3*4+3],P=y*q,V=I*z,X=r*q,Q=I*f,E=r*z,H=y*f,j=c*q,B=I*i,G=c*z,J=y*i,K=c*f,U=r*i,v=P*x+Q*d+E*S-(V*x+X*d+H*S),b=V*t+j*d+J*S-(P*t+B*d+G*S),m=X*t+B*x+K*S-(Q*t+j*x+U*S),C=H*t+G*x+U*d-(E*t+J*x+K*d);return u*v+D*b+l*m+g*C}const an=_;function An(n,u,t){const c=t??new M(16),i=n[0],D=n[1],x=n[2],r=n[3],f=n[4],l=n[5],d=n[6],y=n[7],z=n[8],g=n[9],S=n[10],I=n[11],q=n[12],P=n[13],V=n[14],X=n[15],Q=u[0],E=u[1],H=u[2],j=u[3],B=u[4],G=u[5],J=u[6],K=u[7],U=u[8],v=u[9],b=u[10],m=u[11],C=u[12],yn=u[13],pn=u[14],xn=u[15];return c[0]=i*Q+f*E+z*H+q*j,c[1]=D*Q+l*E+g*H+P*j,c[2]=x*Q+d*E+S*H+V*j,c[3]=r*Q+y*E+I*H+X*j,c[4]=i*B+f*G+z*J+q*K,c[5]=D*B+l*G+g*J+P*K,c[6]=x*B+d*G+S*J+V*K,c[7]=r*B+y*G+I*J+X*K,c[8]=i*U+f*v+z*b+q*m,c[9]=D*U+l*v+g*b+P*m,c[10]=x*U+d*v+S*b+V*m,c[11]=r*U+y*v+I*b+X*m,c[12]=i*C+f*yn+z*pn+q*xn,c[13]=D*C+l*yn+g*pn+P*xn,c[14]=x*C+d*yn+S*pn+V*xn,c[15]=r*C+y*yn+I*pn+X*xn,c}const qn=An;function cn(n,u,t){const c=t??sn();return n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11]),c[12]=u[0],c[13]=u[1],c[14]=u[2],c[15]=1,c}function N(n,u){const t=u??A.create();return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Zn(n,u,t){const c=t??A.create(),i=u*4;return c[0]=n[i+0],c[1]=n[i+1],c[2]=n[i+2],c}function hn(n,u,t,c){const i=c===n?c:fn(n,c),D=t*4;return i[D+0]=u[0],i[D+1]=u[1],i[D+2]=u[2],i}function Mn(n,u){const t=u??A.create(),c=n[0],i=n[1],D=n[2],x=n[4],r=n[5],f=n[6],l=n[8],d=n[9],y=n[10];return t[0]=Math.sqrt(c*c+i*i+D*D),t[1]=Math.sqrt(x*x+r*r+f*f),t[2]=Math.sqrt(l*l+d*d+y*y),t}function Sn(n,u,t,c,i){const D=i??new M(16),x=Math.tan(Math.PI*.5-.5*n);if(D[0]=x/u,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=x,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,Number.isFinite(c)){const r=1/(t-c);D[10]=c*r,D[14]=c*t*r}else D[10]=-1,D[14]=-t;return D}function ln(n,u,t,c=1/0,i){const D=i??new M(16),x=1/Math.tan(n*.5);if(D[0]=x/u,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=x,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,c===1/0)D[10]=0,D[14]=t;else{const r=1/(c-t);D[10]=t*r,D[14]=c*t*r}return D}function Dn(n,u,t,c,i,D,x){const r=x??new M(16);return r[0]=2/(u-n),r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2/(c-t),r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1/(i-D),r[11]=0,r[12]=(u+n)/(n-u),r[13]=(c+t)/(t-c),r[14]=i/(i-D),r[15]=1,r}function O(n,u,t,c,i,D,x){const r=x??new M(16),f=u-n,l=c-t,d=i-D;return r[0]=2*i/f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*i/l,r[6]=0,r[7]=0,r[8]=(n+u)/f,r[9]=(c+t)/l,r[10]=D/d,r[11]=-1,r[12]=0,r[13]=0,r[14]=i*D/d,r[15]=0,r}function Pn(n,u,t,c,i,D=1/0,x){const r=x??new M(16),f=u-n,l=c-t;if(r[0]=2*i/f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*i/l,r[6]=0,r[7]=0,r[8]=(n+u)/f,r[9]=(c+t)/l,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,D===1/0)r[10]=0,r[14]=i;else{const d=1/(D-i);r[10]=i*d,r[14]=D*i*d}return r}const F=A.create(),Y=A.create(),Z=A.create();function Fn(n,u,t,c){const i=c??new M(16);return A.normalize(A.subtract(u,n,Z),Z),A.normalize(A.cross(t,Z,F),F),A.normalize(A.cross(Z,F,Y),Y),i[0]=F[0],i[1]=F[1],i[2]=F[2],i[3]=0,i[4]=Y[0],i[5]=Y[1],i[6]=Y[2],i[7]=0,i[8]=Z[0],i[9]=Z[1],i[10]=Z[2],i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function R(n,u,t,c){const i=c??new M(16);return A.normalize(A.subtract(n,u,Z),Z),A.normalize(A.cross(t,Z,F),F),A.normalize(A.cross(Z,F,Y),Y),i[0]=F[0],i[1]=F[1],i[2]=F[2],i[3]=0,i[4]=Y[0],i[5]=Y[1],i[6]=Y[2],i[7]=0,i[8]=Z[0],i[9]=Z[1],i[10]=Z[2],i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function Xn(n,u,t,c){const i=c??new M(16);return A.normalize(A.subtract(n,u,Z),Z),A.normalize(A.cross(t,Z,F),F),A.normalize(A.cross(Z,F,Y),Y),i[0]=F[0],i[1]=Y[0],i[2]=Z[0],i[3]=0,i[4]=F[1],i[5]=Y[1],i[6]=Z[1],i[7]=0,i[8]=F[2],i[9]=Y[2],i[10]=Z[2],i[11]=0,i[12]=-(F[0]*n[0]+F[1]*n[1]+F[2]*n[2]),i[13]=-(Y[0]*n[0]+Y[1]*n[1]+Y[2]*n[2]),i[14]=-(Z[0]*n[0]+Z[1]*n[1]+Z[2]*n[2]),i[15]=1,i}function k(n,u){const t=u??new M(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Yn(n,u,t){const c=t??new M(16),i=u[0],D=u[1],x=u[2],r=n[0],f=n[1],l=n[2],d=n[3],y=n[1*4+0],z=n[1*4+1],g=n[1*4+2],S=n[1*4+3],I=n[2*4+0],q=n[2*4+1],P=n[2*4+2],V=n[2*4+3],X=n[3*4+0],Q=n[3*4+1],E=n[3*4+2],H=n[3*4+3];return n!==c&&(c[0]=r,c[1]=f,c[2]=l,c[3]=d,c[4]=y,c[5]=z,c[6]=g,c[7]=S,c[8]=I,c[9]=q,c[10]=P,c[11]=V),c[12]=r*i+y*D+I*x+X,c[13]=f*i+z*D+q*x+Q,c[14]=l*i+g*D+P*x+E,c[15]=d*i+S*D+V*x+H,c}function T(n,u){const t=u??new M(16),c=Math.cos(n),i=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tn(n,u,t){const c=t??new M(16),i=n[4],D=n[5],x=n[6],r=n[7],f=n[8],l=n[9],d=n[10],y=n[11],z=Math.cos(u),g=Math.sin(u);return c[4]=z*i+g*f,c[5]=z*D+g*l,c[6]=z*x+g*d,c[7]=z*r+g*y,c[8]=z*f-g*i,c[9]=z*l-g*D,c[10]=z*d-g*x,c[11]=z*y-g*r,n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function on(n,u){const t=u??new M(16),c=Math.cos(n),i=Math.sin(n);return t[0]=c,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qn(n,u,t){const c=t??new M(16),i=n[0*4+0],D=n[0*4+1],x=n[0*4+2],r=n[0*4+3],f=n[2*4+0],l=n[2*4+1],d=n[2*4+2],y=n[2*4+3],z=Math.cos(u),g=Math.sin(u);return c[0]=z*i-g*f,c[1]=z*D-g*l,c[2]=z*x-g*d,c[3]=z*r-g*y,c[8]=z*f+g*i,c[9]=z*l+g*D,c[10]=z*d+g*x,c[11]=z*y+g*r,n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function en(n,u){const t=u??new M(16),c=Math.cos(n),i=Math.sin(n);return t[0]=c,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function In(n,u,t){const c=t??new M(16),i=n[0*4+0],D=n[0*4+1],x=n[0*4+2],r=n[0*4+3],f=n[1*4+0],l=n[1*4+1],d=n[1*4+2],y=n[1*4+3],z=Math.cos(u),g=Math.sin(u);return c[0]=z*i+g*f,c[1]=z*D+g*l,c[2]=z*x+g*d,c[3]=z*r+g*y,c[4]=z*f-g*i,c[5]=z*l-g*D,c[6]=z*d-g*x,c[7]=z*y-g*r,n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function dn(n,u,t){const c=t??new M(16);let i=n[0],D=n[1],x=n[2];const r=Math.sqrt(i*i+D*D+x*x);i/=r,D/=r,x/=r;const f=i*i,l=D*D,d=x*x,y=Math.cos(u),z=Math.sin(u),g=1-y;return c[0]=f+(1-f)*y,c[1]=i*D*g+x*z,c[2]=i*x*g-D*z,c[3]=0,c[4]=i*D*g-x*z,c[5]=l+(1-l)*y,c[6]=D*x*g+i*z,c[7]=0,c[8]=i*x*g+D*z,c[9]=D*x*g-i*z,c[10]=d+(1-d)*y,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}const o=dn;function a(n,u,t,c){const i=c??new M(16);let D=u[0],x=u[1],r=u[2];const f=Math.sqrt(D*D+x*x+r*r);D/=f,x/=f,r/=f;const l=D*D,d=x*x,y=r*r,z=Math.cos(t),g=Math.sin(t),S=1-z,I=l+(1-l)*z,q=D*x*S+r*g,P=D*r*S-x*g,V=D*x*S-r*g,X=d+(1-d)*z,Q=x*r*S+D*g,E=D*r*S+x*g,H=x*r*S-D*g,j=y+(1-y)*z,B=n[0],G=n[1],J=n[2],K=n[3],U=n[4],v=n[5],b=n[6],m=n[7],C=n[8],yn=n[9],pn=n[10],xn=n[11];return i[0]=I*B+q*U+P*C,i[1]=I*G+q*v+P*yn,i[2]=I*J+q*b+P*pn,i[3]=I*K+q*m+P*xn,i[4]=V*B+X*U+Q*C,i[5]=V*G+X*v+Q*yn,i[6]=V*J+X*b+Q*pn,i[7]=V*K+X*m+Q*xn,i[8]=E*B+H*U+j*C,i[9]=E*G+H*v+j*yn,i[10]=E*J+H*b+j*pn,i[11]=E*K+H*m+j*xn,n!==i&&(i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i}const s=a;function e(n,u){const t=u??new M(16);return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(n,u,t){const c=t??new M(16),i=u[0],D=u[1],x=u[2];return c[0]=i*n[0*4+0],c[1]=i*n[0*4+1],c[2]=i*n[0*4+2],c[3]=i*n[0*4+3],c[4]=D*n[1*4+0],c[5]=D*n[1*4+1],c[6]=D*n[1*4+2],c[7]=D*n[1*4+3],c[8]=x*n[2*4+0],c[9]=x*n[2*4+1],c[10]=x*n[2*4+2],c[11]=x*n[2*4+3],n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}function h(n,u){const t=u??new M(16);return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(n,u,t){const c=t??new M(16);return c[0]=u*n[0*4+0],c[1]=u*n[0*4+1],c[2]=u*n[0*4+2],c[3]=u*n[0*4+3],c[4]=u*n[1*4+0],c[5]=u*n[1*4+1],c[6]=u*n[1*4+2],c[7]=u*n[1*4+3],c[8]=u*n[2*4+0],c[9]=u*n[2*4+1],c[10]=u*n[2*4+2],c[11]=u*n[2*4+3],n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]),c}return{create:L,set:un,fromMat3:rn,fromQuat:nn,negate:$n,copy:fn,clone:tn,equalsApproximately:Vn,equals:zn,identity:sn,transpose:gn,inverse:_,determinant:wn,invert:an,multiply:An,mul:qn,setTranslation:cn,getTranslation:N,getAxis:Zn,setAxis:hn,getScaling:Mn,perspective:Sn,perspectiveReverseZ:ln,ortho:Dn,frustum:O,frustumReverseZ:Pn,aim:Fn,cameraAim:R,lookAt:Xn,translation:k,translate:Yn,rotationX:T,rotateX:Tn,rotationY:on,rotateY:Qn,rotationZ:en,rotateZ:In,axisRotation:dn,rotation:o,axisRotate:a,rotate:s,scaling:e,scale:w,uniformScaling:h,uniformScale:p}}const bn=new Map;function it(M){let A=bn.get(M);return A||(A=rt(M),bn.set(M,A)),A}function ft(M){const A=Jn(M);function L(o,a,s,e){const w=new M(4);return o!==void 0&&(w[0]=o,a!==void 0&&(w[1]=a,s!==void 0&&(w[2]=s,e!==void 0&&(w[3]=e)))),w}const un=L;function rn(o,a,s,e,w){const h=w??new M(4);return h[0]=o,h[1]=a,h[2]=s,h[3]=e,h}function nn(o,a,s){const e=s??new M(4),w=a*.5,h=Math.sin(w);return e[0]=h*o[0],e[1]=h*o[1],e[2]=h*o[2],e[3]=Math.cos(w),e}function $n(o,a){const s=a??A.create(3),e=Math.acos(o[3])*2,w=Math.sin(e*.5);return w>$?(s[0]=o[0]/w,s[1]=o[1]/w,s[2]=o[2]/w):(s[0]=1,s[1]=0,s[2]=0),{angle:e,axis:s}}function fn(o,a){const s=O(o,a);return Math.acos(2*s*s-1)}function tn(o,a,s){const e=s??new M(4),w=o[0],h=o[1],p=o[2],n=o[3],u=a[0],t=a[1],c=a[2],i=a[3];return e[0]=w*i+n*u+h*c-p*t,e[1]=h*i+n*t+p*u-w*c,e[2]=p*i+n*c+w*t-h*u,e[3]=n*i-w*u-h*t-p*c,e}const Vn=tn;function zn(o,a,s){const e=s??new M(4),w=a*.5,h=o[0],p=o[1],n=o[2],u=o[3],t=Math.sin(w),c=Math.cos(w);return e[0]=h*c+u*t,e[1]=p*c+n*t,e[2]=n*c-p*t,e[3]=u*c-h*t,e}function sn(o,a,s){const e=s??new M(4),w=a*.5,h=o[0],p=o[1],n=o[2],u=o[3],t=Math.sin(w),c=Math.cos(w);return e[0]=h*c-n*t,e[1]=p*c+u*t,e[2]=n*c+h*t,e[3]=u*c-p*t,e}function gn(o,a,s){const e=s??new M(4),w=a*.5,h=o[0],p=o[1],n=o[2],u=o[3],t=Math.sin(w),c=Math.cos(w);return e[0]=h*c+p*t,e[1]=p*c-h*t,e[2]=n*c+u*t,e[3]=u*c-n*t,e}function _(o,a,s,e){const w=e??new M(4),h=o[0],p=o[1],n=o[2],u=o[3];let t=a[0],c=a[1],i=a[2],D=a[3],x=h*t+p*c+n*i+u*D;x<0&&(x=-x,t=-t,c=-c,i=-i,D=-D);let r,f;if(1-x>$){const l=Math.acos(x),d=Math.sin(l);r=Math.sin((1-s)*l)/d,f=Math.sin(s*l)/d}else r=1-s,f=s;return w[0]=r*h+f*t,w[1]=r*p+f*c,w[2]=r*n+f*i,w[3]=r*u+f*D,w}function wn(o,a){const s=a??new M(4),e=o[0],w=o[1],h=o[2],p=o[3],n=e*e+w*w+h*h+p*p,u=n?1/n:0;return s[0]=-e*u,s[1]=-w*u,s[2]=-h*u,s[3]=p*u,s}function an(o,a){const s=a??new M(4);return s[0]=-o[0],s[1]=-o[1],s[2]=-o[2],s[3]=o[3],s}function An(o,a){const s=a??new M(4),e=o[0]+o[5]+o[10];if(e>0){const w=Math.sqrt(e+1);s[3]=.5*w;const h=.5/w;s[0]=(o[6]-o[9])*h,s[1]=(o[8]-o[2])*h,s[2]=(o[1]-o[4])*h}else{let w=0;o[5]>o[0]&&(w=1),o[10]>o[w*4+w]&&(w=2);const h=(w+1)%3,p=(w+2)%3,n=Math.sqrt(o[w*4+w]-o[h*4+h]-o[p*4+p]+1);s[w]=.5*n;const u=.5/n;s[3]=(o[h*4+p]-o[p*4+h])*u,s[h]=(o[h*4+w]+o[w*4+h])*u,s[p]=(o[p*4+w]+o[w*4+p])*u}return s}function qn(o,a,s,e,w){const h=w??new M(4),p=o*.5,n=a*.5,u=s*.5,t=Math.sin(p),c=Math.cos(p),i=Math.sin(n),D=Math.cos(n),x=Math.sin(u),r=Math.cos(u);switch(e){case"xyz":h[0]=t*D*r+c*i*x,h[1]=c*i*r-t*D*x,h[2]=c*D*x+t*i*r,h[3]=c*D*r-t*i*x;break;case"xzy":h[0]=t*D*r-c*i*x,h[1]=c*i*r-t*D*x,h[2]=c*D*x+t*i*r,h[3]=c*D*r+t*i*x;break;case"yxz":h[0]=t*D*r+c*i*x,h[1]=c*i*r-t*D*x,h[2]=c*D*x-t*i*r,h[3]=c*D*r+t*i*x;break;case"yzx":h[0]=t*D*r+c*i*x,h[1]=c*i*r+t*D*x,h[2]=c*D*x-t*i*r,h[3]=c*D*r-t*i*x;break;case"zxy":h[0]=t*D*r-c*i*x,h[1]=c*i*r+t*D*x,h[2]=c*D*x+t*i*r,h[3]=c*D*r-t*i*x;break;case"zyx":h[0]=t*D*r-c*i*x,h[1]=c*i*r+t*D*x,h[2]=c*D*x-t*i*r,h[3]=c*D*r+t*i*x;break;default:throw new Error(`Unknown rotation order: ${e}`)}return h}function cn(o,a){const s=a??new M(4);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s}const N=cn;function Zn(o,a,s){const e=s??new M(4);return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e[3]=o[3]+a[3],e}function hn(o,a,s){const e=s??new M(4);return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e[3]=o[3]-a[3],e}const Mn=hn;function Sn(o,a,s){const e=s??new M(4);return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e[3]=o[3]*a,e}const ln=Sn;function Dn(o,a,s){const e=s??new M(4);return e[0]=o[0]/a,e[1]=o[1]/a,e[2]=o[2]/a,e[3]=o[3]/a,e}function O(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]+o[3]*a[3]}function Pn(o,a,s,e){const w=e??new M(4);return w[0]=o[0]+s*(a[0]-o[0]),w[1]=o[1]+s*(a[1]-o[1]),w[2]=o[2]+s*(a[2]-o[2]),w[3]=o[3]+s*(a[3]-o[3]),w}function F(o){const a=o[0],s=o[1],e=o[2],w=o[3];return Math.sqrt(a*a+s*s+e*e+w*w)}const Y=F;function Z(o){const a=o[0],s=o[1],e=o[2],w=o[3];return a*a+s*s+e*e+w*w}const Fn=Z;function R(o,a){const s=a??new M(4),e=o[0],w=o[1],h=o[2],p=o[3],n=Math.sqrt(e*e+w*w+h*h+p*p);return n>1e-5?(s[0]=e/n,s[1]=w/n,s[2]=h/n,s[3]=p/n):(s[0]=0,s[1]=0,s[2]=0,s[3]=1),s}function Xn(o,a){return Math.abs(o[0]-a[0])<$&&Math.abs(o[1]-a[1])<$&&Math.abs(o[2]-a[2])<$&&Math.abs(o[3]-a[3])<$}function k(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[3]===a[3]}function Yn(o){const a=o??new M(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}const T=A.create(),Tn=A.create(),on=A.create();function Qn(o,a,s){const e=s??new M(4),w=A.dot(o,a);return w<-.999999?(A.cross(Tn,o,T),A.len(T)<1e-6&&A.cross(on,o,T),A.normalize(T,T),nn(T,Math.PI,e),e):w>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(A.cross(o,a,T),e[0]=T[0],e[1]=T[1],e[2]=T[2],e[3]=1+w,R(e,e))}const en=new M(4),In=new M(4);function dn(o,a,s,e,w,h){const p=h??new M(4);return _(o,e,w,en),_(a,s,w,In),_(en,In,2*w*(1-w),p),p}return{create:L,fromValues:un,set:rn,fromAxisAngle:nn,toAxisAngle:$n,angle:fn,multiply:tn,mul:Vn,rotateX:zn,rotateY:sn,rotateZ:gn,slerp:_,inverse:wn,conjugate:an,fromMat:An,fromEuler:qn,copy:cn,clone:N,add:Zn,subtract:hn,sub:Mn,mulScalar:Sn,scale:ln,divScalar:Dn,dot:O,lerp:Pn,length:F,len:Y,lengthSq:Z,lenSq:Fn,normalize:R,equalsApproximately:Xn,equals:k,identity:Yn,rotationTo:Qn,sqlerp:dn}}const mn=new Map;function wt(M){let A=mn.get(M);return A||(A=ft(M),mn.set(M,A)),A}function at(M){function A(s,e,w,h){const p=new M(4);return s!==void 0&&(p[0]=s,e!==void 0&&(p[1]=e,w!==void 0&&(p[2]=w,h!==void 0&&(p[3]=h)))),p}const L=A;function un(s,e,w,h,p){const n=p??new M(4);return n[0]=s,n[1]=e,n[2]=w,n[3]=h,n}function rn(s,e){const w=e??new M(4);return w[0]=Math.ceil(s[0]),w[1]=Math.ceil(s[1]),w[2]=Math.ceil(s[2]),w[3]=Math.ceil(s[3]),w}function nn(s,e){const w=e??new M(4);return w[0]=Math.floor(s[0]),w[1]=Math.floor(s[1]),w[2]=Math.floor(s[2]),w[3]=Math.floor(s[3]),w}function $n(s,e){const w=e??new M(4);return w[0]=Math.round(s[0]),w[1]=Math.round(s[1]),w[2]=Math.round(s[2]),w[3]=Math.round(s[3]),w}function fn(s,e=0,w=1,h){const p=h??new M(4);return p[0]=Math.min(w,Math.max(e,s[0])),p[1]=Math.min(w,Math.max(e,s[1])),p[2]=Math.min(w,Math.max(e,s[2])),p[3]=Math.min(w,Math.max(e,s[3])),p}function tn(s,e,w){const h=w??new M(4);return h[0]=s[0]+e[0],h[1]=s[1]+e[1],h[2]=s[2]+e[2],h[3]=s[3]+e[3],h}function Vn(s,e,w,h){const p=h??new M(4);return p[0]=s[0]+e[0]*w,p[1]=s[1]+e[1]*w,p[2]=s[2]+e[2]*w,p[3]=s[3]+e[3]*w,p}function zn(s,e,w){const h=w??new M(4);return h[0]=s[0]-e[0],h[1]=s[1]-e[1],h[2]=s[2]-e[2],h[3]=s[3]-e[3],h}const sn=zn;function gn(s,e){return Math.abs(s[0]-e[0])<$&&Math.abs(s[1]-e[1])<$&&Math.abs(s[2]-e[2])<$&&Math.abs(s[3]-e[3])<$}function _(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]&&s[3]===e[3]}function wn(s,e,w,h){const p=h??new M(4);return p[0]=s[0]+w*(e[0]-s[0]),p[1]=s[1]+w*(e[1]-s[1]),p[2]=s[2]+w*(e[2]-s[2]),p[3]=s[3]+w*(e[3]-s[3]),p}function an(s,e,w,h){const p=h??new M(4);return p[0]=s[0]+w[0]*(e[0]-s[0]),p[1]=s[1]+w[1]*(e[1]-s[1]),p[2]=s[2]+w[2]*(e[2]-s[2]),p[3]=s[3]+w[3]*(e[3]-s[3]),p}function An(s,e,w){const h=w??new M(4);return h[0]=Math.max(s[0],e[0]),h[1]=Math.max(s[1],e[1]),h[2]=Math.max(s[2],e[2]),h[3]=Math.max(s[3],e[3]),h}function qn(s,e,w){const h=w??new M(4);return h[0]=Math.min(s[0],e[0]),h[1]=Math.min(s[1],e[1]),h[2]=Math.min(s[2],e[2]),h[3]=Math.min(s[3],e[3]),h}function cn(s,e,w){const h=w??new M(4);return h[0]=s[0]*e,h[1]=s[1]*e,h[2]=s[2]*e,h[3]=s[3]*e,h}const N=cn;function Zn(s,e,w){const h=w??new M(4);return h[0]=s[0]/e,h[1]=s[1]/e,h[2]=s[2]/e,h[3]=s[3]/e,h}function hn(s,e){const w=e??new M(4);return w[0]=1/s[0],w[1]=1/s[1],w[2]=1/s[2],w[3]=1/s[3],w}const Mn=hn;function Sn(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]*e[3]}function ln(s){const e=s[0],w=s[1],h=s[2],p=s[3];return Math.sqrt(e*e+w*w+h*h+p*p)}const Dn=ln;function O(s){const e=s[0],w=s[1],h=s[2],p=s[3];return e*e+w*w+h*h+p*p}const Pn=O;function F(s,e){const w=s[0]-e[0],h=s[1]-e[1],p=s[2]-e[2],n=s[3]-e[3];return Math.sqrt(w*w+h*h+p*p+n*n)}const Y=F;function Z(s,e){const w=s[0]-e[0],h=s[1]-e[1],p=s[2]-e[2],n=s[3]-e[3];return w*w+h*h+p*p+n*n}const Fn=Z;function R(s,e){const w=e??new M(4),h=s[0],p=s[1],n=s[2],u=s[3],t=Math.sqrt(h*h+p*p+n*n+u*u);return t>1e-5?(w[0]=h/t,w[1]=p/t,w[2]=n/t,w[3]=u/t):(w[0]=0,w[1]=0,w[2]=0,w[3]=0),w}function Xn(s,e){const w=e??new M(4);return w[0]=-s[0],w[1]=-s[1],w[2]=-s[2],w[3]=-s[3],w}function k(s,e){const w=e??new M(4);return w[0]=s[0],w[1]=s[1],w[2]=s[2],w[3]=s[3],w}const Yn=k;function T(s,e,w){const h=w??new M(4);return h[0]=s[0]*e[0],h[1]=s[1]*e[1],h[2]=s[2]*e[2],h[3]=s[3]*e[3],h}const Tn=T;function on(s,e,w){const h=w??new M(4);return h[0]=s[0]/e[0],h[1]=s[1]/e[1],h[2]=s[2]/e[2],h[3]=s[3]/e[3],h}const Qn=on;function en(s){const e=s??new M(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function In(s,e,w){const h=w??new M(4),p=s[0],n=s[1],u=s[2],t=s[3];return h[0]=e[0]*p+e[4]*n+e[8]*u+e[12]*t,h[1]=e[1]*p+e[5]*n+e[9]*u+e[13]*t,h[2]=e[2]*p+e[6]*n+e[10]*u+e[14]*t,h[3]=e[3]*p+e[7]*n+e[11]*u+e[15]*t,h}function dn(s,e,w){const h=w??new M(4);return R(s,h),cn(h,e,h)}function o(s,e,w){const h=w??new M(4);return ln(s)>e?dn(s,e,h):k(s,h)}function a(s,e,w){const h=w??new M(4);return wn(s,e,.5,h)}return{create:A,fromValues:L,set:un,ceil:rn,floor:nn,round:$n,clamp:fn,add:tn,addScaled:Vn,subtract:zn,sub:sn,equalsApproximately:gn,equals:_,lerp:wn,lerpV:an,max:An,min:qn,mulScalar:cn,scale:N,divScalar:Zn,inverse:hn,invert:Mn,dot:Sn,length:ln,len:Dn,lengthSq:O,lenSq:Pn,distance:F,dist:Y,distanceSq:Z,distSq:Fn,normalize:R,negate:Xn,copy:k,clone:Yn,multiply:T,mul:Tn,divide:on,div:Qn,zero:en,transformMat4:In,setLength:dn,truncate:o,midpoint:a}}const Cn=new Map;function ht(M){let A=Cn.get(M);return A||(A=at(M),Cn.set(M,A)),A}function Kn(M,A,L,un,rn,nn){return{mat3:ut(M),mat4:it(A),quat:wt(L),vec2:nt(un),vec3:Jn(rn),vec4:ht(nn)}}const{mat3:Mt,mat4:lt,quat:Dt,vec2:dt,vec3:yt,vec4:pt}=Kn(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);Kn(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);Kn(st,Array,Array,Array,Array,Array);export{Mt as a,lt as m,dt as v};

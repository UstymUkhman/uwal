var g=r=>{throw TypeError(r)};var U=(r,t,s)=>t.has(r)||g("Cannot "+s);var e=(r,t,s)=>(U(r,t,"read from private field"),s?s.call(r):t.get(r)),f=(r,t,s)=>t.has(r)?g("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),u=(r,t,s,c)=>(U(r,t,"write to private field"),c?c.call(r,s):t.set(r,s),s),x=(r,t,s)=>(U(r,t,"access private method"),s);import{G as C}from"./index-sDmynApN.js";var m,B,l,h,i,a,n,d,o,p,y,V;class A{constructor(t,s){f(this,o);f(this,m,new Float32Array([.5,.5,.75,.5,.5,1,.75,1,.25,.5,.5,.5,.25,1,.5,1,0,0,0,.5,.25,0,.25,.5,.5,0,.5,.5,.75,0,.75,.5,0,.5,.25,.5,0,1,.25,1,.25,0,.5,0,.25,.5,.5,.5]));f(this,B);f(this,l);f(this,h);f(this,i);f(this,a);f(this,n,[]);f(this,d,new Float32Array(16));u(this,i,t),u(this,B,s??"Cube"),x(this,o,p).call(this),x(this,o,y).call(this),x(this,o,V).call(this)}AddVertexBuffers(t){e(this,n).push(...C(t))}UpdateTransformBuffer(){e(this,i).WriteBuffer(e(this,a),e(this,d))}Render(t=!0){e(this,i).SavePipelineState(),e(this,i).Render(this.Update(),t),e(this,i).RestorePipelineState()}Update(){return e(this,i).WriteBuffer(e(this,a),e(this,d)),e(this,i).SetIndexBuffer(e(this,h),"uint16"),e(this,i).SetVertexBuffers(e(this,n)),e(this,l)}get PositionAttribute(){return{name:"position",format:"float32x3"}}get TransformBuffer(){return e(this,a)}get Transform(){return e(this,d)}get Vertices(){return e(this,l)}get UV(){return e(this,m)}Destroy(){u(this,a,e(this,a).destroy()),e(this,n).forEach(t=>t.destroy()),u(this,h,e(this,h).destroy()),e(this,n).splice(0)}}m=new WeakMap,B=new WeakMap,l=new WeakMap,h=new WeakMap,i=new WeakMap,a=new WeakMap,n=new WeakMap,d=new WeakMap,o=new WeakSet,p=function(){const t=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]);u(this,h,e(this,i).CreateIndexBuffer(t,{label:`${e(this,B)} Index Buffer`})),e(this,i).WriteBuffer(e(this,h),t),e(this,i).SetIndexBuffer(e(this,h),"uint16"),u(this,l,t.length)},y=function(){const t=new Float32Array([-1,1,1,1,1,1,-1,1,-1,1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,1,1,1,1,-1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),s=e(this,i).CreateVertexBuffer(t,{label:`${e(this,B)} Vertex Buffer`});e(this,i).WriteBuffer(s,t),e(this,i).SetVertexBuffers(s),e(this,n).push(s)},V=function(){u(this,a,e(this,i).CreateBuffer({size:e(this,d).length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:`${e(this,B)} Uniform Buffer`}))};export{A as L};

var c=r=>{throw TypeError(r)};var y=(r,t,s)=>t.has(r)||c("Cannot "+s);var e=(r,t,s)=>(y(r,t,"read from private field"),s?s.call(r):t.get(r)),f=(r,t,s)=>t.has(r)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),n=(r,t,s,V)=>(y(r,t,"write to private field"),V?V.call(r,s):t.set(r,s),s),x=(r,t,s)=>(y(r,t,"access private method"),s);var U,B,l,i,h,a,u,d,o,g,p,C;class A{constructor(t,s){f(this,o);f(this,U,new Float32Array([.5,.5,.75,.5,.5,1,.75,1,.25,.5,.5,.5,.25,1,.5,1,0,0,0,.5,.25,0,.25,.5,.5,0,.5,.5,.75,0,.75,.5,0,.5,.25,.5,0,1,.25,1,.25,0,.5,0,.25,.5,.5,.5]));f(this,B);f(this,l);f(this,i);f(this,h);f(this,a);f(this,u,[]);f(this,d,new Float32Array(16));n(this,i,t),n(this,B,s??"Cube"),x(this,o,g).call(this),x(this,o,p).call(this),x(this,o,C).call(this)}AddVertexBuffers(t){e(this,u).push(...Array.isArray(t)&&t||[t])}UpdateTransformBuffer(){e(this,i).WriteBuffer(e(this,a),e(this,d))}Render(t=!0){e(this,i).SavePipelineState(),e(this,i).Render(this.Update(),t),e(this,i).RestorePipelineState()}Update(){return e(this,i).WriteBuffer(e(this,a),e(this,d)),e(this,i).SetIndexBuffer(e(this,h),"uint16"),e(this,i).SetVertexBuffers(e(this,u)),e(this,l)}get PositionAttribute(){return{name:"position",format:"float32x3"}}get TransformBuffer(){return e(this,a)}get Transform(){return e(this,d)}get Vertices(){return e(this,l)}get UV(){return e(this,U)}Destroy(){n(this,a,e(this,a).destroy()),e(this,u).forEach(t=>t.destroy()),n(this,h,e(this,h).destroy()),e(this,u).splice(0)}}U=new WeakMap,B=new WeakMap,l=new WeakMap,i=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,d=new WeakMap,o=new WeakSet,g=function(){const t=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]);n(this,h,e(this,i).CreateIndexBuffer(t,{label:`${e(this,B)} Index Buffer`})),e(this,i).WriteBuffer(e(this,h),t),e(this,i).SetIndexBuffer(e(this,h),"uint16"),n(this,l,t.length)},p=function(){const t=new Float32Array([-1,1,1,1,1,1,-1,1,-1,1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,1,1,1,1,-1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),s=e(this,i).CreateVertexBuffer(t,{label:`${e(this,B)} Vertex Buffer`});e(this,i).WriteBuffer(s,t),e(this,i).SetVertexBuffers(s),e(this,u).push(s)},C=function(){n(this,a,e(this,i).CreateBuffer({size:e(this,d).length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:`${e(this,B)} Uniform Buffer`}))};export{A as C};

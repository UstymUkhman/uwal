import{_ as e,a as t,d as n,g as r,h as i,i as a,l as o,n as s,s as c,y as l}from"./lib-1rS3DT50.js";import{n as u,t as d}from"./F-CzTbXAUa.js";var f=class extends u{#e=i.create();constructor(e,t=`DirectionalLight`){super(t),this.Direction=e||i.create(0,0,-1)}set Direction(e){i.normalize(e,this.#e)}get Direction(){return this.#e}},p=`struct VertexOutput{@location(0)normal: vec3f,@builtin(position)position: vec4f};@group(0)@binding(2)var<uniform>Light: LightUniforms;@vertex fn meshVertex(@location(0)position: vec4f,@location(1)normal: vec3f)->VertexOutput {var output: VertexOutput;output.normal=GetVertexNormal(MeshUniforms.worldNormal,normal);output.position=GetVertexClipSpace(position);return output;}@fragment fn meshFragment(@location(0)normal: vec3f)->@location(0)vec4f {let light=GetDirectionalLight(Light,normal);return vec4f(color.rgb*light,color.a);}`;(async function(i){let u;try{u=new(await(r.Renderer(i,`Directional Lighting`)))}catch(e){alert(e)}let m=new t,h=new GUI;h.onChange(j);let g=new s,_=new c,v=new u.Pipeline,y={rotation:n.DegreesToRadians(0)},b=new a(_,new o(3407667)),x={min:-360,max:360,step:1,converters:GUI.converters.radToDeg},S=v.CreateShaderModule([l,e,p]),{Light:C,buffer:w}=v.CreateUniformBuffer(`Light`),T=[v.CreateVertexBufferLayout({name:`position`,format:`float32x3`},`meshVertex`),v.CreateVertexBufferLayout({name:`normal`,format:`float32x3`},`meshVertex`)];b.SetRenderPipeline(await u.AddPipeline(v,{vertex:v.CreateVertexState(S,T,`meshVertex`),fragment:v.CreateFragmentState(S,void 0,`meshFragment`),depthStencil:v.CreateDepthStencilState(),primitive:v.CreatePrimitiveState()}),w);let{positionData:E,normalData:D,vertices:O}=d(),k=v.CreateVertexBuffer(D),A=new f(n.Vec3.create(-.5,-.7,-1));C.direction.set(A.Direction),C.intensity.set([A.Intensity]),v.WriteBuffer(w,C.direction.buffer),_.CreatePositionBuffer(v,E),v.WriteBuffer(k,D),h.add(y,`rotation`,x),v.AddVertexBuffers(k),_.SetDrawParams(O),m.Add(b);function j(){b.Rotation=[0,y.rotation,0],u.Render(m)}new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];u.SetCanvasSize(e,n),g.AspectRatio=u.AspectRatio,g.UpdateViewProjectionMatrix(),g.Position=[100,150,200],g.LookAt([0,35,0]),m.AddCamera(g)}j()}).observe(document.body)})(document.getElementById(`lesson`));
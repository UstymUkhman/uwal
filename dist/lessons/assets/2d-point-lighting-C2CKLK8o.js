import{a as e,d as t,f as n,o as r,r as i,t as a}from"./lib-dOc1RxJQ.js";import{t as o}from"./F-MrgAg4yl.js";var s=`struct Uniforms{color: vec4f,light: vec3f,camera: vec3f,world: mat4x4f,normal: mat3x3f,intensity: f32};struct VertexOutput{@location(0)normal: vec3f,@location(1)lightVector: vec3f,@location(2)cameraVector: vec3f,@builtin(position)position: vec4f};@group(0)@binding(1)var<uniform>uniforms: Uniforms;@group(0)@binding(0)var<uniform>shapeModelViewProjection: mat3x3f;fn GetVertexClipSpace(position: vec2f)->vec4f{return vec4f((shapeModelViewProjection*vec3f(position,1)).xy,0,1);}@vertex fn vertex(@location(0)position: vec2f)->VertexOutput {var output: VertexOutput;let worldPosition=(uniforms.world*vec4f(position,0,0)).xyz;output.lightVector=uniforms.light-worldPosition;output.cameraVector=uniforms.camera-worldPosition;output.position=GetVertexClipSpace(position);output.normal=uniforms.normal*vec3f(0,0,1);return output;}@fragment fn fragment(vertex: VertexOutput)->@location(0)vec4f {let lightDirection=normalize(vertex.lightVector);let normal=normalize(vertex.normal);let light=dot(normal,lightDirection);let cameraDirection=normalize(vertex.cameraVector);var specular=dot(normal,normalize(lightDirection+cameraDirection));specular=pow(max(0,specular),uniforms.intensity);let color=uniforms.color.rgb*light+specular;return vec4f(color,uniforms.color.a);}`;(async function(c){let l;try{l=new(await(n.Renderer(c,`2D Point Lighting`)))}catch(e){alert(e)}let u=new GUI;u.onChange(S);let d=new e,f=new a,p={shininess:60},m=new l.Pipeline,{vertexData:h,indexData:g}=o(),_=m.CreateShaderModule(s),{uniforms:v,buffer:y}=m.CreateUniformBuffer(`uniforms`),b=new r({radius:75,indexFormat:`uint32`});b.IndexData=g,b.VertexData=h,await l.AddPipeline(m,{fragment:m.CreateFragmentState(_),vertex:m.CreateVertexState(_,b.GetPositionBufferLayout(m))});let x=new i(b,null);x.SetRenderPipeline(m,y),u.add(p,`shininess`,{min:1,max:250}),t.Mat4.identity(v.normal),t.Mat4.identity(v.world),v.color.set([.5,1,.5,1]),v.light.set([60,65,70]),x.Position=[300,200],x.Origin=[50,75],d.Add(x);function S(){v.intensity[0]=p.shininess,v.camera.set([...f.Position,200]),m.WriteBuffer(y,v.normal.buffer),l.Render(d)}new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];l.SetCanvasSize(e,n),f.Size=l.CanvasSize,d.AddCamera(f)}S()}).observe(document.body)})(document.getElementById(`lesson`));
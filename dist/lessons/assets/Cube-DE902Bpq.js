var C=r=>{throw TypeError(r)};var c=(r,t,s)=>t.has(r)||C("Cannot "+s);var e=(r,t,s)=>(c(r,t,"read from private field"),s?s.call(r):t.get(r)),f=(r,t,s)=>t.has(r)?C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),u=(r,t,s,y)=>(c(r,t,"write to private field"),y?y.call(r,s):t.set(r,s),s),x=(r,t,s)=>(c(r,t,"access private method"),s);var o,l,i,h,a,n,d,B,U,p,S;class V{constructor(t,s){f(this,B);f(this,o);f(this,l);f(this,i);f(this,h);f(this,a);f(this,n,[]);f(this,d,new Float32Array(16));u(this,i,t),u(this,o,s??"Cube"),x(this,B,U).call(this),x(this,B,p).call(this),x(this,B,S).call(this)}AddVertexBuffers(t){e(this,n).push(...Array.isArray(t)&&t||[t])}UpdateTransformBuffer(){e(this,i).WriteBuffer(e(this,a),e(this,d))}Render(t=!0){e(this,i).SavePipelineState(),e(this,i).Render(this.Update(),t),e(this,i).RestorePipelineState()}Update(){return e(this,i).WriteBuffer(e(this,a),e(this,d)),e(this,i).SetIndexBuffer(e(this,h),"uint16"),e(this,i).SetVertexBuffers(e(this,n)),e(this,l)}get TransformBuffer(){return e(this,a)}get Transform(){return e(this,d)}get Vertices(){return e(this,l)}Destroy(){u(this,a,e(this,a).destroy()),e(this,n).forEach(t=>t.destroy()),u(this,h,e(this,h).destroy()),e(this,n).splice(0)}}o=new WeakMap,l=new WeakMap,i=new WeakMap,h=new WeakMap,a=new WeakMap,n=new WeakMap,d=new WeakMap,B=new WeakSet,U=function(){const t=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]);u(this,h,e(this,i).CreateIndexBuffer(t,{label:`${e(this,o)} Index Buffer`})),e(this,i).WriteBuffer(e(this,h),t),e(this,i).SetIndexBuffer(e(this,h),"uint16"),u(this,l,t.length)},p=function(){const t=new Float32Array([-1,1,1,1,1,1,-1,1,-1,1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,1,1,1,1,-1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),s=e(this,i).CreateVertexBuffer(t,{label:`${e(this,o)} Vertex Buffer`});e(this,i).WriteBuffer(s,t),e(this,i).SetVertexBuffers(s),e(this,n).push(s)},S=function(){u(this,a,e(this,i).CreateBuffer({size:e(this,d).length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:`${e(this,o)} Uniform Buffer`}))};export{V as C};

import{a as e,d as t,f as n,o as r,r as i,t as a}from"./lib-dOc1RxJQ.js";import{t as o}from"./F-MrgAg4yl.js";var s=`struct Uniforms{color: vec4f,light: vec3f,normal: mat3x3f};struct VertexOutput{@location(0)normal: vec3f,@builtin(position)position: vec4f};@group(0)@binding(1)var<uniform>uniforms: Uniforms;@group(0)@binding(0)var<uniform>shapeModelViewProjection: mat3x3f;fn GetVertexClipSpace(position: vec2f)->vec4f{return vec4f((shapeModelViewProjection*vec3f(position,1)).xy,0,1);}@vertex fn vertex(@location(0)position: vec2f)->VertexOutput {return VertexOutput(uniforms.normal*vec3f(0,0,1),GetVertexClipSpace(position));}@fragment fn fragment(@location(0)normal: vec3f)->@location(0)vec4f {let light=dot(normalize(normal),-uniforms.light);return vec4f(uniforms.color.rgb*light,uniforms.color.a);}`;(async function(c){let l;try{l=new(await(n.Renderer(c,`2D Directional Lighting`)))}catch(e){alert(e)}let u=new e,d=new a,f=new l.Pipeline,{vertexData:p,indexData:m}=o(),h=f.CreateShaderModule(s),{uniforms:g,buffer:_}=f.CreateUniformBuffer(`uniforms`),v=new r({radius:75,indexFormat:`uint32`});v.IndexData=m,v.VertexData=p,await l.AddPipeline(f,{fragment:f.CreateFragmentState(h),vertex:f.CreateVertexState(h,v.GetPositionBufferLayout(f))});let y=new i(v,null);y.SetRenderPipeline(f,_);let b=t.Vec3.create(0,0,-1);t.Vec3.normalize(b,g.light),t.Mat4.identity(g.normal),g.color.set([.5,1,.5,1]),y.Position=[300,200],y.Origin=[50,75],u.Add(y);function x(){f.WriteBuffer(_,g.normal.buffer),l.Render(u)}new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];l.SetCanvasSize(e,n),d.Size=l.CanvasSize,u.AddCamera(d)}x()}).observe(document.body)})(document.getElementById(`lesson`));
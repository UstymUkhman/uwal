import{a as e,c as t,d as n,f as r,n as i,o as a,u as o}from"./lib-vikneka1.js";var s=`struct Uniforms{color: vec4f,light: vec3f,normal: mat3x3f};struct VertexOutput{@location(0)normal: vec3f,@builtin(position)position: vec4f};@group(0)@binding(1)var<uniform>uniforms: Uniforms;@group(0)@binding(0)var<uniform>meshModelViewProjection: mat4x4f;@vertex fn vertex(@location(0)position: vec4f,@location(1)normal: vec3f)->VertexOutput {return VertexOutput(uniforms.normal*normal,meshModelViewProjection*position);}@fragment fn fragment(@location(0)normal: vec3f)->@location(0)vec4f {let light=dot(normalize(normal),-uniforms.light);return vec4f(uniforms.color.rgb*light,uniforms.color.a);}`;function c(){let e=[-50,75,15,-20,75,15,-50,-75,15,-20,-75,15,-20,75,15,50,75,15,-20,45,15,50,45,15,-20,15,15,20,15,15,-20,-15,15,20,-15,15,-50,75,-15,-20,75,-15,-50,-75,-15,-20,-75,-15,-20,75,-15,50,75,-15,-20,45,-15,50,45,-15,-20,15,-15,20,15,-15,-20,-15,-15,20,-15,-15],t=[0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23,0,5,12,12,5,17,5,7,17,17,7,19,6,18,7,18,19,7,6,8,18,18,8,20,8,9,20,20,9,21,9,11,21,21,11,23,10,22,11,22,23,11,10,3,22,22,3,15,2,14,3,14,15,3,0,12,2,12,14,2],n=[0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,1,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,-1,0,-1,0,0],r=t.length,i=new Float32Array(r*3),a=new Float32Array(r*3);for(let o=0;o<r;++o){let r=t[o]*3,s=(o/6|0)*3,c=o*3;i.set(e.slice(r,r+3),c);let l=n.slice(s,s+3);a.set(l,c)}return{vertexData:i,normalData:a,vertices:r}}(async function(l){let u;try{u=new(await(r.Renderer(l,`Directional Lighting`)))}catch(e){alert(e)}let d=new a,f=new GUI;f.onChange(O);let p=new i,m=new e,h=new t(m,null),g=new u.Pipeline;u.CreatePassDescriptor(u.CreateColorAttachment(),u.CreateDepthStencilAttachment());let _=g.CreateShaderModule(s),v={rotation:n.DegreesToRadians(0)},{uniforms:y,buffer:b}=g.CreateUniformBuffer(`uniforms`),x={min:-360,max:360,step:1,converters:GUI.converters.radToDeg},S=[g.CreateVertexBufferLayout({name:`position`,format:`float32x3`}),g.CreateVertexBufferLayout({name:`normal`,format:`float32x3`})],{vertexData:C,normalData:w,vertices:T}=c(),E=g.CreateVertexBuffer(w);h.SetRenderPipeline(await u.AddPipeline(g,{vertex:g.CreateVertexState(_,S),depthStencil:g.CreateDepthStencilState(),fragment:g.CreateFragmentState(_),primitive:g.CreatePrimitiveState()}),b),m.CreateVertexBuffer(g,C),g.WriteBuffer(E,w),f.add(v,`rotation`,x),g.AddVertexBuffers(E),m.SetDrawParams(T);let D=n.Vec3.create(-.5,-.7,-1);y.color.set(new o(3407667).rgba),n.Vec3.normalize(D,D),y.light.set(D),d.Add(h);function O(){h.Rotation=[0,v.rotation,0],n.Mat4.rotationY(v.rotation),n.Mat3.fromMat4(n.Mat4.transpose(n.Mat4.inverse(n.Mat4.rotationY(v.rotation))),y.normal),g.WriteBuffer(b,y.normal.buffer),u.Render(d)}new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];u.SetCanvasSize(e,n),p.AspectRatio=u.AspectRatio,p.UpdateViewProjectionMatrix(),p.Position=[100,150,200],p.LookAt([0,35,0]),d.AddCamera(p)}O()}).observe(document.body)})(document.getElementById(`lesson`));
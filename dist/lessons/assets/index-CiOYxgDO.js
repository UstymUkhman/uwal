import{D as S,C as l,F as n,A as a}from"./index-Czl7Amh8.js";import{g as N}from"./mipmaps-kMQ0t0FP.js";import{Q as U}from"./Quad-VFYOTGYq.js";var G="struct Transform{scale: vec2f,offset: vec2f};struct VertexOutput{@builtin(position)position: vec4f,@location(0)textureCoord: vec2f};@group(0)@binding(0)var Sampler: sampler;@group(0)@binding(1)var Texture: texture_2d<f32>;@group(0)@binding(2)var<uniform>transform: Transform;@vertex fn vertex(@builtin(vertex_index)index: u32)->VertexOutput {var output: VertexOutput;var position=GetQuadCoord(index);position=(position+1)*0.5;output.position=vec4f(position*transform.scale+transform.offset,0.0,1.0);output.textureCoord=position;return output;}@fragment fn fragment(@location(0)textureCoord: vec2f)->@location(0)vec4f {return textureSample(Texture,Sampler,textureCoord);}";/**
 * @module Textures
 * @author Ustym Ukhman <ustym.ukhman@gmail.com>
 * @description This lesson is reproduced from WebGPU Textures
 * {@link https://webgpufundamentals.org/webgpu/lessons/webgpu-textures.html}&nbsp;
 * and developed by using a version listed below. Please note that this code
 * may be simplified in future thanks to more recent library APIs.
 * @version 0.0.5
 * @license MIT
 */(async function(d){let r;try{r=new(await S.RenderPipeline(d,"Texture"))}catch(t){alert(t)}r.CreatePipeline({module:r.CreateShaderModule([U,G])});const A=r.CreateColorAttachment();A.clearValue=new l(5000268).rgba,r.CreatePassDescriptor(A);const v=5,B=0,M=2,o={addressModeU:a.REPEAT,addressModeV:a.REPEAT,magFilter:n.LINEAR,minFilter:n.LINEAR,scale:1},R=[a.REPEAT,a.CLAMP],T=[n.NEAREST,n.LINEAR],u=new GUI;u.add(o,"addressModeU",R),u.add(o,"addressModeV",R),u.add(o,"magFilter",T),u.add(o,"minFilter",T),u.add(o,"scale",.5,6);const e=new l(16711680).RGBA,i=new l(16776960).RGBA,b=new l(255).RGBA,F=new Uint8Array([e,e,e,e,e,e,i,e,e,e,e,i,e,e,e,e,i,i,e,e,e,i,e,e,e,e,i,i,i,e,b,e,e,e,e].flat()),c=N(F,v),m=new(await S.Texture()),g=m.CreateTexture({usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,size:[c[0].width,c[0].height],mipLevelCount:c.length,format:"rgba8unorm"});c.forEach(({data:t,width:s,height:f},p)=>m.WriteTexture(t,{bytesPerRow:s*4,texture:g,mipLevel:p,width:s,height:f}));const x=2*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT,C=r.CreateBuffer({size:x,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),E=new Float32Array(x/Float32Array.BYTES_PER_ELEMENT);for(let t=0;t<16;t++){const s=m.CreateSampler({addressModeU:t&1?a.REPEAT:a.CLAMP,addressModeV:t&2?a.REPEAT:a.CLAMP,magFilter:t&4?n.LINEAR:n.NEAREST,minFilter:t&8?n.LINEAR:n.NEAREST});r.AddBindGroups(r.CreateBindGroup(r.CreateBindGroupEntries([s,g.createView(),{buffer:C}])))}function w(t){const s=4/d.width*o.scale,f=4/d.height*o.scale;E.set([s,f],B),E.set([Math.sin(t*.25)*.8,-.8],M),r.WriteBuffer(C,E)}function P(t){const s=+(o.addressModeU===a.REPEAT)*1+ +(o.addressModeV===a.REPEAT)*2+ +(o.magFilter===n.LINEAR)*4+ +(o.minFilter===n.LINEAR)*8;r.SetActiveBindGroups(s),w(t*.001),r.Render(6),requestAnimationFrame(P)}new ResizeObserver(t=>{for(const s of t){const{inlineSize:f,blockSize:p}=s.contentBoxSize[0];r.SetCanvasSize(f/64|0,p/64|0,!1)}requestAnimationFrame(P)}).observe(document.body),d.style.imageRendering="pixelated",d.style.imageRendering="crisp-edges"})(document.getElementById("lesson"));

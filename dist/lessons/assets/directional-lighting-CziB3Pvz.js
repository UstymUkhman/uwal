import{_ as e,a as t,c as n,d as r,g as i,h as a,i as o,l as s,n as c,y as l}from"./lib-DY3i1ENJ.js";import{n as u,t as d}from"./F-BudG6IPd.js";var f=class extends u{#e=a.create();constructor(e,t=`DirectionalLight`){super(t),this.Direction=e||a.create(0,0,-1)}set Direction(e){a.normalize(e,this.#e)}get Direction(){return this.#e}},p=`struct VertexOutput{@location(0)normal: vec3f,@builtin(position)position: vec4f};@group(0)@binding(2)var<uniform>Light: LightUniforms;@vertex fn meshVertex(@location(0)position: vec4f,@location(1)normal: vec3f)->VertexOutput {var output: VertexOutput;output.normal=GetVertexNormal(MeshUniforms.worldNormal,normal);output.position=GetVertexClipSpace(position);return output;}@fragment fn meshFragment(@location(0)normal: vec3f)->@location(0)vec4f {let light=GetDirectionalLight(Light.direction,normal);return vec4f(color.rgb*light,color.a);}`;(async function(a){let u;try{u=new(await(i.Renderer(a,`Directional Lighting`)))}catch(e){alert(e)}let m=new t,h=new GUI;h.onChange(M),u.CreatePassDescriptor(u.CreateColorAttachment(),u.CreateDepthStencilAttachment());let g=new c,_=new n,v=new u.Pipeline,y=[void 0,`meshVertex`],b={rotation:r.DegreesToRadians(0)},x=new o(_,new s(3407667)),S={min:-360,max:360,step:1,converters:GUI.converters.radToDeg},C=v.CreateShaderModule([l,e,p]),{Light:w,buffer:T}=v.CreateUniformBuffer(`Light`),E=[v.CreateVertexBufferLayout({name:`position`,format:`float32x3`},...y),v.CreateVertexBufferLayout({name:`normal`,format:`float32x3`},...y)];x.SetRenderPipeline(await u.AddPipeline(v,{fragment:v.CreateFragmentState(C,void 0,void 0,`meshFragment`),vertex:v.CreateVertexState(C,E,...y),depthStencil:v.CreateDepthStencilState(),primitive:v.CreatePrimitiveState()}),T);let{vertexData:D,normalData:O,vertices:k}=d(),A=v.CreateVertexBuffer(O),j=r.Vec3.create(-.5,-.7,-1);w.direction.set(new f(j).Direction),v.WriteBuffer(T,w.direction.buffer),_.CreateVertexBuffer(v,D),v.WriteBuffer(A,O),h.add(b,`rotation`,S),v.AddVertexBuffers(A),_.SetDrawParams(k),m.Add(x);function M(){x.Rotation=[0,b.rotation,0],u.Render(m)}new ResizeObserver(e=>{for(let t of e){let{inlineSize:e,blockSize:n}=t.contentBoxSize[0];u.SetCanvasSize(e,n),g.AspectRatio=u.AspectRatio,g.UpdateViewProjectionMatrix(),g.Position=[100,150,200],g.LookAt([0,35,0]),m.AddCamera(g)}M()}).observe(document.body)})(document.getElementById(`lesson`));
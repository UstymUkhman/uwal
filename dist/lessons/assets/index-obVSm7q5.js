import{U as p,A as r,F as a}from"./index-BwDKQVXi.js";import{F as T}from"./f-CdSZvatx.js";import{C}from"./Color-DRvW8-9j.js";import{Q as R}from"./Quad-VFYOTGYq.js";var v="struct VertexOutput{@builtin(position)position: vec4f,@location(0)textureCoord: vec2f};@group(0)@binding(0)var Sampler: sampler;@group(0)@binding(1)var Texture: texture_2d<f32>;@vertex fn vertex(@builtin(vertex_index)index: u32)->VertexOutput {var output: VertexOutput;var position=GetQuadCoord(index);position=(position+1)*0.5;output.position=vec4f(position,0.0,1.0);output.textureCoord=position;return output;}@fragment fn fragment(@location(0)textureCoord: vec2f)->@location(0)vec4f {return textureSample(Texture,Sampler,textureCoord);}";/**
 * @module Loading Images
 * @author Ustym Ukhman <ustym.ukhman@gmail.com>
 * @description This lesson is reproduced from WebGPU Loading Images into Textures
 * {@link https://webgpufundamentals.org/webgpu/lessons/webgpu-importing-textures.html}&nbsp;
 * and developed by using a version listed below. Please note that this code
 * may be simplified in future thanks to more recent library APIs.
 * @version 0.0.5
 * @license MIT
 */(async function(d){let t;try{t=new(await p.RenderPipeline(d,"Loading Images"))}catch(e){alert(e)}t.CreatePipeline({module:t.CreateShaderModule([R,v])});const u=t.CreateColorAttachment();u.clearValue=new C(5000268).rgba,t.CreatePassDescriptor(u);const o={addressModeU:r.REPEAT,addressModeV:r.REPEAT,magFilter:a.LINEAR},c=[r.REPEAT,r.CLAMP],l=[a.NEAREST,a.LINEAR],n=new GUI;n.add(o,"addressModeU",c),n.add(o,"addressModeV",c),n.add(o,"magFilter",l),Object.assign(n.domElement.style,{left:"15px",right:""});const m=async e=>await s.CreateBitmapImage(await(await fetch(e)).blob(),{colorSpaceConversion:"none"}),s=new(await p.Texture()),E=await m(T),g=s.CopyImageToTexture(E,{flipY:!0,create:{usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"rgba8unorm"}});for(let e=0;e<8;e++){const i=s.CreateSampler({addressModeU:e&1?r.REPEAT:r.CLAMP,addressModeV:e&2?r.REPEAT:r.CLAMP,magFilter:e&4?a.LINEAR:a.NEAREST});t.AddBindGroups(t.CreateBindGroup(t.CreateBindGroupEntries([i,g.createView()])))}function x(){const e=+(o.addressModeU===r.REPEAT)*1+ +(o.addressModeV===r.REPEAT)*2+ +(o.magFilter===a.LINEAR)*4;t.SetActiveBindGroups(e),t.Render(6)}new ResizeObserver(e=>{for(const i of e){const{inlineSize:f,blockSize:A}=i.contentBoxSize[0];t.SetCanvasSize(f,A)}x()}).observe(d)})(document.getElementById("lesson"));

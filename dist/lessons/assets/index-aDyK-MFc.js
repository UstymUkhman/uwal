import{U as l,A as r,F as a}from"./index-DWxnOMSU.js";import{F as C}from"./f-CdSZvatx.js";import{C as A,Q as R}from"./Quad-C4zpvK4p.js";var v="struct VertexOutput{@builtin(position)position: vec4f,@location(0)textureCoord: vec2f};@group(0)@binding(0)var Sampler: sampler;@group(0)@binding(1)var Texture: texture_2d<f32>;@vertex fn vertex(@builtin(vertex_index)index: u32)->VertexOutput {var output: VertexOutput;var position=GetQuadCoord(index);position=(position+1)*0.5;output.position=vec4f(position,0.0,1.0);output.textureCoord=position;return output;}@fragment fn fragment(@location(0)textureCoord: vec2f)->@location(0)vec4f {return textureSample(Texture,Sampler,textureCoord);}";/**
 * @module Loading Images
 * @author Ustym Ukhman <ustym.ukhman@gmail.com>
 * @description This lesson is reproduced from WebGPU Loading Images into Textures
 * {@link https://webgpufundamentals.org/webgpu/lessons/webgpu-importing-textures.html}&nbsp;
 * and developed by using a version listed below. Please note that this code
 * may be simplified in future thanks to more recent library APIs.
 * @version 0.0.5
 * @license MIT
 */(async function(u){let t;try{t=new(await l.RenderPipeline(u,"Loading Images"))}catch(e){alert(e)}const m=t.CreatePassDescriptor(t.CreateColorAttachment(void 0,"clear","store",new A(5000268).rgba));t.CreatePipeline({module:t.CreateShaderModule([R,v])});const o={addressModeU:r.REPEAT,addressModeV:r.REPEAT,magFilter:a.LINEAR},c=[r.REPEAT,r.CLAMP],E=[a.NEAREST,a.LINEAR],n=new GUI;n.add(o,"addressModeU",c),n.add(o,"addressModeV",c),n.add(o,"magFilter",E),Object.assign(n.domElement.style,{left:"15px",right:""});const x=async e=>await i.CreateBitmapImage(await(await fetch(e)).blob(),{colorSpaceConversion:"none"}),i=new(await l.Texture()),s=await x(C),p=i.CreateTexture({usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,size:[s.width,s.height],format:"rgba8unorm"});i.CopyImageToTexture(s,{texture:p,flipY:!0});for(let e=0;e<8;e++){const d=i.CreateSampler({addressModeU:e&1?r.REPEAT:r.CLAMP,addressModeV:e&2?r.REPEAT:r.CLAMP,magFilter:e&4?a.LINEAR:a.NEAREST});t.AddBindGroups(t.CreateBindGroup(t.CreateBindGroupEntries([d,p.createView()])))}function g(){m.colorAttachments[0].view=t.CurrentTextureView;const e=+(o.addressModeU===r.REPEAT)*1+ +(o.addressModeV===r.REPEAT)*2+ +(o.magFilter===a.LINEAR)*4;t.SetActiveBindGroups(e),t.Render(6)}new ResizeObserver(e=>{for(const d of e){const{inlineSize:T,blockSize:f}=d.contentBoxSize[0];t.SetCanvasSize(T,f)}g()}).observe(u)})(document.getElementById("lesson"));
